_.Module.define({path:"ppb/widget/spreadadPb",sub:{initial:function(a,e,t){var i=$("#spreadad_"+a);if(!(i.size()<1)){this.$me=i;var o=i.data("good_id"),d=i.data("goods_type"),n=i.data("task_id"),r=i.data("good_id"),_=i.data("task_name"),s=i.data("barname_gbk");i.on("click","a",function(e){var t=$($.event.fix(e).currentTarget),i="pb_spreadad_floor_"+a+"_"+o;"0101"==d&&$.cookie(i,1,{expires:1,path:"/"});var s=t.data("locate");$.stats.track(s,"\u5206\u53D1\u7CFB\u7EDF\u4E00\u671F",{obj_type:"\u5206\u53D1",obj_name:n+"_"+_,obj_url:r})}),$.stats.track("pb_\u63A8\u5E7F\u4F4D","\u5206\u53D1\u7CFB\u7EDF\u4E00\u671F","pb","\u5C55\u73B0",{obj_type:"\u5206\u53D1",obj_name:n+"_"+_,obj_url:r});var p=function(){var a=i.find(".spreadad_iframe"),e=a.width(),t=a.height(),o=a.data("src");"0105"==d&&(o+="&word="+s+"&task_name="+window.encodeURIComponent(_)),"0106"==d&&(o+="&query="+window.encodeURIComponent(window.PageData.forum.forum_name)),a.append($('<iframe src="'+o+'" style="width:'+e+"px;height:"+t+'px" scrolling="no" frameborder="0"></iframe>'))};e&&(t||"0106"==d||"0105"==d?p():$(window).on("load",p)),"0106"==d&&(window.__zhixin_hide=$.proxy(this.shutZhixin,this))}},shutZhixin:function(){this.$me.hide()}}});_.Module.define({path:"pfrs/widget/frsSpreadList",requires:[],sub:{initial:function(){this.wrap=$(".j_frs_spread_player"),this._bindEvents(),this._addReplyTime(),$.stats.track("\u5E16\u5B5025\u697C","\u79C0\u5427\u6A21\u5757\u5C55\u793A","","view")},_bindEvents:function(){this.wrap.find(".j_photo").on("click",function(){$.stats.track("frs-25\u697C","\u89C6\u9891feed\u6D41","frs","click")}),this.wrap.find(".j_entry_title").on("click",function(){$.stats.track("frs-25\u697C","\u89C6\u9891feed\u6D41","frs","click")}),this.wrap.find(".hover_r").hover(function(){$(this).find(".zhe1").show()},function(){$(this).find(".zhe1").hide()})},_addReplyTime:function(){var t=$(".spreadad_0001"),i=t.parent().next(".j_thread_list").find(".j_reply_data").html()||"";t.find(".j_reply_data").html(i)}}});_.Module.define({path:"pfrs/widget/dasense",requires:["pcommon/widget/messenger"],sub:{initial:function(e,a){var t=$("#dasense_"+e);t.size()<1||(this.$me=t,this.floor=e,this.adtypeid=this.$me.tbattr("data-datypeid"),this.initTrackField(),this.doneShowStat=!1,this.scrollShowTimeout,this.bindEvent(),a&&(this.loadIFrame(),this.initIFrameMessenger()),("0009"==this.adtypeid||"0015"==this.adtypeid||"0106"==this.adtypeid)&&(this.initZhixin(),window.__zhixin_hide=$.proxy(this.shutZhixin,this)),"0108"==this.adtypeid&&this.loadWangmeng(),"0200"==this.adtypeid&&this._leftFloatAd(t,this.adtypeid,a,this.ext1,this.floor))},initTrackField:function(){var e="",a="",t="",i="",d="",n="",o=$.cookie("BAIDUID");PageData&&(e=PageData.product.toUpperCase(),PageData.forum&&(a=PageData.forum.forum_id||"",t=PageData.forum.forum_name||""),PageData.user&&(n=PageData.user.user_id||PageData.user.user_id||""),PageData.thread&&(i=PageData.thread&&PageData.thread.thread_id||""));var s=this.adtypeid,r=this.$me.data("daid"),m=this.$me.data("daname"),c=this.$me.data("dagoodid"),f=this.$me.data("dafirstname"),h=this.$me.data("dasecondname"),u=this.$me.data("dacpid"),_=this.$me.data("daabtest"),l=this.$me.data("daprice"),g=this.$me.data("daverify"),p=this.$me.data("daextinfo"),w=this.$me.data("daplanid"),y=this.$me.data("dauserid");this.forIframe=["dapage="+e,"dafid="+a,"datid="+i,"dacuid="+d,"dauid="+n,"dabaiduid="+o,"datypeid="+s,"daid="+r,"daname="+encodeURIComponent(m),"dagoodid="+c,"dafirstname="+encodeURIComponent(f),"dasecondname="+encodeURIComponent(h),"dacpid="+u,"daabtest="+_,"daprice="+l,"daverify="+g,"daextinfo="+p,"daplanid="+w,"dauserid="+y].join("&"),this.task="tbda",this.ext1={client_type:"pc_web",task:this.task,da_task:this.task,page:e.toLowerCase(),da_page:e,da_obj_id:r,fid:a,tid:i,da_good_id:c,da_ext_info:p,da_price:l,da_verify:g,cuid:d,uid:n,baiduid:o,da_obj_name:m,da_first_name:f,da_second_name:h,da_cpid:u,da_abtest:_},this.ext2={trackUrl:"/billboard/pushlog/?",da_task:this.task,da_page:e,da_client_type:"PC",da_obj_id:r,da_fid:a,da_tid:i,da_good_id:c,da_ext_info:p,da_plan_id:w,da_user_id:y,da_price:l,da_verify:g,da_cuid:d,da_uid:n,da_baiduid:o,da_cpid:u}},bindEvent:function(){var e=this;e.$me.on("click","a",function(a){var t=$($.event.fix(a).currentTarget),i=e.floor+"_"+t.data("locate");e.track($.extend({},e.ext1,{locate:i,da_locate:i,type:"click",da_type:"click"})),e.track($.extend({},e.ext2,{da_locate:e.floor,da_type:"click"}))});var a=function(){e.doneShowStat||(e.track($.extend({},e.ext1,{locate:e.floor,da_locate:e.floor,type:"show",da_type:"show"})),e.track($.extend({},e.ext2,{da_locate:e.floor,da_type:"show"})),e.doneShowStat=!0)},t=function(){var a=e.$me.offset().top,t=e.$me.offset().top+e.$me.height(),i=$("body").scrollTop(),d=$(window).height()+i,n=!1;return(a>i&&d>=a||t>i&&d>=t)&&(n=!0),n};t()?a():$(window).on("scroll",function(){t()&&(clearTimeout(e.scrollShowTimeout),e.scrollShowTimeout=setTimeout(a,200))})},_leftFloatAd:function(e,a,t,i,d){var n=e.data("daid"),i=i,d=d;$img=e.find("#j_ten_years2").find(".ten_years"),$closeBtn=e.find("#j_ten_years2").find(".j_close_btn");var o=$img.data("hover"),s=$.tb.unescapeHTML($img.tbattr("src"));$img.mouseover(function(){$(this).tbprop("src",o)}).mouseout(function(){$(this).tbprop("src",s)}),$closeBtn.data("adid",n);var r=this;t||"0200"!=a||$closeBtn.on("click",function(e){var a=$($.event.fix(e).currentTarget),t=d+"_"+a.data("locate");r.track($.extend({},i,{locate:t,da_locate:t,type:"click",da_type:"click"}));var n=$(this).data("adid");$.ajax({type:"post",url:"/adsense/addUserMask",data:{user_id:PageData.user.user_id||"",advertid:n||""},context:this,dataType:"json",success:function(e){0===e.errno?$(this).parent().parent().hide():console.log("ERROR: send pc left float ad to server ")},error:function(){console.log("ERROR: send pc left float ad to server error")}})})},loadWangmeng:function(){var e=this.$me.find(".dasense_wangmeng_placeholder"),a=e.data("wangmengid");$.JsLoadManager.use(["http://cbjs.baidu.com/js/m.js"],function(){var e=PageData.forum?PageData.forum.forum_id:0;BAIDU_CLB_addOrientation("tbid",e+""),BAIDU_CLB_fillSlotAsync(a,"dasense_wangmeng_"+a)})},loadIFrame:function(){var e=this.$me.find(".dasense_iframe"),a=e.width(),t=e.height(),i=e.data("src"),d=this.adtypeid,n=$.cookie("BAIDUID"),o=this.$me.data("barname_gbk");"0010"==d&&(i+="&barname="+window.encodeURIComponent(window.PageData.forum.forum_name)+"&barcid="+window.encodeURIComponent(window.PageData.forum.first_class+"^"+window.PageData.forum.second_class)),("0008"==d||"0105"==d||"0016"==d)&&(i+="&word="+o),("0009"==d||"0015"==d||"0106"==d)&&(i+="&query="+window.encodeURIComponent(window.PageData.forum.forum_name)),"0021"==d&&(i+="&query="+window.encodeURIComponent(window.PageData.forum.forum_name)+"&firstname="+encodeURIComponent(window.PageData.forum.first_class)+"&secondname="+encodeURIComponent(window.PageData.forum.second_class),this.initToggle()),"0013"==d&&(i+="adforumname="+window.encodeURIComponent(window.PageData.forum.forum_name)),"0020"==d&&(i+="adforumname="+window.encodeURIComponent(window.PageData.forum.forum_name)+"&word="+o),"0018"==d&&(i+="&fid="+PageData.forum.forum_id+"&firstname="+encodeURIComponent(window.PageData.forum.first_class)+"&secondname="+encodeURIComponent(window.PageData.forum.second_class)+"&query="+encodeURIComponent(window.PageData.forum.forum_name)),("0017"==d||"0109"==d)&&(i+="&daquery="+encodeURIComponent(window.PageData.forum.forum_name)),"0019"==d&&(i+="&baiduid="+n),("0022"==d||"0023"==d||"0025"==d)&&(i+="&firstname="+encodeURIComponent(window.PageData.forum.first_class)+"&secondname="+encodeURIComponent(window.PageData.forum.second_class)+"&query="+encodeURIComponent(window.PageData.forum.forum_name)),i+="&"+this.forIframe,e.append($('<iframe src="'+i+'" style="width:'+a+"px;height:"+t+'px" scrolling="no" frameborder="0"></iframe>'))},initIFrameMessenger:function(){var e=this.use("pcommon/widget/messenger","parent","checkStatus");e.registerOrigin(this.getMessengerWhitelist()),e.registerCommand({comforum_adsense:$.proxy(this.iFrameMessengerHandler,this)})},iFrameMessengerHandler:function(e){var a=$('.dasense[data-daid="'+e.id+'"]'),t=a.find(".dasense_iframe");e.status&&"success"===e.status?(e.height&&e.height<t.height()&&a.find(".dasense_iframe, iframe").height(e.height),a.css({position:"",left:"","z-index":""}),a.show()):a.hide()},getMessengerWhitelist:function(){var e=0,a=[],t=PageUnit.load("dasense_messenger_whitelist"),i=t.length;for(e;i>e;e++)a.push(t[e][0]);return a},initZhixin:function(){var e=this,a=e.$me.find(".dasense_toggleBtn"),t=e.$me.find(".dasense_cont_main"),i="dasense_0009_closed";a.on("click",function(){var a=e.$me.hasClass(i);return a?e.$me.removeClass(i):e.$me.addClass(i),t.animate({height:"toggle"}),!1})},initToggle:function(){var e=this,a=e.$me.find(".dasense_toggleBtn"),t=e.$me.find(".dasense_cont_main"),i="dasense_toggle_wrap_closed";a.on("click",function(){var a=e.$me.hasClass(i);return a?e.$me.removeClass(i):e.$me.addClass(i),t.animate({height:"toggle"}),!1})},shutZhixin:function(){this.$me.hide()},track:function(e){if(document.images){var a=new Image;window["bd_pv_"+(new Date).getTime()]=a;var t="http://static.tieba.baidu.com/tb/img/track.gif?",i=[];e.hasOwnProperty("trackUrl")&&(t=e.trackUrl,delete e.trackUrl);for(var d in e)e.hasOwnProperty(d)&&i.push(d+"="+encodeURIComponent(e[d]));t+=i.join("&"),a.src=t+"&t="+(new Date).getTime(),a=null}}}});_.Module.define({path:"pfrs/widget/wangmengFeedAd",sub:{initial:function(a){this.data=a;var t=this.data.id;$.JsLoadManager.use(["http://cbjs.baidu.com/js/m.js"],function(){var a=PageData.forum?PageData.forum.forum_id:0;BAIDU_CLB_addOrientation("tbid",a+""),BAIDU_CLB_fillSlotAsync(t,"BAIDU_CLB_AD_IFRAME_"+t)})}}});_.Module.define({path:"pplatform/widget/InfoCollection",requires:["common/component/Placeholder"],sub:{initial:function(n){this.options=n,this.initDialogEvent()},initPlaceHolder:function(){this.requireInstanceAsync("common/component/Placeholder",[".j_info_collection_info","\u7B80\u8FF0\u60A8\u7684\u9700\u6C42..."]),this.requireInstanceAsync("common/component/Placeholder",[".j_info_collection_name","\u60A8\u7684\u59D3\u6C0F"]),this.requireInstanceAsync("common/component/Placeholder",[".j_info_collection_city","\u60A8\u7684\u57CE\u5E02"]),this.requireInstanceAsync("common/component/Placeholder",[".j_info_collection_phone","\u60A8\u7684\u624B\u673A"])},initDialogEvent:function(){var n=this;$(".info_collection_main").on("click",".j_info_collection_button, .j_info_collection_main_logo",function(){var o=baidu.template("info_collection_form",{}),i=new $.dialog({title:"",noTitle:!0,holderClassName:"info_collection_form",html:o,width:470});n.dialog=i,n.$main=$(i.getElement()),n.initCheckEvent(),n.initSubmitEvent(),n.initPlaceHolder()})},initSubmitEvent:function(){var n=this,o=n.$main;o.on("click",".j_info_collection_submit",function(i){i.preventDefault(),n.submitCheck()&&$.post("/gcf/consume/consumeCommit?ie=utf-8",{tbs:PageData.tbs,forum_name:PageData.forum.forum_name,forum_id:PageData.forum.forum_id,name:o.find(".j_info_collection_name").val(),info:o.find(".j_info_collection_info").val(),gender:o.find("input[name='gender']:checked").val(),city:o.find(".j_info_collection_city").val(),mobile_phone_number:o.find(".j_info_collection_phone").val(),start_time:n.options.start_time,end_time:n.options.end_time},function(o){if(0==o.no){var i=baidu.template("info_collection_success_dialog",{}),e=new $.dialog({title:"",noTitle:!0,holderClassName:"info_collection_success_dialog",html:i,width:410});$(e.element).on("onclose",function(){n.dialog.close()}),$(e.element).on("click",".j_success_button",function(n){n.preventDefault(),e.close()})}else 210009==o.no?n.alertInfo("\u4E0D\u662F\u5408\u6CD5\u7684\u624B\u673A\u53F7~"):2220013==o.no?n.alertInfo("\u64CD\u4F5C\u8FC7\u4E8E\u9891\u7E41\uFF0C\u8BF7\u7A0D\u5019\u518D\u8BD5~"):n.alertInfo("\u64CD\u4F5C\u5F02\u5E38\uFF0C\u8BF7\u518D\u8BD5\u4E00\u4E0B~")},"json")})},submitCheck:function(){var n=this,o=n.$main.find(".j_info_collection_phone"),i=/^1\d{10}$/g,e=!0;return i.test(o.val())===!1?(o.addClass("error_hint"),o.siblings("p").css("display","block"),e=!1):(o.siblings("p").css("display","none"),o.removeClass("error_hint")),e},initCheckEvent:function(){var n=this,o=n.$main.find(".j_info_collection_phone"),i=/^1\d{10}$/g;o.on("focus",function(){$(this).removeClass("error_hint"),o.siblings("p").css("display","none")}),o.on("blur",function(){i.test(o.val())===!1&&($(this).addClass("error_hint"),o.siblings("p").css("display","block"))})},alertInfo:function(n){$.tb.alert({heading:"",message:"<h3 style='text-align:center;margin-bottom:40px'>"+n+"</h3>",noTitle:!0,buttons:[{text:"\u786E\u5B9A",callback:function(n,o){o.close()}}]})}}});_.Module.define({path:"puser/widget/Residual",requires:[],sub:{initial:function(i){this.dataObj=i,this.initOptions()},initOptions:function(){this.options={1070001:"worship",1070002:"egg"}},getResidualKey:function(i){for(var e=i.props||{},s=null,n="",t=["1070002","1070001"],a=0;a<t.length;a++)if(s=e[t[a]],s&&s.num>0&&s.end_time>Env.server_time/1e3){n=this.options[t[a]];break}return n},showUI:function(i){var e=i.wrap,s="",n=null,t=i.key||this.getResidualKey(i);t&&(s="residual_wrap residual_wrap_"+t,n=e.find(".residual_wrap"),n[0]?n.removeClass().addClass(s):(n=$('<div class="'+s+'"></div>'),e.append(n)))}}});_.Module.define({path:"common/widget/LoginDialog",sub:{_config:{apiOpt:{staticPage:"http://"+$.tb.location.getHost()+"/tb/static-common/html/pass/v3Jump.html",product:"tb",charset:PageData.charset?PageData.charset:"GBK",u:"",memberPass:!0,safeFlag:0},cache:!1,img:"",onLoginSuccess:function(t){t.returnValue=!1,$.stats.sendRequest("st_type=login_succeed&fr=tb0&st_pos="),$.tb.location.reload()},onSubmitStart:function(){$.stats.sendRequest("st_type=login_click&fr=tb0&st_pos=")},registerLink:"https://passport.baidu.com/v2/?reg&tpl=tb&u=http://tieba.baidu.com",tangram:!0},initial:function(t,s,i){var a=this,o=1;if(a._config.apiOpt.u="string"==typeof t&&""!=t?t:$.tb.location.getHref(),"string"==typeof s){switch(s){case"userBar":o=1;break;case"editor1":case"lzl":o=2;break;case"editor":o=3;break;case"lzonly":o=4;break;case"ilike":o=5;break;default:o=1}a._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+o+".png"}else a._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+o+".png";PageData&&(a._config.apiOpt.isQuickUser=PageData.is_quick_user||0),i&&(a._config.onLoginSuccess=i),function(t){var s="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime();t.JsLoadManager.use(["http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(s/6e4),"http://passport.bdimg.com/passApi/js/wrapper.js?cdnversion="+Math.floor(s/6e4)],function(){t.passPopInstance||(t.passPopInstance=passport.pop.init(a._config)),t("#passport-login-pop").find(".pass-login-pop-img img").tbattr("src",a._config.img),t.passPopInstance.show(),setTimeout(function(){t("#passport-login-pop").find("input.pass-button-submit").tbattr("alog-alias","login")},1e3)},!0,"utf-8")}(window.jQuery)}}});_.Module.define({path:"comforum/widget/promoter_post_opts",requires:["common/widget/LoginDialog","common/widget/ScrollPanel"],sub:{initial:function(t){if(this.args=t||{},this.args=$.extend(this.args,{tbs:PageData.tbs,forumId:PageData.forum.forum_id,forumName:PageData.forum.forum_name,threadId:PageData.thread.thread_id,threadTitle:PageData.thread.title,threadContent:PageData.thread.thread_id,userId:PageData.user.user_id,userLevel:PageData.user.level_id,userIsLogin:PageData.user.is_login}),this.tbs=this.args.tbs,this.pn=this.args.pn,this.forumId=this.args.forumId,this.forumName=this.args.forumName,this.threadId=this.args.threadId,this.threadTitle=this.args.threadTitle,this.threadContent=this.args.threadContentthreadContent,this.threadMasterTitle=this.args.promoterMasterTitle,this.userId=this.args.userId,this.userLevel=this.args.userLevel,this.userIsLogin=this.args.userIsLogin,this.userPostPid="",this.promoterSource=this.args.promoterAttr.source||{},this.promoterSourceType=this.promoterSource.type,this.promoterSourceForumId=this.promoterSource.forum_id,this.promoterSourcePosition=this.promoterSource.position,this.promoterSourceUserId=this.promoterSource.user_id,this.promoterSourceTime=this.promoterSource.time,this.promoterSourceString=[this.promoterSourceType,this.promoterSourceForumId,this.promoterSourcePosition,this.promoterSourceUserId,this.promoterSourceTime].join(","),this.promoterVideo=this.args.promoterAttr.video||{},this.promoterVideoImageUrl=this.promoterVideo.img_url,this.promoterVideoLinkUrl=this.promoterVideo.link_url,this.promoterUserIds=this.args.promoterUserIds,this.defaultThreadContent="\u6311\u6218\u5BA3\u8A00",this.repostPostId="",this.$postList=$(".j_l_post"),this.$titleOpt=$(".j_promoter_title_opt"),"0"==this.promoterSourceType)this.getPbZan();else{if(!(this.promoterSourceType>"0"&&"1"==this.pn))return;this.getPbUserZan()}this.bindEvents()},bindEvents:function(){this.$postList.on("click",".j_opt_btn_zan",$.proxy(this.doZan,this)),this.$postList.on("click",".j_opt_btn_challenge",$.proxy(this.doChallenge,this)),this.$postList.on("click",".j_opt_btn_repost",$.proxy(this.getRepostToForumList,this)),window.Page.checkLoadedModules("forumList")||this.$titleOpt.on("click",$.proxy(this.onTitleOptClick,this))},getPromoterDialogContent:function(t){t||(t={},t.tips=["\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8FD8\u8BF7\u91CD\u8BD5\u4E0B"],t.opts=[{type:"close",color:"sub",text:"\u5173\u95ED"}]);var o=this,e=t.title?'<div class="promoter_dialog_title">'+t.title+"</div>":"",s="";t.tips&&$(t.tips).each(function(t,o){s+="<p>"+o+"</p>"});var r="";t.opts&&$(t.opts).each(function(t,e){switch(e.type){case"close":r+='<button class="btn btn-'+(e.color||"default")+' btn-middle j_toClose"'+(e.stats?' data-locate="'+e.stats.locate+'"':"")+">"+(e.text||"\u53D6\u6D88")+"</button>";break;case"my_floor":r+='<button class="btn btn-'+(e.color||"default")+' btn-middle j_toMyFloor">'+(e.text||"\u6211\u7684\u697C\u5C42")+"</button>";break;case"repost":r+='<button class="btn btn-'+(e.color||"default")+' btn-middle j_toRepost">'+(e.text||"\u8F6C\u53D1")+"</button>";break;case"redirect":r+='<a href="'+o.promoterVideoLinkUrl+'" target="_blank" class="btn btn-'+(e.color||"default")+' btn-middle j_toRedirect"'+(e.stats?' data-locate="'+e.stats.locate+'"':"")+">"+(e.text||"\u901B\u540E\u5BAB")+"</a>"}});var i=t.repost?['<div class="promoter_dialog_head">\u8F6C\u53D1\u6218\u4E66</div>','<div class="promoter_dialog_repost">',t.repost.info?'<div class="info">'+t.repost.info+"</div>":"",'<div class="post_form'+(0==o.promoterSourceType?"":" post_form_readonly")+'">','<div class="video_image"><div class="img"><img src="',o.promoterVideoImageUrl,'" alt=""></div></div>','<div class="post_form_input post_form_input_title">',0==o.promoterSourceType?'<input type="text" class="j_promoter_repost_title" placeholder="\u6311\u6218\u6807\u9898" value="">':'<span class="label">\u6807\u9898\uFF1A</span>'+o.threadTitle,"</div>",'<div class="post_form_input post_form_input_content">',0==o.promoterSourceType?'<textarea class="j_promoter_repost_content" placeholder="'+o.defaultThreadContent+'"></textarea>':'<span class="label">\u5185\u5BB9\uFF1A</span>'+o.threadContent,"</div>","</div>",'<div class="post_to">','<div class="h4">\u8F6C\u53D1\u5230\uFF1A</div>','<div class="post_forum_list clearfix j_post_forum_list">',"</div>","</div>","</div>"].join(""):"",a=['<div class="promoter_dialog_body">',e,i,'<div class="promoter_dialog_tip">',s,"</div>",'<div class="promoter_dialog_opts">',r,"</div>","</div>"].join("");return a},bindDialogEvent:function(t){var o=this;t.element.on("click",".j_toClose",function(e){var s=$(e.currentTarget),r=s.tbattr("data-locate");$.stats.track(r,"\u63A8\u5E7F\u5458\u7CFB\u7EDF","","click",{obj_type:o.promoterSourceType}),t.close()}),t.element.on("click",".j_toRedirect",function(t){var e=$(t.currentTarget),s=e.tbattr("data-locate");$.stats.track(s,"\u63A8\u5E7F\u5458\u7CFB\u7EDF","","click",{obj_type:o.promoterSourceType})}),t.element.on("click",".j_toMyFloor",function(){t.close(),o.jumpToMyFloor()}),t.element.on("click",".j_toRepost",function(){o.doRepost(t)}),t.element.on("click",".j_toRepostForum",function(t){o.setRepostToForum(t)})},doZan:function(t){if(!this.userIsLogin)return this.requireInstance("common/widget/LoginDialog"),void 0;if(!this.doingZan){var o=this,e=$(t.currentTarget).closest(".j_l_post"),s=e.get(0)&&e.getData(),r=s&&s.content&&s.content.post_id||"";this.doingZan=!0,$.ajax({url:"/minigame/caster/zan",type:"POST",dataType:"json",data:{post_id:r,tbs:o.tbs}}).done(function(e){o.doZanCallback(e),0==e.no&&o.doZanAnimate(t),o.doingZan=null})}},doZanCallback:function(t){t=t||{};var o=[];o[0]={title:"\u70B9\u8D5E\u6210\u529F\uFF01",tips:["\u60A8\u73B0\u5728\u53EF\u4EE5\u53BB\u901B"+this.threadMasterTitle+"\u5927\u5E1D\u7684\u540E\u5BAB\u5566\uFF01"],opts:[{type:"close",color:"sub",stats:{locate:"\u70B9\u8D5E\u6210\u529F-\u5173\u95ED\u6309\u94AE"}},{type:"redirect",stats:{locate:"\u70B9\u8D5E\u6210\u529F-\u901B\u540E\u5BAB\u6309\u94AE"}}]},o[65535]={tips:["\u6BCF\u5929\u53EA\u80FD\u70B9\u4E00\u6B21\u8D5E\uFF0C\u4ECA\u5929\u60A8\u7684\u8D5E\u5DF2\u7ECF\u70B9\u8FC7\u4E86\uFF0C","\u8BF7\u660E\u5929\u518D\u6765\u70B9\u8D5E\u5427\uFF01"],opts:[{type:"close",color:"sub",stats:{locate:"\u5DF2\u7ECF\u70B9\u8D5E-\u5173\u95ED\u6309\u94AE"}},{type:"redirect",stats:{locate:"\u5DF2\u7ECF\u70B9\u8D5E-\u901B\u540E\u5BAB\u6309\u94AE"}}]},o[65534]={title:"\u4ECA\u5929\u7684\u8D5E\u5DF2\u7ECF\u7528\u5B8C\u4E86",tips:["\u60A8\u53EF\u4EE5\u53BB\u9759\u6001\u5927\u5E1D\u7684\u540E\u5BAB\u901B\u901B\uFF5E"],opts:[{type:"close",color:"sub",stats:{locate:"\u8D5E\u7528\u5B8C\u4E86-\u5173\u95ED\u6309\u94AE"}},{type:"redirect",stats:{locate:"\u8D5E\u7528\u5B8C\u4E86-\u901B\u540E\u5BAB\u6309\u94AE"}}]};var e=this.getPromoterDialogContent(o[t.no]),s=new $.dialog({showShadow:!1,fixed:!1,html:e,holderClassName:"promoter_dialog",width:430});this.bindDialogEvent(s)},doZanAnimate:function(t){var o=$(t.currentTarget),e=o.find(".opt_icon"),s=$('<div class="plus">+1</div>');e.append(s),s.animate({"margin-bottom":"10px"}).animate({opacity:"0"},function(){s.remove()});var r=o.find(".j_zan_count"),i=r.find("span").text()||"0";this.setCount(r,+i+1)},setCount:function(t,o){t.html("<span>"+o+"</span>\u4EBA")},doChallenge:function(){if(!this.userIsLogin)return this.requireInstance("common/widget/LoginDialog"),void 0;if(!this.doingChallenge){$.stats.track("\u6311\u6218","\u63A8\u5E7F\u5458\u7CFB\u7EDF","","click");var t=this;if(t.userLevel<6)return t.doChallengeCallback({err_code:2540001}),void 0;if(t.userPostPid)return t.doChallengeCallback({err_code:2210002}),void 0;if(t.userId&&t.promoterSourceUserId==t.userId)return t.doChallengeCallback({err_code:"a3"}),void 0;this.doingChallenge=!0,$.ajax({url:"/f/commit/post/caster/add",type:"POST",dataType:"json",data:{caster_post_type:0,tid:t.threadId,content:" ",fid:t.forumId,fname:t.forumName,kw:t.forumName,tbs:t.tbs}}).done(function(o){t.doChallengeCallback(o),t.doingChallenge=null})}},doChallengeCallback:function(t){t=t||{};var o=[];o[0]={tips:["\u6311\u6218\u6210\u529F\uFF01\u53EF\u4EE5\u8F6C\u53D1\u5230\u8D34\u5427\u8BF7\u5C0F\u4F19\u4F34\u5E2E\u52A9\u54E6\uFF01"],opts:[{type:"my_floor",text:"\u6211\u7684\u697C\u5C42"}]},o.a3={tips:["\u4EB2\u771F\u987D\u76AE\uFF0C\u4E0D\u80FD\u81EA\u5DF1\u6311\u6218\u81EA\u5DF1\u5594~"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[2540001]={tips:["\u5F88\u62B1\u6B49\uFF0C\u53EA\u6709\u672C\u54276\u7EA7\u4EE5\u4E0A\u4F1A\u5458\u624D\u80FD\u53D1\u8D77\u6311\u6218"],opts:[{type:"close",color:"sub",text:"\u77E5\u9053\u4E86",stats:{locate:"\u975E6\u7EA7\u4EE5\u4E0A\u6311\u6218-\u5173\u95ED\u6309\u94AE"}},{type:"redirect",text:"\u6C42\u5B89\u6170",stats:{locate:"\u975E6\u7EA7\u4EE5\u4E0A\u6311\u6218-\u6C42\u5B89\u6170\u6309\u94AE"}}]},o[2270017]={tips:["\u5F88\u62B1\u6B49\uFF0C\u672C\u8D34\u5DF2\u8FC7\u671F\uFF0C\u4E0D\u652F\u6301\u6311\u6218\uFF5E"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[2210002]={tips:["\u60A8\u4ECA\u513F\u5DF2\u7ECF\u53D1\u8D77\u8FC7\u6311\u6218\u5566\uFF0C\u660E\u513F\u518D\u6765\uFF5E"],opts:[{type:"my_floor",text:"\u6211\u7684\u697C\u5C42"}]},2210002!=t.err_code||this.userPostPid||(o[2210002]={tips:["\u5F88\u62B1\u6B49\uFF0C\u53EA\u80FD\u5728\u4E00\u4E2A\u5DE5\u4F1A\u53D1\u8D77\u6311\u6218"],opts:[{type:"close",color:"sub",text:"\u77E5\u9053\u4E86"}]});var e=this.getPromoterDialogContent(o[t.err_code]),s=new $.dialog({showShadow:!1,fixed:!1,html:e,holderClassName:"promoter_dialog",width:430});0==t.err_code&&(this.userPostPid=t.data.post_id,this.updateTitleDisplay()),this.bindDialogEvent(s)},getRepostToForumList:function(t){if(!this.gettingRepostToForumList){var o=this,e=$(t.currentTarget).closest(".j_l_post"),s=e.getData(),r=s.content&&s.content.post_id||"",i=s.content&&s.content.content||"";if(this.repostPostId=r,this.threadContent=i,o.repostToForumListReceived)return o.showRepostForm(),void 0;this.gettingRepostToForumList=!0,$.ajax({url:"/minigame/caster/favorforum",type:"GET",dataType:"json"}).done(function(t){0==t.no?(o.repostToForumListReceived=!0,o.repostToForumList=t.data,o.showRepostForm()):o.doRepostCallback(),o.gettingRepostToForumList=null})}},showRepostForm:function(){if(this.repostToForumListReceived&&(!this.repostToForumList||!this.repostToForumList.length))return this.doRepostCallback({err_code:2540001}),void 0;var t={repost:{info:0==this.promoterSourceType?"\u6BCF\u5929\u53EA\u80FD\u8F6C\u53D1\u4E00\u6B21\uFF0C\u8BF7\u73CD\u60DC\u8FD9\u6B21\u673A\u4F1A\u54E6~":""},opts:[{type:"close",color:"sub"},{type:"repost",text:"\u8F6C\u53D1"}]},o=this.getPromoterDialogContent(t),e=new $.dialog({showShadow:!1,fixed:!1,html:o,holderClassName:"promoter_dialog",width:520});this.buildRepostToForumListContent(e),this.repostToForumId="",this.repostToForumName="",this.bindDialogEvent(e)},buildRepostToForumListContent:function(t){for(var o="",e=0,s=this.repostToForumList.length;s>e;e++){var r=this.repostToForumList[e];o+='<a href="javascript:" class="post_forum j_toRepostForum" data-fid="'+r.forum_id+'" data-fname="'+r.forum_name+'">'+r.forum_name+'<span class="forum_level lv'+r.level_id+'"></span></a>'}this.requireInstance("common/widget/ScrollPanel",{container:t.element.find(".j_post_forum_list"),height:135,content:o})},setRepostToForum:function(t){var o=$(t.currentTarget),e=o.tbattr("data-fid"),s=o.tbattr("data-fname");this.repostToForumId=e,this.repostToForumName=s,o.siblings().removeClass("post_forum_selected"),o.addClass("post_forum_selected")},doRepost:function(t){if(!this.doingRepost){var o=this;if(!o.repostToForumId)return o.doRepostCallback({err_code:"a1"}),void 0;if(!$.trim($(".j_promoter_repost_title").val())&&0==o.promoterSourceType)return o.doRepostCallback({err_code:"needTitle"}),void 0;this.doingRepost=!0,$.ajax({url:"/f/commit/thread/caster/add",type:"POST",dataType:"json",data:{caster_post_type:+o.promoterSourceType+1,caster_post_id:this.repostPostId,title:0==o.promoterSourceType?$(".j_promoter_repost_title").val()||"":o.threadTitle,content:0==o.promoterSourceType?$(".j_promoter_repost_content").val()||"":o.threadContent,fid:o.repostToForumId,fname:o.repostToForumName,kw:o.repostToForumName,tbs:o.tbs}}).done(function(e){o.doRepostCallback(e),0==e.err_code&&t.close(),o.doingRepost=null})}},doRepostCallback:function(t){t=t||{};var o=[];o[0]={tips:["\u8F6C\u53D1\u6210\u529F\uFF01"]},o.a1={tips:["\u8FD8\u6CA1\u9009\u62E9\u8F6C\u53D1\u5230\u7684\u5427"],opts:[{type:"close",color:"sub",text:"\u77E5\u9053\u4E86"}]},o.needTitle={tips:["\u6311\u6218\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"],opts:[{type:"close",color:"sub",text:"\u77E5\u9053\u4E86"}]},o[2540001]={tips:["\u5F88\u62B1\u6B49\uFF0C\u6311\u6218\u8D34\u53EA\u80FD\u8F6C\u53D1\u52306\u7EA7\u4EE5\u4E0A\u5427\u4E2D\uFF01","\u60A8\u8FD8\u6CA1\u6709\u5230\u8FBE6\u7EA7\u7684\u5427"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[2270017]={tips:["\u5F88\u62B1\u6B49\uFF0C\u672C\u8D34\u5DF2\u8FC7\u671F\uFF0C\u4E0D\u652F\u6301\u8F6C\u53D1\uFF5E"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[65535]={tips:["\u5F88\u62B1\u6B49\uFF0C\u4ECA\u5929\u7684\u8F6C\u53D1\u673A\u4F1A\u7528\u5B8C\u4E86\uFF01","\u60A8\u53EF\u4EE5\u5728\u6211\u7684\u8D34\u5B50\u4E2D\u67E5\u770B\u5DF2\u8F6C\u53D1\u8D34\u5B50"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[65533]={tips:["\u5F88\u62B1\u6B49\uFF0C\u8BE5\u5427\u8F6C\u53D1\u6B21\u6570\u53D7\u5230\u9650\u5236\uFF01"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]},o[65534]={tips:["\u5F88\u62B1\u6B49\uFF0C\u8F6C\u53D1\u592A\u9891\u7E41\u5566\uFF0C\u4F11\u606F\u4E0B\u5427"],opts:[{type:"close",text:"\u77E5\u9053\u4E86"}]};var e=this.getPromoterDialogContent(o[t.err_code]),s=new $.dialog({showShadow:!1,fixed:!1,html:e,holderClassName:"promoter_dialog",width:430});0==t.err_code&&setTimeout(function(){s.close()},2e3),this.bindDialogEvent(s)},jumpToMyFloor:function(){if(this.userPostPid){var t="/p/"+this.threadId+"?pid="+this.userPostPid+"#"+this.userPostPid;$.tb.location.setHref(t)}},getPbZan:function(){var t=this;$.ajax({url:"/minigame/caster/pb",type:"GET",dataType:"json",data:{caster_attr:t.promoterSourceString,thread_id:t.threadId,user_ids:t.promoterUserIds.join(",")}}).done(function(o){t.getPbZanCallback(o),t.updateTitleDisplay()})},getPbUserZan:function(){var t=this;$.ajax({url:"/minigame/caster/userzan",type:"GET",dataType:"json",data:{caster_attr:t.promoterSourceString}}).done(function(o){0==o.no&&t.setCount($(t.$postList.get(0)).find(".j_opt_btn_zan .j_zan_count"),o.data[t.promoterSourceUserId]||0)})},getPostFloor:function(t){var o;return $(this.$postList).each(function(e,s){var r=$(s).getData(),i=r&&r.author&&r.author.user_id||"";return i==t?(o=$(s),!1):void 0}),o},getPbZanCallback:function(t){var o=this;if(0===t.no){var e=t.data;o.userPostPid=e.my_post,$(e.user_zan).each(function(t,e){var s=o.getPostFloor(e.user_id);s&&s.get(0)&&o.setCount(s.find(".j_opt_btn_zan .j_zan_count"),e.score||0)}),o.setCount($(o.$postList.get(0)).find(".j_opt_btn_challenge .j_challenge_count"),e.participants||0)}},onTitleOptClick:function(){this.userPostPid?this.jumpToMyFloor():(this.doChallenge(),$.stats.track("\u6311\u6218-\u8D34\u5B50\u6807\u9898\u53F3\u4FA7","\u63A8\u5E7F\u5458\u7CFB\u7EDF","","click"))},updateTitleDisplay:function(){var t="\u6211\u8981\u6311\u6218";this.userPostPid&&(t="\u6211\u7684\u697C\u5C42"),this.$titleOpt.text(t)}}});_.Module.define({path:"comforum/widget/promoter_post_body",requires:["comforum/widget/promoterPostOpts"],sub:{TPL:['<div class="promoter_privilege_preview_box">','<div class="promoter_privilege_preview_video j_promoter_video"></div>',"</div>"].join(""),initial:function(e){this.args=e||{},this.requireInstance("comforum/widget/promoterPostOpts",[e]),this.promoterSource=this.args.promoterAttr.source,this.promoterVideo=this.args.promoterAttr.video,this.pn=this.args.pn,this.promoterVideo&&1==this.pn&&(0==this.promoterSource.type?this.preview():this.initVideo())},preview:function(){this.$previewBox=$(this.TPL);var e=$("#j_p_postlist");e.prepend(this.$previewBox),this.initPreview()},initPreview:function(){var e=this.$previewBox.find(".j_promoter_video");new $.swf("http://tb2.bdstatic.com/tb/static-comforum/widget/promoter_post_body/img/video_645ce54.swf",{id:"promoter_privilege_preview_video_swf",container:e,width:520,height:320,params:{allowFullScreen:!0,swLiveConnect:!0,wMode:"transparent",quality:"high",allowScriptAccess:"always",menu:!1}});var i=this;setTimeout(function(){i.removePreview()},6e3)},removePreview:function(){this.$previewBox.remove(),this.initVideo()},initVideo:function(){var e=this.promoterVideo.flash;e&&new $.swf(e,{id:"promoter_master_video_swf",container:$(".j_l_post:first").find(".j_master_video"),width:400,height:300,params:{allowFullScreen:!0,swLiveConnect:!0,wMode:"transparent",quality:"high",allowScriptAccess:"always",menu:!1}})}}});!function(t){function a(a){if(PageData.user.is_login){t.stats.sendRequest("fr=tb0_forum&st_mod=idisk&st_type=download");var e=t(a);return t.post("/data/filepost?method=update_file_statistic",{fs_id:e.data("fsId"),thread_id:PageData.thread.thread_id,forum_id:PageData.forum.forum_id,stat_kind:0,tbs:PageData.tbs}),!0}return TbCom.process("User","buildLoginFrame"),!1}function e(a){if(PageData.user.is_login){t.stats.sendRequest("fr=tb0_forum&st_mod=idisk&st_type=forward");var e={31061:"\u6587\u4EF6\u5DF2\u5B58\u5728",31112:"\u767E\u5EA6\u4E91\u7A7A\u95F4\u4E0D\u8DB3&nbsp;<a href='http://pan.baidu.com' target='_blank'>\u6574\u7406\u7F51\u76D8</a> "},d=t(a);t.post("/data/filepost",{method:"archiveFile",src_uk:d.data("uk"),src_path:d.data("filePath"),dst_path:"/"+d.data("fileName"),tbs:PageData.tbs},function(a){var i;return a.status&&"-3"==a.status?(t.dialog.alert("<div style='padding: 20px 30px; text-align: center;'>\u64CD\u4F5C\u5931\u8D25\u4E86\uFF0C\u5237\u65B0\u4E00\u4E0B\u8BD5\u8BD5</div>",{width:300}),void 0):(a.error_code?(i=e[a.error_code],i||(i="\u8F6C\u5B58\u5931\u8D25"),t.dialog.alert("<div style='padding: 20px 30px; text-align: center;'>"+i+"</div>",{width:300})):d.hide().after("<a class='file_link' target='_blank' href='http://pan.baidu.com'>\u5DF2\u8F6C\u5B58</a>"),void 0)},"json"),t.post("/data/filepost?method=update_file_statistic",{fs_id:d.data("fsId"),thread_id:PageData.thread.thread_id,forum_id:PageData.forum.forum_id,stat_kind:1,tbs:PageData.tbs})}else TbCom.process("User","buildLoginFrame");return!1}window.diskmanager={};var d=window.diskmanager;d.onClickDownload=a,d.onClickSaveToMine=e}(jQuery);_.Module.define({path:"puser/component/PropsApi",requires:["pcommon/component/JsPager"],sub:{initial:function(t){this.dataObj=t,this.initOptions(),this.bindEvents()},initOptions:function(){this.titleMap={"1070001_0":"\u4ED6\u4EEC\u5BF9\u6211\u4F7F\u7528\u4E86\u201C\u9B54\u62DC\u201D","1070001_1":"\u4ED6\u4EEC\u5BF9\u8D34\u4F7F\u7528\u4E86\u201C\u9B54\u62DC\u201D","1070002_0":"\u4ED6\u4EEC\u5BF9\u6211\u4F7F\u7528\u4E86\u201C\u9B54\u86CB\u201D","1070002_1":"\u4ED6\u4EEC\u5BF9\u8D34\u4F7F\u7528\u4E86\u201C\u9B54\u86CB\u201D"},this.urlMap={0:"/tbmall/getUserAppraise",1:"/tbmall/getPostAppraise"}},bindEvents:function(){var t=this,i=t.dataObj;$(".props_item_tail").live("click",function(){return t.propsData={props_id:$(this).data("propsid"),props_type:i.props_type},"0"==i.props_type&&(t.propsData.user_id=$(this).data("userid"),t.propsData.user_sex=$(this).data("usersex")),"1"==i.props_type&&(t.propsData.post_id=$(this).data("postid")),t.initPager=!0,t.showDialog(),!1})},getAttrsHtml:function(t){for(var i=null,s=[],a="",p=["user_id","user_sex","post_id","props_id"],e=0;e<p.length;e++)i=p[e],t[i]&&(a="data-"+i.replace(/_/,"")+'="'+t[i]+'"',s.push(a));return s.join(" ")},showUIHtml:function(t){for(var i=[],s=t.props||{},a=null,p=0,e=["1070001","1070002"],r=0;r<e.length;r++)t.props_id=e[r],a=s[e[r]],a&&(i.push('<li class="props_item_split"><span class="userinfo_split"></span></li>'),i.push('<li class="props_item props_item_'+e[r]+'">'),i.push('<a href="#" '+this.getAttrsHtml(t)+' class="props_item_tail">'),i.push('<span class="props_item_icon"></span>'),i.push('<span class="props_item_plus">'+String.fromCharCode(215)+"</span>"),i.push('<span class="props_item_num">'+a.num+"</span></li>"),i.push("</a>"),p++);return 0>p?"":i.join("")},showUI:function(t){var i=this.showUIHtml(t);i&&t.wrap.html(i)},showDialog:function(){this.initDialogData(),this.initDialogUI(),this.showOrUpdateList()},initDialogData:function(){var t=this.propsData,i=t.props_id+"_"+t.props_type,s=this.titleMap[i];if(t.user_id!==PageData.user.id){var a=t.user_sex;s=s.replace(/\u6211/,a)}this.dialogTitle=s,this.dataurl=this.urlMap[t.props_type],this.pn=0,this.pageSize=10,this.pageCount=8},initDialogUI:function(){var t=this;this.$wrap=$('<div class="props_userlist_wrap"></div>'),this.$userlist=$('<div class="props_userlist_main"></div>'),this.$wrap.append(this.$userlist),this.dialog=new $.dialog({title:t.dialogTitle,width:554,height:340,show:!1,html:this.$wrap})},showOrUpdateList:function(){var t=this,i=t.propsData,s={props_id:i.props_id,look_user_id:i.user_id||"",post_id:i.post_id||"",pn:t.pn,c:t.pageSize};$.tb.get(t.dataurl,s,function(i){i&&0==i.no?(t.list=i.data.list,t.updateList(),t.initPager&&i.data.total>1&&(t.initPager=!1,t.total=Math.ceil(i.data.total/t.pageSize),t.buildPager()),t.dialog.show()):t.showErrorDialog()})},showErrorDialog:function(){new $.dialog({title:"\u63D0\u793A",width:300,height:50,html:'<p style="text-align:center;font-size:14px;line-height:40px;">\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5</p>'})},buildPager:function(){var t=$('<div class="props_userlist_pager"></div>');this.$wrap.append(t);var i=this,s=this.use("pcommon/component/JsPager",{container:t,current:1,amount:i.pageCount,total:i.total});s.bind("pageChange",function(t,a){s.initial({current:a}),i.pn=a,i.showOrUpdateList()}),this.pager=s},updateList:function(){var t=this.list,i=[],s=null;i.push('<ul class="props_userlist">');for(var a=0;a<t.length;a++)s=t[a],i.push('<li class="userlist_item">'),i.push('<a class="userlist_head" href="/home/main?id='+s.portrait+'&fr=props" target="_blank"><img src="http://tb.himg.baidu.com/sys/portrait/item/'+s.portrait+'"/></a>'),i.push('<a class="userlist_name" href="/home/main?id='+s.portrait+'&fr=props" target="_blank">'+s.user_name+"</a>"),i.push('<p class="userlist_time">'+this.getShowtime(s.create_time)+"</p>"),i.push("</li>");i.push("</ul>"),this.$userlist.html(i.join(""))},getShowtime:function(t){t*=1e3;var i=new Date($.dateFormat(new Date(Env.server_time),"yyyy-MM-dd 00:00:00")).getTime();return t=t>i?$.dateFormat(new Date(t),"HH:mm"):$.dateFormat(new Date(t),"yyyy-MM-dd")}}});_.Module.define({path:"ppb/widget/sub_list/postTail",requires:["puser/component/PropsApi"],sub:{thread:{},power:{},initial:function(a){this.tailList=a.tailList,this.thread=PageData.thread,this.power=PageData.power,this.user=PageData.user,this.tailList=a.tailList,this.propsapi=this.use("puser/component/PropsApi",{props_type:"1"})},getPostTailTpl:function(a,t){var s='<div class="core_reply_tail '+(a.is_saveface?"save_card_reply_tail":"")+'">';return s+=1==a.post_no?'<ul class="p_reply"><li><a href="#" class="p_reply_first">\u56DE\u590D</a></li></ul>':["<div class=\"j_lzl_r p_reply\" data-field=\"{'pid':'"+a.post_id+"','total_num':'"+a.comment_num+"'}\">",'<a href="#" class="lzl_link_unfold" style="display:'+(a.comment_num>0?"none":"")+';">\u56DE\u590D',a.comment_num>0?"("+a.comment_num+")":"","</a>",'<span class="lzl_link_fold" style="display:'+(a.comment_num>0?"":"none")+'">\u6536\u8D77\u56DE\u590D</span>',"</div>"].join(""),s+='<ul class="p_tail">'+this.showFloorNumAndDate(a)+"</ul>",s+=['<ul class="p_mtail">',this.isTpoint(a.pb_tpoint)?this.getUninterest(a.pb_tpoint.template_id):this.getJubaoHtml(a,t,1),this.showTail(a),this.loadAdmin(a,t),"</ul>"].join(""),(this.power.can_op_as_4thmgr||this.power.can_op_as_operator)&&(s+='<ul class="p_print_flower"><li data-uid="'+t.user_id+'" data-pid="'+a.post_id+'" class="print_reward j_print_reward">\u5370\u82B1\u5956\u52B1 <span class="print_seperator">|</span></li></ul>'),s+='<ul class="p_props_tail props_appraise_wrap">',s+=this.propsapi.showUIHtml({props:a.props||{},post_id:a.post_id}),s+="</ul>",s+=this.showMallTail(a),s+="</div>"},showFloorNumAndDate:function(a){var t=a.post_no+"\u697C",s="";return s+="1"==this.thread.thread_type?'<li class="lzl_time">'+t+"</li>":"<li><span>"+t+"</span></li>",s+="<li><span>"+a.date+"</span></li>"},getJubaoHtml:function(a,t){var s="",i=this.thread,l=this.power,e=this.user;if(!(1==i.thread_type&&1==a.post_no||(l.can_mask_delete||l.lz_del)&&1!=a.post_no)){var p=l.can_vip_jubao?"vip\u4E3E\u62A5":"\u4E3E\u62A5";if(e.user_id!=t.user_id||a.is_anonym){var n="window.open('http://tieba.baidu.com/complaint/info?type={type}&cid=0&tid="+i.thread_id+"&pid="+a.post_id+"','newwindow', 'height=900, width=800, toolbar =no, menubar=no, scrollbars=yes, resizable=yes, location=no, status=no');return false;";s='<li class="j_jb_ele"><a href="#" onclick="'+n.replace("{type}",0)+'" class="complaint complaint-opened" data-checkun="un">'+p+'</a>&nbsp;|<span class="super_jubao"><a href="#" onclick="'+n.replace("{type}",1)+'">\u4E2A\u4EBA\u4F01\u4E1A\u4E3E\u62A5</a><a href="#" onclick="'+n.replace("{type}",2)+'">\u5783\u573E\u4FE1\u606F\u4E3E\u62A5</a></span></li>'}else{var _="{'delete_mine':'1','index':'2','user_name':'"+t.user_name+"'}";p="\u5220\u9664",s='<li class="j_jb_ele"><a href="#" data-field='+_+' class="jb_in p_post_del_my post_del_href" data-checkun="un">'+p+"</a>&nbsp;|</li>"}}return s},getUninterest:function(a){var t="{'template_id': "+a+"}",s='<li><span class="j-pb-tpoint" data-field="'+t+'" style="cursor: pointer">\u4E0D\u611F\u5174\u8DA3\u5E76\u9690\u85CF</span>&nbsp;|</li>';return s},showTail:function(a){var t=a.open_id,s=a.open_type,i=this.tailList,l={1:"1",4:"1",5:"1",6:"1",youliao:"1"};"wap"!==t||l.openType||"sharexc"==s||"webipad"==s||(s="phone");var e=t+"_"+s,p=i[e]?i[e]:[],n=p[0],_=p[1],o=p[2],r="";return n&&(r="xiangce"===s?'<li><span class="p_tail_txt">\u901A\u8FC7</span><a class="p_tail_wap" data-tip="'+o+'" href="'+_+'" target="_blank">'+n+'</a><span class="p_tail_txt">\u4E0A\u4F20</span></li>':"shenqi"===s?'<li><span class="p_tail_txt">\u901A\u8FC7</span><a class="p_tail_wap" data-tip="'+o+'" href="'+_+'" target="_blank">'+n+'</a><span class="p_tail_txt">\u4E0A\u4F20</span></li>':_&&o?'<li><span class="p_tail_txt">\u6765\u81EA</span><span class="tip_bubble_con"></span><a data-tip="'+o+'" class="p_tail_wap" href="'+_+'" target="_blank">'+n+"</a></li>":_?'<li><span class="p_tail_txt">\u6765\u81EA</span><a class="p_tail_wap" data-tip="'+o+'" href="'+_+'" target="_blank">'+n+"</a></li>":o?'<li><span class="p_tail_txt"></span><span class="tip_bubble_con"></span><a data-tip="'+o+'" class="p_tail_font"  >\u672C\u697C\u542B\u6709'+n+"</a></li>":'<li><span class="p_tail_txt">\u6765\u81EA</span>'+n+"</li>"),r},loadAdmin:function(a,t){var s=this.power,i=this.user,l="",e="&nbsp;|",s=this.power,i=this.user;return(s.can_type2_audit_post||s.lz_del)&&this.isTpoint(a.pb_tpoint)?"":(a.is_anonym?s.can_filter_ip&&(l+='<li><a class="p_post_ban_anonym" href="#">\u5C01</a>'+e+"</li>"):s.can_filter_id&&(l+='<li><a class="p_post_ban" href="#">\u5C01</a>'+e+"</li>"),1!=a.post_no&&(s.can_mask_delete||s.lz_del&&!i.forbidden.isForbid&&!i.is_black)&&(l+='<li><a class="p_post_del" href="#">\u5220\u9664</a>'+e+"</li>"),s.can_super&&!a.is_anonym&&(l+='<li><a class="p_tieba_manage" href="/f?ct=503316480&cm=6000&tn=bdUserManager&un='+encodeURIComponent(t.user_name)+'" target="_blank">\u8D34\u5427\u7BA1\u7406</a>&nbsp;|</li>'),l)},showMallTail:function(a){var t="",s={1019001:"1",1019002:"1",1019003:"1",1049001:"1",1049002:"1",1049003:"1"};return(a.is_bub||a.ptype&&7==a.ptype.length&&!s[a.ptype])&&(t='<a href="/tbmall/home" class="p_mall_tail" target="_blank"></a>'),t},isTpoint:function(a){return a&&1===a.is_tpoint}}});
;_.Module.define({path:"ppb/widget/postList/Lzl",requires:["ppb/widget/Admin","puser/widget/Icons"],sub:{editor_entry:null,_reach_limit:!1,_new_reply_num:0,initial:function(t){Page.checkLoadedModules("lzlHasLoad")||(this.postJdom=t,this.wapperDOM=$("#j_p_postlist"),this.icons=this.use("puser/widget/Icons"),this._admin=this.use("ppb/widget/Admin"),this._init())},_init:function(){this._showJubao(),this._bindEditorEntry(),this._bindFoldClick(),this._bindClick()},_showLzlJubao:function(t){if(!PageData.power.can_mask_delete&&!PageData.power.lz_del){var e,e=(PageData.power.can_vip_jubao?"vip\u4E3E\u62A5":"\u4E3E\u62A5",t.find("li.j_lzl_s_p"));e.each(function(){var t=$(this).find("a").filter(function(){return $(this).tbattr("username")}).tbattr("username"),e="";if(PageData.user.user_name==t)var i="\u5220\u9664",e="{'delete_mine': 1, 'user_name' : '"+t+"'}",l='<a href="#" class="lzl_jb_in" data-field="'+e+'">'+i+"</a>&nbsp;|&nbsp;";else{var o=$(this).data("field");if(o)var i=PageData.power.can_vip_jubao?"vip\u4E3E\u62A5":"\u4E3E\u62A5",a="",l='<a href="#" class="lzl_jb_in" onclick="'+a.replace("{type}",0)+'">'+i+"</a>&nbsp;|&nbsp;";else l=""}$(this).find(".lzl_jb").html(l)})}},_bindFoldClick:function(){var t=this;this.wapperDOM.delegate(".lzl_link_unfold","click",function(e){var i=e.srcElement||e.target;return PageData.user.is_login?(t._loadLzlContent($(i)),t._unfoldLzl($(i))):TbCom.process("User","buildLoginFrame",null,null,null,"lzl_reply"),!1}).delegate(".lzl_link_fold","click",function(e){var i=e.srcElement||e.target;t._foldLzl($(i))})},_loadLzlContent:function(t){var e=t.parents(".l_post");LzlEditor.cur_optdom.postJdom=e;e.find(".j_lazy_lzl");LzlEditor.cur_optdom.jdom=e.find(".j_lzl_wrapper"),LzlEditor.cur_optdom.mainDom=LzlEditor.cur_optdom.jdom.find("div.j_lzl_container"),LzlEditor.cur_optdom.tailDom=LzlEditor.cur_optdom.jdom.find("div.j_lzl_r"),LzlEditor.cur_optdom.mainData=LzlEditor.cur_optdom.mainDom.getData(),LzlEditor.cur_optdom.tailData=LzlEditor.cur_optdom.tailDom.getData(),AntiAnswerLzl=new CaptchaReqCom({forumName:PageData.forum.name_url,forumId:PageData.forum.forum_id,tid:PageData.thread.thread_id,postType:"reply"})},_updateReplyNum:function(t){var e=0;if(t)e=t;else{this._new_reply_num++;var e=1*this.tailData.total_num+this._new_reply_num}this.tailDom.find("a.lzl_link_unfold").html("\u56DE\u590D("+e+")")},_foldLzl:function(t){var e=t.parents(".l_post").find(".j_lzl_container");if(LzlEditor.cur_sec){var i=LzlEditor.cur_sec;i.find("span.close").click(),LzlEditor._s_p._ie6RelativeHack()}e.slideUp("normal",function(){t.hide(),t.parent().find("a.lzl_link_unfold").show(),$(document).trigger("sub_list_reply_toggled")})},_unfoldLzl:function(t){var e=this;if(e.target=t,t.hide(),t.parent().find("span.lzl_link_fold").show(),LzlEditor._lzl&&LzlEditor._lzl.mainData.pid==LzlEditor.cur_optdom.mainData.pid){var i="";LzlEditor._s_p._se&&(i=LzlEditor._s_p._se.getContent()),LzlEditor._lzl=null,LzlEditor._hide(),LzlEditor.cur_sec.empty(),LzlEditor.init(e),LzlEditor._s_p._se&&LzlEditor._s_p._se.ready(function(){LzlEditor._s_p._se.execCommand("inserthtml",i)}),LzlEditor._s_p._ie6RelativeHack(),CaptchaLzl&&!CaptchaLzl.needUpdate&&CaptchaLzl.reload(),LzlEditor.cur_sec.parent().show(),e.mainDom.slideDown("normal",function(){LzlEditor._s_p._ie6RelativeRecover(),$(document).trigger("sub_list_reply_toggled")})}else LzlEditor.init(e),LzlEditor._s_p._ie6RelativeHack(),LzlEditor.cur_sec.parent().show(),e.mainDom.slideDown("normal",function(){LzlEditor._s_p._ie6RelativeRecover(),$(document).trigger("sub_list_reply_toggled")});$.stats.sendRequest("fr=tb0_forum&st_type=lzl_unfold")},_showJubao:function(){this.wapperDOM.delegate(".j_lzl_s_p","mouseover",function(){$(this).find(".lzl_jb").show()}).delegate(".j_lzl_s_p","mouseout",function(){$(this).find(".lzl_jb").hide()})},asyncImage:function(t,e){var i=t.find("img."+e);return 0==i.length?!1:($.each(i,function(t,e){e.src=e.getAttribute("data-passive")||e.getAttribute("src")}),void 0)},_bindClick:function(){var t=this;this.wapperDOM.delegate(".j_lzl_m","click",function(){if(PageData.user.is_login){var e=$(this).parents(".j_lzl_m_w");return t.asyncImage($("#"+$(this).tbattr("lzlid")),"forasync"),e.find(".lzl_post_hidden").slideDown("normal",function(){$(document).trigger("sub_list_reply_toggled")}),e.find(".j_pager").show(),e.find(".lzl_more").hide(),$.stats.sendRequest("fr=tb0_forum&st_type=lzl_more"),!1}return _.Module.use("pcommon/component/force_login",["","userbar","dialog","pb_lzl_more"]),!1}).delegate(".lzl_s_r","click",function(e){var i=e.target||e.srcElement;return PageData.user.is_login?(t._loadLzlContent($(i)),t._fastReply($(i))):TbCom.process("User","buildLoginFrame",null,null,null,"lzl_interact"),!1}).delegate(".j_pager","click",function(e){if("A"==e.target.tagName){window.global&&"function"==typeof window.global.shieldPost&&window.global.shieldPost();var i=$(e.target),l=$.tb.unescapeHTML(i.tbattr("index"));if(!l){var o=$.tb.unescapeHTML(i.tbattr("href")).split("#");l=parseInt(o[1])}return t.mainDom=i.parents(".j_lzl_container"),t.mainData=t.mainDom.getData(),t.postJdom=i.parents(".l_post"),t._turnPage(t,l,i.parents(".core_reply_content")),!1}})},_bindEditorEntry:function(){var t=this;t.wapperDOM.delegate(".j_lzl_p","click",function(){return t.editor_entry=$(this),PageData.user.is_login?(LzlEditor._lzl&&LzlEditor._lzl.mainData.pid==LzlEditor.cur_optdom.mainData.pid&&"none"!=LzlEditor.cur_sec.css("display")?LzlEditor._s_p._getHtml()?LzlEditor._s_p._se.setContent(""):LzlEditor._hide():(t._loadLzlContent($(this)),LzlEditor.init(t)),!1):(TbCom.process("User","buildLoginFrame",null,null,null,"too_reply"),!1)})},_fastReply:function(t){var e=t.parents(".j_lzl_s_p"),i=e.getData(),l="\u56DE\u590D&nbsp;"+i.user_name+"&nbsp;:";LzlEditor._lzl&&LzlEditor._lzl.mainData.pid==LzlEditor.cur_optdom.mainData.pid?LzlEditor._s_p._se&&(LzlEditor._s_p._se.$body.html(""),LzlEditor._show(),LzlEditor._s_p._se.execCommand("inserthtml",l)):(LzlEditor.init(this),LzlEditor._s_p._se&&LzlEditor._s_p._se.execCommand("inserthtml",l)),LzlEditor._s_p._setData(i)},_turnPage:function(t,e,i){var l=new Date;l=l.getTime(),$.ajax({url:"/p/comment",data:{tid:PageData.thread.thread_id,pid:t.mainData.pid,pn:e,t:l},dataType:"html",success:function(e){t._ajaxSucc(e,i),$.tb.location.setHash("noExistHash"),$.tb.location.setHash(t.mainData.pid+"l")},error:function(e){t._ajaxErr(e)}})},_ajaxSucc:function(t,e){var i=this;if(t&&t.length>200){var l=$(t);l.find(".voice_player .time").each(function(){$(window).trigger("initvoicelength",this)}),l.find(".voice_player_desc").remove(),this.mainDom.find("ul.j_lzl_m_w").html(l),i._showLzlJubao(e),this._admin.loadLzlAdmin(e),l.find(".lzl_cnt").each(function(){var t=$(this),e=t.getData().iconArr,l=t.getData().free_flag,o=e?i.icons.getPreIconHtml(e,l):"";t.prepend(o)}),$.browser.msie&&$.browser.version<=7&&this.postJdom.tbattr("class",$.tb.unescapeHTML(this.postJdom.tbattr("class")))}else{var o='<div style="margin: 0px 30px 0px 30px;font-size:14px;line-height:20px;text-align:left;font-family: &quot;\u5B8B\u4F53&quot;;"><table style="width:90%"><tbody><tr><td width="60"><img style="border:none;" src="http://tb2.bdstatic.com/tb/img/errorFace.gif"></td><td valign="middle" style="font-size:20px;line-height:22px;font-family: &quot;\u9ED1\u4F53&quot;;">\u670D\u52A1\u5668\u5F88\u5FD9</td></tr></tbody></table>\u8BF7\u5237\u65B0\u9875\u9762\uFF0C\u7A0D\u540E\u518D\u8BD5</div>',a=$.dialog.alert(o,{width:410,height:95,title:"\u9519\u8BEF\u63D0\u793A"});a.bind("onclose",function(){return!0})}},_ajaxErr:function(){var t='<div style="margin: 0px 30px 0px 30px;font-size:14px;line-height:20px;text-align:left;font-family: &quot;\u5B8B\u4F53&quot;;"><table style="width:90%"><tbody><tr><td width="60"><img style="border:none;" src="http://tb2.bdstatic.com/tb/img/errorFace.gif"></td><td valign="middle" style="font-size:20px;line-height:22px;font-family: &quot;\u9ED1\u4F53&quot;;">\u670D\u52A1\u5668\u5F88\u5FD9</td></tr></tbody></table>\u8BF7\u5237\u65B0\u9875\u9762\uFF0C\u7A0D\u540E\u518D\u8BD5</div>',e=$.dialog.alert(t,{width:410,height:95,title:"\u9519\u8BEF\u63D0\u793A"});e.bind("onclose",function(){return!0})}}});
;var LzlEditor={_lzl:null,default_options:{autoFocus:!0,autoEnable:!0,height:"40px",width:"527px",maxHeight:"40",wrapperClassName:"lzl_simple_wrapper",enableRefer:!0},options:{},cur_sec:null,cur_optdom:{},_s_p:null,init:function(i,l){LzlEditor.options={},$.extend(LzlEditor.options,LzlEditor.default_options),l&&$.extend(LzlEditor.options,l),LzlEditor._buildEditor(i)},_buildEditor:function(i){if(LzlEditor._lzl){if(LzlEditor._lzl.mainData.pid==LzlEditor.cur_optdom.mainData.pid)return LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").length>0&&1==$.tb.Storage.get("VoicePostorAdClosed")&&LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").remove(),LzlEditor.cur_sec.show(),LzlEditor._s_p._se&&LzlEditor._s_p._se.focus(),!1;var l=LzlEditor.cur_sec;l.find("span.close").click();var t=l.find(".tb-editor-editarea");t[0]&&t.html().length>0&&l.bindData({txt:t.html()}),LzlEditor._hide(),LzlEditor.cur_sec.empty(),LzlEditor._s_p=null;var o=LzlEditor._lzl.mainDom.find("li.j_lzl_s_p");0==o.length&&(LzlEditor._lzl.tailDom.find(".lzl_link_fold").hide(),LzlEditor._lzl.tailDom.find(".lzl_link_unfold").show(),LzlEditor._lzl.mainDom.hide())}LzlEditor._lzl=i,$.extend(LzlEditor._lzl,LzlEditor.cur_optdom);var l=i.jdom.find("div.j_lzl_e_c"),e=PageData.thread.topic;LzlEditor.cur_sec=l;var r=$.extend({container:l[0],uid:PageData.user.user_id},LzlEditor.options);LzlEditor._lzl._reach_limit=LzlEditor._limitCheck()||LzlEditor._lzl._reach_limit?!0:!1;var d={_can_post:PageData.power.can_post,_forum_type:PageData.forum_type,_no_un:PageData.user.no_un,_is_block:PageData.user.forbidden.isForbid?!0:!1,_reach_limit:LzlEditor._lzl._reach_limit,_login:PageData.user.is_login,_thread_topic_type:e.is_topic?"1":"0",_thread_topic_subtype:e.is_topic&&"2"==e.topic_type?"3":"0",data:LzlEditor._lzl.mainData,tpl_id:"j_simpleeditor_tpl"};_.Module.use("pcommon/widget/SimplePoster",{op:d,edOp:r},function(i){i.bind("toTop",function(){$(window).scrollTop(0)},!0),i.bind("onsuccess",function(){LzlPostor._appendNew()},!0),i.bind("onclose",function(){LzlEditor._lzl._updateReplyNum(2e4),LzlEditor._lzl._reach_limit=!0,LzlEditor.init(LzlEditor._lzl)},!0),i.bind("hide",function(){LzlEditor._hide()},!0),LzlEditor._s_p=i});var n=l.getData();if(null!=n){var t=l.find(".tb-editor-editarea");t.html(n.txt)}LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").length>0&&1==$.tb.Storage.get("VoicePostorAdClosed")&&LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").remove(),l.show(),l.parent().find("input.j_lzl_e_f_h").show().focus().hide()},_limitCheck:function(){var i=!1,l=LzlEditor._lzl.jdom.find("li.j_lzl_l_p");if(0==l.length)return i;var t=l.getData();return t.total_num>=2e4&&(i=!0),i},_hide:function(){LzlEditor.cur_sec&&(LzlEditor.cur_sec.find("span.close").click(),LzlEditor.cur_sec.hide()),LzlEditor._lzl&&LzlEditor._lzl.editor_entry&&LzlEditor._lzl.editor_entry.show()},_show:function(){LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").length>0&&1==$.tb.Storage.get("VoicePostorAdClosed")&&LzlEditor.cur_sec.find(".j_lzl_p_sv .new_icon").remove(),LzlEditor.cur_sec&&LzlEditor.cur_sec.show()}};
;var LzlPostor={_appendNew:function(){var e=LzlEditor._lzl.jdom.find("ul.j_lzl_m_w");if(0==e.length){var a=LzlEditor._lzl.jdom.find("div.j_lzl_c_b_a");a.prepend($('<div class="lzl_big_splitline"></div>')),e=$('<ul class="j_lzl_m_w"></ul>'),a.prepend(e)}e.show();var t=$('<li class="lzl_single_post j_lzl_s_p"></li>');t.bindData({user_name:PageData.user.user_name});var l=$.tb.dataField({un:PageData.user.user_name}),s=' username="'+PageData.user.user_name+'"'+l,i="/home/main/?un="+encodeURIComponent(PageData.user.user_name)+"&fr=pb&ie=utf-8",r="";r+='<div class="lzl_p_p">',r+='  <a class="j_user_card" href="'+i+'" '+s+'><img src="http://tb.himg.baidu.com/sys/portrait/item/'+PageData.user.portrait+'" style="visibility:hidden;" onload="Page.resizePic(this, 32, 32, true);"/></a>',r+="</div>",r+='<div class="lzl_cnt">',_.Module.use("puser/widget/Icons",null,function(e){r+=e.getPreIconHtml(window.PageData.user.mParr_props,window.PageData.user)}),r+='  <a class="at j_user_card" href="'+i+'" '+s+">"+(PageData.user.profession_manager_nick_name||("1"==PageData.user.is_verify?PageData.user.user_nickname:PageData.user.user_name))+"</a>",r+="1"==PageData.user.is_verify?'<img style="vertical-align: middle;margin-top: -3px;" src="http://tb2.bdstatic.com/tb/img/itieba_vip.gif" title="\u8D34\u5427\u5B98\u65B9\u8BA4\u8BC1" width="11" height="18" class="verified_icon">':"",r+='   :<span class="lzl_content_main">',r+=LzlEditor._s_p._getHtml(),r+="    </span>",r+='  <div class="lzl_content_reply">',r+='    <span class="lzl_time">'+LzlPostor.getCurrentTime()+"</span>",r+='    <a href="#" class="lzl_s_r">\u56DE\u590D</a>',r+="  </div>",r+="</div>",t.html(r),t.insertBefore(e.find("li.j_lzl_l_p")),LzlEditor._lzl._updateReplyNum()},getCurrentTime:function(){function e(e){return 10>1*e?"0"+e:e}var a=new Date,t="";return t+=a.getFullYear()+"-",t+=a.getMonth()+1+"-",t+=a.getDate()+"&nbsp;",t+=e(a.getHours())+":",t+=e(a.getMinutes())}},AntiAnswerLzl,CaptchaLzl;
;_.Module.define({path:"ppb/widget/sub_list/subListTotal",requires:["puser/widget/pbUserBase","puser/widget/Icons","ppb/widget/sub_list/postTail","pcommon/component/JsPager"],sub:{initial:function(e){this._isAdThread=e.isAdThread,this._searchCid=e.searchCid,this._searchPid=e.searchPid,this._userList=e.userList,this._tailList=e.tailList,this._commentList=e.commentList,this._icons=this.use("puser/widget/Icons"),this._user=this.use("puser/widget/pbUserBase"),this._postTail=this.use("ppb/widget/sub_list/postTail",{tailList:e.tailList})},showLzlPost:function(e){var t=this,e=$(e),s=e.closest(".l_post").getData();e.html(t._getAnchor(s.content)+t._postTail.getPostTailTpl(s.content,s.author)+t._getSubContent(s.content)),e.removeAttr("style").find(".voice_player .time").each(function(){$(window).trigger("initvoicelength",this)})},_getAnchor:function(){var e="";return this._isAdThread&&(e+='<a href="http://yingxiao.baidu.com/zhuanti/103.html?id=13" class="d_tuiguang" target="_blank"></a>'),e},_getSubContent:function(e){var t=e.comment_num>0?"":"none";e.page={total_page:Math.floor((e.comment_num-1)/10)+1,cur_page:1};var s=["<div class=\"j_lzl_container core_reply_wrapper\" data-field=\"{'pid':'"+e.post_id+"','floor_num':'"+e.post_no+'\'}" style="display:'+t+'">','<div class="core_reply_border_top"></div>','<div class="j_lzl_c_b_a core_reply_content">','<ul class="j_lzl_m_w" style="display:'+t+'">',this._getSubPostList(e),"</ul>",'<div class="lzl_editor_container j_lzl_e_c lzl_editor_container_s" style="display:none;"></div>','<input type="text" class="j_lzl_e_f_h" style="display:none;" />',"</div>",'<div class="core_reply_border_bottom"></div>',"</div>"].join("");return s},_getSubPostList:function(e){for(var t,s,i="",a=this._commentList[e.post_id],l="",n="",_=0;_<a.length;_++)t=a[_],s=this._userList[t.user_id]||{},5==_&&(n="lzl_hidden_"+e.post_index,l+='<ul class="lzl_post_hidden" id="'+n+'">',i=!0),s.nickname=s.is_verify||s.is_official?s.nickname:s.user_name,l+=['<li class="lzl_single_post j_lzl_s_p '+(0==_?"first_no_border":"")+"\" data-field=\"{'pid':'"+e.post_id+"','spid':'"+t.comment_id+"','user_name':'"+s.user_name+"','portrait':'"+s.portrait+"'}\" >",this._user.face_link(s),'<div class="lzl_cnt">',this._icons.getPreIconHtml(s.mParr_props,s),this._user.name_link(s),"1"==s.is_verify||"1"==s.is_official?'<img style="vertical-align: middle;margin-top: -3px;" src="http://tb2.bdstatic.com/tb/img/itieba_vip.gif" title="\u8D34\u5427\u5B9E\u540D\u8BA4\u8BC1" width="11" height="18" class="verified_icon" />':"",':&nbsp;<span class="lzl_content_main">',this._searchCid==t.comment_id?"<b>"+t.content+"</b>":t.content,this._getVoiceHtml(t),"</span>",this._getReplyHtml(t,s),"</div>","</li>"].join("");return l+=i?"</ul>":"",l+=this._getLzlPager(e,n),delete this._commentList[e.post_id],l},_getLzlPager:function(e,t){var s='<li class="lzl_li_pager j_lzl_l_p lzl_li_pager_s" data-field="{total_num:'+e.comment_num+",total_page:"+e.page.total_page+'}" >';return s+='<a class="j_lzl_p btn-sub btn-small pull-right" href="##"><i class="icon-reply"></i>\u6211\u4E5F\u8BF4\u4E00\u53E5</a>',e.comment_num>5?(s+='<p class="lzl_more">',s+="<span>\u8FD8\u6709"+(e.comment_num-5)+"\u6761\u56DE\u590D\uFF0C</span>",s+='<a href="#" class="j_lzl_m" lzlid="'+(t?t:"")+'">\u70B9\u51FB\u67E5\u770B</a>',s+="</p>",s+='<p class="j_pager l_pager pager_theme_2 lzl_pager" style="display:none">',e.comment_num>10?(this._pager=this.use("pcommon/component/JsPager",{current:1,total:e.page.total_page,mode:1,url:"#",isHtml:!0,classname:{current:"tP"}}),s+=this._pager._render()):s+="&nbsp",s+="</p>"):s+="<p>&nbsp;</p>",s+="</li>"},_getForbiddenTip:function(e){var t="";return e.exist_forbidden_tip&&(t='<p class="lzl_thread_forbidden_tip j_lzl_thread_forbidden_tip" >\u672C\u697C\u5305\u542B\u90E8\u5206\u5E7F\u544A\u7B49\u8FDD\u89C4\u5185\u5BB9\u7684\u56DE\u590D\uFF0C\u5DF2\u7ECF\u88AB\u5C4F\u853D\uFF0C\u6682\u4E0D\u53EF\u89C1\u3002<span class="lzl_forbidden_tip_close j_lzl_forbidden_tip_close">x</span></p>'),t},_getVoiceHtml:function(e){var t,s,i="";return 1===+e.ptype&&(t=e.during_time?Math.floor(e.during_time/60):"0",s=e.during_time?e.during_time%60:"0",i=['<br/><div class="voice_player voice_player_mini voice_player_lzl">','<a href="#" class="voice_player_inner">','<span class="before">&nbsp;</span><span class="middle"><span class="speaker speaker_animate">&nbsp;</span>','<span class="time">',t>0?'<span class="minute">'+t+"</span>&#039;":"",s>0||t>0?'<span class="second">'+s+"</span>&quot;":"","</span>","</span>",'<span class="after">&nbsp;</span>',"</a>","</div>"].join("")),i},_getReplyHtml:function(e,t){var s="",i=PageData.power,a=PageData.user;return s+='<div class="lzl_content_reply"><span class="lzl_jb"  style="display:none">',i.can_mask_delete||i.lz_del||(s+=t.user_name==a.user_name?"<a href=\"#\" data-field=\"{'delete_mine':'1','user_name':'"+t.user_name+'\'}" class="lzl_jb_in" >\u5220\u9664</a>&nbsp;|':"<a href=\"#\" data-field=\"{'delete_mine':'0','user_name':'"+t.user_name+'\'}" class="lzl_jb_in" >'+(i.can_vip_jubao?"vip\u4E3E\u62A5":"\u4E3E\u62A5")+"</a>&nbsp;|&nbsp;"),s+='</span><span class="lzl_op_list j_lzl_o_l">',s+=this._loadLzlAdmin(t,i,a),s+='</span><span class="lzl_time">'+this._getTime(e.now_time)+'</span><a href="#" class="lzl_s_r">\u56DE\u590D</a>',s+="</div>"},_loadLzlAdmin:function(e,t,s){var i="",a="&nbsp;|&nbsp;";return(t.can_filter_ip||t.can_filter_id)&&(i+='<a href="#" class="j_lzl_ban">\u5C01</a>'+a),(t.can_mask_delete||t.lz_del&&!s.forbidden.isForbid&&!s.is_black)&&(i+='<a href="#" class="j_lzl_del">\u5220\u9664</a>'+a),t.can_super&&(i+='<a href="/f?ct=503316480&cm=6000&tn=bdUserManager&un="'+e.user_name+' class="j_lzl_manage p_tieba_manage" target="_blank">\u8D34\u5427\u7BA1\u7406</a>'+a),i},_getTime:function(e){function t(e){return 10>1*e?"0"+e:e}var s;s=void 0==e?new Date:new Date(1e3*e);var i="";return i+=s.getFullYear()+"-",i+=s.getMonth()+1+"-",i+=s.getDate()+"&nbsp;",i+=t(s.getHours())+":",i+=t(s.getMinutes())}}});_.Module.define({path:"common/widget/Card",requires:[],sub:{_option:{},_j_card:null,_open_timer:null,_close_timer:null,_is_show:!1,_is_first_show:!0,_default_option:{content:"",arrow_dir:"down",arrow_pos:{},card_css:{width:170,"z-index":1001},arrow_req:!0,auto_positon:!1,event_target:null,offset:{x:0,y:0},card_leave_display:!1,card_hover_show:!0,card_leave_hide:!1,attr:"",clazz:"",wrap:$("body")},initial:function(t){var i=this;i._option=$.extend(!0,{},i._default_option,t),this._buildCard()},_buildCard:function(){var t=this._option,i=this._genericTpl(),e=t.wrap;this._j_card=$(i),this._j_card.find(".j_content").html(t.content),e.append(this._j_card),delete t.card_css.height,this._j_card.css(t.card_css),t.card_css.height=this._j_card.find(".j_content").outerHeight(!0),this._arrow=this._j_card.find(".j_ui_white_arrow"),void 0===t.arrow_pos.left&&(this._arrow_left=t.card_css.width/2-10,this._arrow.css({left:this._arrow_left})),this._arrow.css(t.arrow_pos),t.arrow_req||this._j_card.find(".j_ui_white_arrow").hide(),t.auto_positon&&this._autoPosition()},_autoPosition:function(){var t=this._option,i={},e=$(window).height(),_=$(window).width(),o=($(document).scrollLeft(),$(document).scrollTop()),r=(t.event_target.innerWidth(),t.event_target.innerHeight()),s="",a={x:t.event_target.offset().left-t.card_css.width/2+t.event_target.outerWidth(!0)/2,y:t.event_target.offset().top-t.card_css.height-10,width:this._j_card.innerWidth(),height:this._j_card.innerHeight()+this._arrow.innerHeight()};i.left=a.x,i.top=a.y;var n=t.arrow_pos.left||this._arrow_left,d=15,h=_;_<$(document).width()&&(h=$(document).width());var c=h-(t.card_css.width+d);i.left<d?(n+=i.left-d,i.left=d):i.left>c&&(n+=i.left-c,i.left=c),i.top<o?(s="up",i.top+=r+(a.height||0),i.top-=t.offset.y):(i.top+=i.top+r>o+e?-r-(a.height||0):0,s="down",i.top+=t.offset.y),this._arrow.removeClass("ui_white_down").removeClass("ui_white_up").addClass("ui_white_"+s).css({left:n}),this._j_card.css(i)},_genericTpl:function(){var t=this._option.attr,i=this._option.arrow_dir,e=this._option.clazz,_=['<div class="ui_card_wrap '+e+'" '+t+' style="visibility: hidden">','<div class="j_content ui_card_content ">',"</div>",'<span class="j_ui_white_arrow arrow ui_white_'+i+'"></span>',"</div>"].join("");return _},showCard:function(t){var i=this;i._close_timer&&clearTimeout(i._close_timer),t&&"delayShow"==t.type?(i._open_timer&&clearTimeout(i._open_timer),i._open_timer=setTimeout(function(){i._showCardDo()},t.time)):i._showCardDo()},closeCard:function(t){var i=this;i._open_timer&&clearTimeout(i._open_timer),t&&"delayClose"==t.type?i._close_timer=setTimeout(function(){i._closeCardDo()},t.time):i._closeCardDo()},hideCard:function(t){var i=this;i._open_timer&&clearTimeout(i._open_timer),t&&"delayHide"==t.type?i._close_timer=setTimeout(function(){i._hideCardDo()},t.time):i._hideCardDo()},_showCardDo:function(){var t=this;t._is_first_show&&(this._j_card.bind("mouseenter",function(){t._option.card_hover_show&&(t._is_show=!0)}),this._j_card.bind("mouseleave",function(){return t._option.card_leave_display?!1:(t._is_show=!1,t._option.card_leave_hide?t.hideCard():t.closeCard(),void 0)}),t._is_first_show=!1),this._j_card.css({visibility:"visible"})},_closeCardDo:function(){var t=this;this._j_card&&!this._is_show&&t._j_card.remove()},_hideCardDo:function(){var t=this;this._j_card&&!this._is_show&&t._j_card.css({visibility:"hidden"})},setContent:function(t){var i=this._option;if(null!==this._j_card){var e=this._j_card.find(".j_content");e.html(t),i.card_css.height=e.outerHeight(!0),this._j_card.css({height:i.card_css.height}),i.auto_positon&&this._autoPosition()}}}});_.Module.define({path:"puser/widget/icon_tip",requires:["common/widget/Card"],sub:{_icon_tip:null,_icon_tip_ajax:null,_dialog:null,_iconData:{},_option:{width:300},initial:function(t){this.pageType=t.pageType,this.myIcons=t.myIcons,this.bindEvents()},bindEvents:function(){var t=this,i=$("body");i.find(".j_icon_slot").on("mouseenter",function(){t._icon_tip&&t._icon_tip.closeCard(),t.buildCard($(this))}).on("mouseleave",function(){t._icon_tip&&t._icon_tip.closeCard({type:"delayClose",time:200}),t._icon_tip=null}),i.on("click",".j_buy_icon_btn",function(i){i.preventDefault(),t.getOneIcon(t._iconData)}).on("click",".j_manage_icon_btn",function(){})},buildCard:function(t){var i=this;i._icon_tip&&(i._icon_tip.closeCard(),i._icon_tip=null);var n=t.getData();this._iconData=n;var a,e,o,r,l,c,_=_||1,s=50,p="http://tb1.bdstatic.com/tb/cms/com/icon/";if(n.sprite){if(a=n.sprite[n.value],!a)for(var u in n.sprite)if(n.sprite[u]&&(0!=n.value||"meizhi_level"==n.name)){a=n.sprite[u];break}e=a.split(","),o=e[0],r=e[1],c=p+n.category_id+"_36.png?stamp="+o,l='style="background: url('+c+") no-repeat -"+r*s+"px  -"+(_-1)*s+'px;"'}else l=t.css("background");var d=this.getIconTipHtml(n);if(!d)return!1;null==n.title&&(n.title=t.tbattr("title"));var b=['<div class="icon_tip_wrapper">','<div class="icon_tip_img" '+l+" />",'<div class="icon_tip_info">','<div class="icon_tip_title">'+n.title+(d.expired?d.expired:"")+"</div>",'<div class="icon_tip_intro">'+d.intro+"</div>",'<div class="icon_tip_btns">',d.btn,"</div>","</div>","</div>"].join(""),f={content:b,card_css:{width:i._option.width,zIndex:$.getcurzIndex()},auto_positon:!0,event_target:t,attr:"id='icon_tip'",wrap:$("body")};i._icon_tip=i.requireInstance("common/widget/Card",f),i._icon_tip.showCard({type:"delayShow",time:200})},getOneIcon:function(t){var i=this,n=t.name;if(n){var a=$.dialog.confirm("\u786E\u5B9A\u8D2D\u4E70\u3010"+t.title+"\u3011\u5370\u8BB0\u561B\uFF1F\u5C06\u6D88\u8017\u60A8"+t.price+"T\u8C46",{title:"\u8D2D\u4E70\u5370\u8BB0\u63D0\u793A",acceptValue:"\u786E\u5B9A",cancelValue:"\u53D6\u6D88"});a.bind("onaccept",function(t){t.stopImmediatePropagation();var a={ie:"utf-8"};a.tbs=PageData.tbs,a.icon_name=n,a.level=1,i._icon_tip_ajax&&i._icon_tip_ajax.abort(),i._icon_tip_ajax=$.ajax({type:"post",url:"/icon/buyIcon",data:a,dataType:"json"}).success(function(t){if(t&&0===t.no){var n=t.data;return n.icon_info?(i.showDialog("\u8D2D\u4E70\u6210\u529F"),$.tb.location.reload(),void 0):(i.showDialog("\u8D2D\u4E70\u51FA\u9519\uFF0C\u8BF7\u67E5\u770B\u8D2D\u4E70\u8BB0\u5F55\u786E\u8BA4\u662F\u5426\u8D2D\u4E70\u6210\u529F"),void 0)}t&&2270028===t.no?i.showDialog("T\u8C46\u4E0D\u8DB3"):i.showDialog("\u8D2D\u4E70\u51FA\u9519\uFF0C\u6CA1\u6709\u8D2D\u4E70\u6210\u529F")})}).bind("oncancel",function(){})}},getIconTipHtml:function(t){if(null==t.intro||null==t.intro_url)return!1;if(this.whetherIHaveTheIcon(t,this.myIcons))return{intro:"<p>"+t.intro+' <a target="_blank" href="'+t.intro_url+'">\u8BE6\u60C5\u300B</a></p>',btn:'<a class="btn_default btn_small " href="/home/main?id='+PageData.user.portrait+'" target="_blank" >\u7BA1\u7406\u5370\u8BB0</a>'};if(null!=t.price&&0!=t.price){var i='<p>\u4EF7\u683C:<i class="icon_tbean" style="vertical-align:middle;"></i><span class="orange_text " >'+t.price+'</span> <a target="_blank" href="'+t.intro_url+'">\u8BE6\u60C5\u300B</a></p>';return{intro:i,btn:'<a class="btn_default btn_small j_buy_icon_btn"  >\u8D2D\u4E70\u5370\u8BB0</a>'}}return{intro:"<p>"+t.intro+' <a target="_blank" href="'+t.intro_url+'">\u8BE6\u60C5\u300B</a></p>',btn:'<a class="btn_default btn_small" target="_blank" href="'+t.intro_url+'" >\u83B7\u53D6\u5370\u8BB0</a>'}},whetherIHaveTheIcon:function(t,i){var n,a;for(a in i)if(n=i[a],t.name==n)return!0;return!1},showDialog:function(t){this._dialog&&this._dialog.close(),this._dialog=null,this._dialog=new $.dialog({title:"\u5370\u8BB0\u63D0\u793A",html:t})},formateDate:function(t){var i=new Date(1e3*parseInt(t));return i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}}});var bdShareTb=bdShareTb||{};bdShareTb._LogPool=bdShareTb._LogPool||[],bdShareTb.ApiPVLogger||!function(e){function n(e,n){var t=[];for(var o in n){var i=typeof n[o];"function"!=i&&"object"!=i&&n.hasOwnProperty(o)&&t.push(e+"_"+o+"="+n[o])}return t.join("&")}function t(){for(var e=bdShareTb._LogPool||[],n={},t=e.length-1;t>=0;t--){var o=e[t],i=n[o.key];i?(i.linkid=i.linkid||o.api.linkid,i.loadTime=o.api.loadTime||i.loadTime,i.type=(i.type||0)|(o.api.type||0)):n[o.key]=o.api}e=[];for(var d in n)n.hasOwnProperty(d)&&e.push({key:d,api:n[d]});return bdShareTb._LogPool=e,e}function o(){var e=bdShareTb._LogPool||[],o=e.length;if(o>0){e=t(),o=e.length;for(var i=[],d="",a=null,u=[0,0,0,0,0,0,0,0],l=0;o>l;l++)a=e[l],u[r[a.key]]=1,a.api.linkid&&(d=a.api.linkid,delete a.api.linkid),i.push(n(a.key,a.api));i.unshift("linkid="+d),i.unshift("apitype="+parseInt(u.reverse().join(""),2)),c(i.join("&"))}}function i(){l=!0,d.dom.ready(o)}var d,a=d={version:"1.5.2.2"};a.guid="$BAIDU$",a.$$=window[a.guid]=window[a.guid]||{global:{}},a.browser=a.browser||{},function(){var e=navigator.userAgent;a.browser.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)?+(RegExp.$1||RegExp.$2):void 0}(),a.browser.ie=a.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,a.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,a.dom=a.dom||{},function(){var e=a.dom.ready=function(){function e(){if(!e.isReady){e.isReady=!0;for(var n=0,t=d.length;t>n;n++)d[n]()}}function n(){try{document.documentElement.doScroll("left")}catch(t){return setTimeout(n,1),void 0}e()}function t(){if(!i)if(i=!0,"complete"===document.readyState)e.isReady=!0;else if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",e,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",o),window.attachEvent("onload",e);var t=!1;try{t=null==window.frameElement}catch(d){}document.documentElement.doScroll&&t&&n()}}var o,i=!1,d=[];return document.addEventListener?o=function(){document.removeEventListener("DOMContentLoaded",o,!1),e()}:document.attachEvent&&(o=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),e())}),t(),function(n){e.isReady?n():d.push(n)}}();e.isReady=!1}(),d.undope=!0;var r={cite:0,img:1,addto:2,video:3},u=function(){var e=[];return function(n){var t="bdsharelog__"+(new Date).getTime(),o=e[t]=new Image;o.onload=o.onerror=function(){e[t]=null},o.src=n,o=null}}(),c=function(e){var n=/(\d+\-[a-zA-Z\d]+\-\d+\-\d+\-[a-f\d]+)/gi,t=(location.href.match(n)||"").toString(),o="http://nsclick.baidu.com/v.gif?pid=307&type=3071&sign="+t+"&desturl="+encodeURIComponent(document.referrer)+"&";u(o+e)},l=!1;e.ApiPVLogger={add:function(e,n){bdShareTb._LogPool.push({key:e,api:n})}},l||i()}(bdShareTb);
;var bdShareTb=bdShareTb||{};bdShareTb.ready=bdShareTb.ready||function(e,t){if(t=t||document,/complete/.test(t.readyState))e();else if(t.addEventListener)"interactive"==t.readyState?e():t.addEventListener("DOMContentLoaded",e,!1);else{var a=function(){a=new Function,e()};void function(){try{t.body.doScroll("left")}catch(e){return setTimeout(arguments.callee,10)}a()}(),t.attachEvent("onreadystatechange",function(){"complete"==t.readyState&&a()})}},bdShareTb.loadScript=bdShareTb.loadScript||function(e){var t=document.createElement("script");t.src=e,bdShareTb.ready(function(){document.getElementsByTagName("script")[0].parentNode.appendChild(t)})},bdShareTb.loadTime=+new Date;
;var bdShareTb=bdShareTb||{};!function(){var e=(new Date).getTime(),t=(new Date).getTime(),n=(new Date).getTime();if(document.getElementById("bdshare_tb")){var o=window,i=document,s=i.body,r=i.documentElement,a={},d="",l=i.title,c=[],h="",f={},u=i.getElementById("bdshare_tb").attributes.data,b=/MSIE 6.0/.test(navigator.userAgent),m="CSS1Compat"!=i.compatMode,u=u.nodeValue.replace(/&amp;/g,"&").split("&")||"";try{var p=o.location||i.location;a.href=p.href,a.search=p.search,a.hash=p.hash,a.protocol=p.protocol,a.hostname=p.hostname,a.pathname=p.pathname,d=encodeURIComponent(a.href)}catch(g){setTimeout(function(){var e=o.location||i.location;a.href=e.href,a.search=e.search,a.hash=e.hash,a.protocol=e.protocol,a.hostname=e.hostname,a.pathname=e.pathname,d=encodeURIComponent(a.href)},0)}for(var y=u.length;y--;){var v=u[y].split("=");c[v[0]]=v[1]}var T={bdPref:"bds_",bdBtns:c.btnArray?c.btnArray.split(","):[],bdEntranceLog:c.entrance||"",bdNums:c.mini?7:15,bdMini:c.mini||!1,bdType:c.type||"",bdLeft:c.pos||"right",bdTitle:"\u5206\u4EAB\u5230",bdText:c.text||l,weiboText:"",bdMore:"\u66F4\u591A...",bdPopTitle:"\u5206\u4EAB\u5230",bdImg:c.img||0,bdImgW:24,bdTop:0,bdIds:"bdshare",bdIdsl:c.mini&&"0"==c.mini?"bdshare_tb_l":"bdshare_tb_m",bdUid:c.uid||"",bdPic:c.bdPic||"",searchPic:c.searchPic||0,bdComment:"",bdDesc:"",wbUid:"",tongji:"on",review:"on",render:!0,snsKey:{},bdHost:"http://bdimg.share.baidu.com/static/",bdJump:"http://share.baidu.com/",bdApi:"http://api.share.baidu.com/",bdStatistics:"http://share.baidu.com/commit",bdCommit:"http://s.share.baidu.com/",bdMshare:"http://s.share.baidu.com/mshare",bdCout:"http://nsclick.baidu.com/v.gif?pid=307",bdWList:"([http|https]://[a-zA-Z0-9_.]+.baidu.com)",bdList:["mshare,\u4E00\u952E\u5206\u4EAB,mshare","qzone,QQ\u7A7A\u95F4,qqkj","tsina,\u65B0\u6D6A\u5FAE\u535A,xlwb","baidu,\u767E\u5EA6\u641C\u85CF,bdsc","renren,\u4EBA\u4EBA\u7F51,rrw","tqq,\u817E\u8BAF\u5FAE\u535A,txwb","bdxc,\u767E\u5EA6\u76F8\u518C,bdxc","kaixin001,\u5F00\u5FC3\u7F51,kxw","tqf,\u817E\u8BAF\u670B\u53CB,txpy","tieba,\u767E\u5EA6\u8D34\u5427,bdtb","douban,\u8C46\u74E3\u7F51,db","tsohu,\u641C\u72D0\u5FAE\u535A,shwb","bdhome,\u767E\u5EA6\u65B0\u9996\u9875,bdhome","sqq,QQ\u597D\u53CB,sqq","thx,\u548C\u8BAF\u5FAE\u535A,thx","qq,QQ\u6536\u85CF,qqsc","taobao,\u6211\u7684\u6DD8\u5B9D,tjh","hi,\u767E\u5EA6\u7A7A\u95F4,bdkj","msn,MSN,msn","sohu,\u641C\u72D0\u767D\u793E\u4F1A,shbsh","t163,\u7F51\u6613\u5FAE\u535A,wywb","qy,\u5947\u827A\u5947\u8C08,qyqt","meilishuo,\u7F8E\u4E3D\u8BF4,mls","mogujie,\u8611\u83C7\u8857,mgj","diandian,\u70B9\u70B9\u7F51,diandian","huaban,\u82B1\u74E3,huaban","leho,\u7231\u4E50\u6D3B,leho","share189,\u624B\u673A\u5FEB\u4F20,share189","duitang,\u5806\u7CD6,duitang","hx,\u548C\u8BAF,hexun","tfh,\u51E4\u51F0\u5FAE\u535A,fhwb","fx,\u98DE\u4FE1,feixin","youdao,\u6709\u9053\u4E91\u7B14\u8BB0,youdao","sdo,\u9EA6\u5E93\u8BB0\u4E8B,sdo","qingbiji,\u8F7B\u7B14\u8BB0,qingbiji","ifeng,\u51E4\u51F0\u5FEB\u535A,ifeng","people,\u4EBA\u6C11\u5FAE\u535A,people","xinhua,\u65B0\u534E\u5FAE\u535A,xinhua","ff,\u996D\u5426,fanfou","mail,\u90AE\u4EF6\u5206\u4EAB,mail","kanshou,\u641C\u72D0\u968F\u8EAB\u770B,kanshou","yaolan,\u6447\u7BEE\u7A7A\u95F4,yaolan","wealink,\u82E5\u90BB\u7F51,wealink","tuita,\u63A8\u4ED6,tuita","xg,\u9C9C\u679C,xianguo","ty,\u5929\u6DAF\u793E\u533A,tianya","fbook,Facebook,facebook","twi,Twitter,twitter","ms,Myspace,myspace","deli,delicious,delicious","s51,51\u6E38\u620F\u793E\u533A,51shequ","s139,139\u8BF4\u5BA2,shuoke","linkedin,linkedin,LinkedIn","copy,\u590D\u5236\u7F51\u5740,kaobei","print,\u6253\u5370,print"]}||{},w={_parseJson:function(e){e=e.replace(/^\s*{|}\s*$/g,"");for(var t=e.split(","),n={},o=0,i=t.length;i>o;o++){var s=t[o],r=s.indexOf(":");r>0&&(key=s.substring(0,r).replace(/^\s*[\'\"]?|[\"\']?\s*$/g,""),val=s.substring(r+1).replace(/^\s*[\'\"]?|[\"\']?\s*$/g,""),n[key]=val)}return n},_createScriptTag:function(e,t,n){e.setAttribute("type","text/javascript"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)},_removeScriptTag:function(e){if(e.clearAttributes)e.clearAttributes();else for(var t in e)e.hasOwnProperty(t)&&"parentNode"!=t&&delete e[t];e&&e.parentNode&&e.parentNode.removeChild(e),e=null},callByBrowser:function(e,t,n){var o,i=document.createElement("SCRIPT"),s=0,r=n||{},a=r.charset,d=t||function(){},l=r.timeOut||0;i.onload=i.onreadystatechange=function(){if(!s){var e=i.readyState;if("undefined"==typeof e||"loaded"==e||"complete"==e){s=1;try{d(),clearTimeout(o)}finally{i.onload=i.onreadystatechange=null,w._removeScriptTag(i)}}}},l&&(o=setTimeout(function(){i.onload=i.onreadystatechange=null,w._removeScriptTag(i),r.onfailure&&r.onfailure()},l)),w._createScriptTag(i,e,a)},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},unon:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},html:function(e,t){var n=i.createElement(t||"div");for(var o in e)"style"==o?n[o].cssText=e[o]:n[o]=e[o];return"link"!=t?s.insertBefore(n,"iframe"==t?s.firstChild:h.nextSibling):(i.getElementsByTagName("head")[0].appendChild(n),void 0)},list:function(e){var t=T.bdPref,n=e.split(","),o=n[1],i="#",s=t+n[0]+" "+n[2];return{name:o,url:i,cls:s}},list_s:function(e){var t=[],n=inner="",o=T,i=o.bdList,s=o.bdBtns.length;if(more=o.bdNums<i.length?'<li><a href="#" class="bds_more">'+o.bdMore+"</a></li>":"",o.bdBtns.length<=0)for(s=o.bdNums;s--;)n=w.list(i[s]),t.push('<a href="'+n.url+'" class="'+n.cls+'">'+n.name+"</a>");else for(;s--;)o.bdBtns[s]<i.length&&(n=w.list(i[o.bdBtns[s]]),t.push('<a href="'+n.url+'" class="'+n.cls+'">'+n.name+"</a>"));if(inner='<iframe id="bdsTbIfr" style="position:absolute;display:none;z-index:9999;" frameborder="0"></iframe>',inner+='<div id="'+o.bdIdsl+'"><div id="'+o.bdIdsl+'_c"><h6>'+o.bdTitle+"</h6>",inner+="<ul><li>"+t.reverse().join("</li><li>")+"</li>"+more+'</ul><p><a href="#" class="goWebsite">\u767E\u5EA6\u5206\u4EAB</a></p></div></div>',!e)return inner;var r=w.html({id:"bdshare_tb_s",innerHTML:inner}),a=w.children(r);r=a[a.length-1],w.on(r,"mouseover",function(e){var e=e||window.event,t=e.target||e.srcElement,n=w.getPosition(t),o=e.relatedTarget||e.fromElement,i=w.getMousePos(e),s=i.x-n.l,a=i.y-n.t;t.buttontype=1,t.x=s,t.y=a,w.contains(r,o)||(r.time=+new Date)})},scroll:function(e,t){w.on(o,"scroll",function(){var n=w.getSize(),o=T,s=o.bdTop;"slide"==o.bdType&&(b||m?(w.setAttr(i.getElementById(o.bdIdsl),"display:block"),_bdS.style.top=n.t+(0==s?n.h/2-(i.getElementById(o.bdIdsl).offsetHeight-11)/2:parseInt(s))+"px"):0!=o.bdTop&&(_bdS.style.top=parseInt(o.bdTop)+"px")),"pop"==t&&(b||m)&&(e.style.top=n.t+n.h/2-e.offsetHeight/2+"px",w.setAttr(h,"top:"+e.style.top))})},getSize:function(){return{t:s.scrollTop||r.scrollTop,l:s.scrollLeft||r.scrollLeft,w:r.clientWidth||s.clientWidth,h:o.innerHeight||r.clientHeight||s.clientHeight}},getPosition:function(e){var t=w.getSize(),n=e,o={t:0,l:0},r=/gecko/.test(navigator.userAgent),a=function(e,t){o.t+=e,o.l+=t};if(n&&n!=s)if(n.getBoundingClientRect){var d=n.getBoundingClientRect(),l=e.ownerDocument,c=l.body,h=l.documentElement,f=h.clientTop||c.clientTop||0,u=h.clientLeft||c.clientLeft||0;if(d.top==d.bottom){var b=n.style.display;n.style.display="block",n.style.display=b}a(d.top+t.t-f,d.left+t.l-u)}else{for(var m=i.defaultView;n;){a(n.offsetTop,n.offsetLeft);var p=m.getComputedStyle(n,null);if(r){var g=parseInt(p.getPropertyValue("border-left-width"),10)||0,y=parseInt(p.getPropertyValue("border-top-width"),10)||0;a(y,g),n!=e&&"visible"!=p.getPropertyValue("overflow")&&a(y,g)}n=n.offsetParent}for(n=e.parentNode;n&&n!=s;)a(-n.scrollTop,-n.scrollLeft),n=n.parentNode}return o},setAttr:function(e,t){for(var n=t.split(";"),o=n.length;o--;)if(n[o]){var i=n[o].split(":");i&&(e.style[i[0]]=i[1])}},children:function(e){for(var t=[],n=e.firstChild;n;n=n.nextSibling)1==n.nodeType&&t.push(n);return t},generateRandom:function(e,t){for(var n=e.length,o="",i=1;t>=i;i++){var s=Math.floor(n*Math.random());o+=e.charAt(s)}return o},generateLinkid:function(){var e=(+new Date).toString(36),t=w.generateRandom("0123456789abcdefghijklmnopqrstuvwxyz",3);return e+t},contains:function(e,t){if(!t||!e)return!1;if(e==t)return!0;for(var n=t.parentNode;null!=n&&"undefind"!=typeof n.tagName;){if(n==e)return!0;n=n.parentNode}return!1},getMousePos:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:document.documentElement&&document.documentElement.scrollTop?{x:e.clientX+document.documentElement.scrollLeft-document.documentElement.clientLeft,y:e.clientY+document.documentElement.scrollTop-document.documentElement.clientTop}:document.body?{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}:void 0},_isCookieValidKey:function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},getCookieRaw:function(e){if(w._isCookieValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n)return n[2]||null}return null},setCookieRaw:function(e,t,n){if(w._isCookieValidKey(e)){n=n||{};var o=n.expires;"number"==typeof n.expires&&(o=new Date,o.setTime(o.getTime()+n.expires)),document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(o?"; expires="+o.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}},getCookie:function(e){var t=w.getCookieRaw(e);return"string"==typeof t?t=decodeURIComponent(t):null},setCookie:function(e,t,n){w.setCookieRaw(e,encodeURIComponent(t),n)}},x=function(e){w.html({href:T.bdHost+"css/bdsstyle.css?cdnversion=20121228",rel:"stylesheet",type:"text/css"},"link"),h=h||w.html({style:"display:none;"+(e||""),frameBorder:0},"iframe")},_=function(e){var t=/(#\d+\-[a-zA-Z\d]+\-\d+\-\d+\-[a-f\d]{32}$)/g,n=(a.search+a.hash).replace(/&/g,"#"),o=n.match(t)||"",s=new RegExp(T.bdWList,"ig"),r=a.protocol+"//"+a.hostname+a.pathname+a.search;if(!s.test(a.href)||""!=o||"undefined"!=typeof e){var d=[];bdShareTb.fn.b.length>0&&d.push("button"),bdShareTb.fn.t.length>0&&d.push("tools"),bdShareTb.fn.conf.bdType&&d.push(bdShareTb.fn.conf.bdType);var c=function(){for(var e=0,t=d.length,n={},o=[];t>e;e++)!(d[e]in n)&&o.push(d[e])&&(n[d[e]]="");return o.join(",")}();if("on"==T.tongji||""!=o||"undefined"!=typeof e){""!=o&&"3072"!=e&&(o=o.toString().replace("#",""),(new Image).src=T.bdCommit+"back?url="+encodeURIComponent(r)+"&sign="+encodeURIComponent(o)+"&title="+encodeURIComponent(l.substr(0,300)));var h=bdShareTb.loadTime?+new Date-bdShareTb.loadTime:"";if("undefined"!=typeof e)(new Image).src=T.bdCout+"&type="+e+"&sign="+o+"&uid="+T.bdUid+"&desturl="+encodeURIComponent(i.referrer)+"&linkid="+k+"&button="+c+"&loadTime="+h;else{for(var f=[0,0,0,0],u=0,b=d.length;b>u;u++)f[{tools:0,button:1,slide:2}[d[u]]]=1;bdShareTb._LogPool=bdShareTb._LogPool||[],bdShareTb._LogPool.push({key:"cite",api:{uid:T.bdUid||"",linkid:k,type:parseInt(f.reverse().join(""),2),mini:T.bdMini?1:0,loadTime:h}})}}}},S={create:function(){var e=T,t=e.bdList,n=t.length,s=[],r="",a=w.getSize(),d=i.getElementById(e.bdIds+"_pop"),l=b||m?"absolute":"fixed",c=b||m?a.t:0;if(!d){for(;n--;)r=w.list(t[n]),s.push('<a href="'+r.url+'" class="'+r.cls+'">'+r.name+"</a>");var u=w.html({id:e.bdIds+"_pop",style:"position:"+l,innerHTML:"<div><h5></h5><ul><li>"+s.reverse().join("</li><li>")+'</li></ul><p><a href="#" class="goWebsite">\u767E\u5EA6\u5206\u4EAB</a></p></div>'});I.bind(u,"mouseover","a"),I.bind(u,"click","b",function(){u.style.display="none",h.style.display="none"}),w.on(u,"mouseover",function(e){var e=e||window.event,t=e.target||e.srcElement,n=w.getPosition(t),o=w.getMousePos(e),i=o.x-n.l,s=o.y-n.t;t.buttontype=2,t.x=i,t.y=s;var r=e.relatedTarget||e.fromElement;w.contains(u,r)||(u.time=+new Date)})}var p=u||d;p.getElementsByTagName("h5")[0].innerHTML=(f.title||e.bdPopTitle)+"<b>&nbsp;</b>",w.setAttr(p,"display:block;"),w.setAttr(p,"left:"+(a.w/2-p.offsetWidth/2)+"px;top:"+(c+a.h/2-p.offsetHeight/2)+"px"),w.setAttr(h,"position:"+l+";display:block;z-index:10000;width:"+p.offsetWidth+"px;height:"+p.offsetHeight+"px;left:"+p.style.left+";top:"+p.style.top),w.scroll(p,"pop"),w.on(o,"resize",function(){var e=w.getSize(),t="left:"+(e.w/2-p.offsetWidth/2)+"px;top:"+(c+e.h/2-p.offsetHeight/2)+"px";w.setAttr(p,t),w.setAttr(h,t)}),"slide"!=e.bdType&&(i.getElementById(T.bdIdsl).style.display="none",i.getElementById("bdsTbIfr").style.display="none"),window.bdShareActivity&&bdShareActivity.check()}},I={bind:function(e,t,n,i){var s=this;e.addEventListener?e.addEventListener(t,function(t){return s._action(t,t.target,n,e,i)},!1):e.attachEvent("on"+t,function(t){return t=o.event,s._action(t,t.srcElement,n,e,i)})},_action:function(e,t,n,o,i){var s=T.bdEntranceLog;if(t.nodeName==n.toUpperCase()){if("a"==n||"span"==n){var r=t.className,a="goWebsite"==r?r:r.split(" ")[0].split("_")[1],d=this;return a&&("more"==a&&"span"==n?d._tools(s):t.onclick=function(e,n){return function(o){var o=o||window.event,i=o.target||o.srcElement,r=w.getPosition(i),a=w.getMousePos(o),l=a.x-r.l,c=a.y-r.t;return"more"==e?d._tools(s):"copy"==e?d._copy(d):"print"==e?d._print():d._jump(e,n,t,l,c),!1}}(a,o)),!1}"function"==typeof i&&i()}"function"==typeof e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0)},_tools:function(e){_(3072),S.create(),$.stats.sendRequest("bdshare=tb&page=logcount&entrance="+e)},_copy:function(e){_this=e;var t=new _this._browsers;"IE"==t.name?(window.clipboardData.setData("text",document.title+" "+a.href),alert("\u6807\u9898\u548C\u94FE\u63A5\u590D\u5236\u6210\u529F\uFF0C\u60A8\u53EF\u4EE5\u63A8\u8350\u7ED9QQ/MSN\u4E0A\u7684\u597D\u53CB\u4E86\uFF01")):window.prompt("\u60A8\u4F7F\u7528\u7684\u662F\u975EIE\u6838\u5FC3\u6D4F\u89C8\u5668\uFF0C\u8BF7\u6309\u4E0B Ctrl+C \u590D\u5236\u4EE3\u7801\u5230\u526A\u8D34\u677F",document.title+" "+a.href)},_mail:function(){},_print:function(){var e=document.getElementById("bdshare_pop");e&&(e.style.display="none"),window.print(),e&&(e.style.display="block")},_jump:function(i,s,r,a,l){var c=T,h=T.bdEntranceLog,u=T.bdIds,b=c.bdPic,m=c.bdText,p=c.weiboText,g=c.wbUid,y=d,v=c.bdDesc,x=c.bdComment,_=c.bdMiniWindow||0;f=s.getAttribute("data")&&""!=s.getAttribute("data")?w._parseJson(s.getAttribute("data")):f,""!=f?(b=encodeURIComponent(f.pic||"")||b,y=encodeURIComponent(f.url||"")||y,x=encodeURIComponent(f.comment||"")||x,v=encodeURIComponent(f.desc||"")||v,g=f.wbuid||g,m="tsina"==i?f.text&&f.weibotext?encodeURIComponent((f.text+f.weibotext).substr(0,300)):f.weibotext?encodeURIComponent((m+f.weibotext).substr(0,300)):f.text?encodeURIComponent((f.text+p).substr(0,300)):encodeURIComponent((m+p).substr(0,300)):encodeURIComponent((f.text||"").substr(0,300))||encodeURIComponent(m.substr(0,300))):m="tsina"==i?encodeURIComponent((m+p).substr(0,300)):encodeURIComponent(m.substr(0,300)),m=encodeURIComponent(m),n=(new Date).getTime()+3e3;var S=e.toString(32)+t.toString(32)+n.toString(32),I=r.buttontype,C=Math.floor(bdShareTb.XY.loadedX),E=Math.floor(bdShareTb.XY.loadedY),A=I>0?1:0,L=Math.floor(r.x),P=Math.floor(r.y),M=Math.floor(a),R=Math.floor(l),W=Math.floor(r.offsetWidth),B=Math.floor(r.offsetHeight),U=I,N=+new Date;N-=s.time;var q,D=[C,E,A,L,P,M,R,W,B,U,N].join(".");switch(T.bdType){case"button":q=1;break;case"slide":q=2;break;default:q=0}var H="mail"==i?"_mail":i,j="?click=1&url="+y+"&uid="+c.bdUid+"&to="+H+"&type=text&relateUid="+g+"&pic="+b+"&title="+m+"&key="+(c.snsKey[i]||"")+"&sign="+c.review+"&desc="+v+"&comment="+x+"&searchPic="+c.searchPic+"&l="+S+"&linkid="+k+"&sloc="+D+"&apiType=0&buttonType="+q+"&firstime="+w.getCookie("bdshare_firstime");if("mshare"==i)var z=c.bdMshare+j;else var z=c.bdCommit+j;var X=c.bdCommit+"commit"+j+"&t="+Math.random();if("goWebsite"!=i){bdShareTb.fn._getSc("share");var Y=function(){var e=[];return function(t){var n=e.push(new Image)-1;e[n].onload=function(){e[n]=e[n].onload=null},e[n].src=t,"block"!=$("#"+u+"_pop").css("display")&&$.stats.sendRequest("bdshare=tb&page=logcount&entrance="+h)}}();if(setTimeout(function(){Y(X)},1500),"bdxc"==i){var V,Q=window,z=document,K="_bdXC";Q[K]?window._bdXC_loaded&&Q[K].reInit():(V=z.createElement("script"),V.setAttribute("charset","utf-8"),V.src="http://xiangce.baidu.com/zt/collect/mark.js?"+(new Date).getTime(),z.getElementsByTagName("head")[0].appendChild(V))}else if("mail"==i){var J=T.bdCommit+"sendmail";window.open(J+j,"_blank")}else 1==_?o.open(z,"bdShare","height=400, width=600"):o.open(z)}else o.open(c.bdJump)},_browsers:function(){var e,t={},n=navigator.userAgent.toLowerCase();return n.match(/msie ([\d.]+)/)?(e=n.match(/msie ([\d.]+)/),t.name="IE",t.version=e[1]):n.match(/firefox\/([\d.]+)/)?(e=n.match(/firefox\/([\d.]+)/),t.name="firefox",t.version=e[1]):n.match(/chrome\/([\d.]+)/)?(e=n.match(/chrome\/([\d.]+)/),t.name="chrome",t.version=e[1]):n.match(/opera.([\d.]+)/)?(e=n.match(/opera.([\d.]+)/),t.name="opera",t.version=e[1]):n.match(/safari.([\d.]+)/)?(e=n.match(/safari.([\d.]+)/),t.name="safari",t.version=e[1]):(t.name="\u672A\u77E5\u7684\u6D4F\u89C8\u5668",t.version="\u672A\u77E5\u7684\u7248\u672C\u53F7"),t}},k=w.generateLinkid();bdShareTb.fn=function(){return{init:function(){function e(t){var t=t||window.event,n=w.getMousePos(t);bdShareTb.XY.loadedX=n.x,bdShareTb.XY.loadedY=n.y,bdShareTb.XY.loadedX>0&&bdShareTb.XY.loadedY>0&&w.unon(document,"mousemove",e)}t=(new Date).getTime()+1e3,this.b=[],this.t=[],this.s=[],this.type="load",this._getShare();var n=this;if("undefined"!=typeof bds_config)for(var o in bds_config)("bdPopTitle"==o||"bdText"==o||"weiboText"==o||"bdPic"==o||"wbUid"==o||"tongji"==o||"render"==o||"snsKey"==o||"review"==o||"bdComment"==o||"bdDesc"==o||"bdTop"==o||"searchPic"==o||"bdUrl"==o||"bdMiniWindow"==o)&&(T[o]="render"==o||"snsKey"==o||"bdPopTitle"==o||"bdText"==o||"weiboText"==o?bds_config[o]:encodeURIComponent(bds_config[o]));this.conf=T,this.imgW=T.bdImgW,this.conf.render&&((this.b.length>0||this.t.length>0)&&this._share(),"slide"==this.conf.bdType&&this._slide()),this._getSc(this.type);for(var i=this.t,s=0;s<i.length;s++)for(var r=i[s].getElementsByTagName("a"),a=0;a<r.length;a++)!r[a].getAttribute("href")&&r[a].setAttribute("href","#");bdShareTb.XY=bdShareTb.XY||{},w.on(document,"mousemove",e);for(var s=0,d=this.t.length;d>s;s++)!function(e){var t=e;w.on(n.t[e],"mouseover",function(e){var e=e||window.event,o=e.target||e.srcElement,i=w.getPosition(o),s=w.getMousePos(e),r=s.x-i.l,a=s.y-i.t;o.buttontype=0,o.x=r,o.y=a;var d=e.relatedTarget||e.fromElement;w.contains(n.t[t],d)||(n.t[t].time=+new Date)})}(s);_(),null==w.getCookie("bdshare_firstime")&&w.setCookie("bdshare_firstime",1*new Date,{path:"/",expires:(new Date).setFullYear(2022)-new Date})},_getSc:function(e){this.type=e;for(var t=i.querySelectorAll?i.querySelectorAll(".shareCount"):i.getElementsByTagName("*"),n=t.length;n--;)/\sshareCount|shareCount\s|shareCount$/.test(t[n].className)&&this.s.push(t[n]);this.s.length>0&&w.callByBrowser(this.conf.bdApi+"getnum?url="+d+"&callback=bdShareTb.fn._getShare&type="+e+"&t="+(new Date).getTime())},_getShare:function(e){var t=e?!0:!1,n=[];if(i.querySelectorAll)this.b=i.querySelectorAll(".bdshare_b"),this.t=i.querySelectorAll(".bdshare_t");else for(var o=i.getElementsByTagName("*"),s=o.length;s--;){var r=o[s];/\sbdshare_t|bdshare_t\s/.test(r.className)&&this.t.push(r),/\sbdshare_b|bdshare_b\s|bdshare_b$/.test(r.className)&&this.b.push(r)}if(t){for(var a,n=this.s,d=n.length;d--;)/\sshareCount|shareCount\s|shareCount$/.test(n[d].className)&&(a="share"==this.type?e.num[0]<1e4?parseInt(n[d].innerHTML)+1:e.num[1]:1*e.errno==0?e.num[1]:0,n[d].innerHTML=decodeURI(a),n[d].setAttribute("title","\u7D2F\u8BA1\u5206\u4EAB"+e.num[0]+"\u6B21"),n[d].onclick=function(){S.create()});this.s=[]}},_share:function(){w.list_s(!0);var e=this.b,t=this.t,n=e.length,o=t.length,s=i.getElementById(this.conf.bdIdsl),r=i.getElementById("bdsTbIfr"),a=this.conf.bdList,d=a.length;if(w.setAttr(s,"display:none;"),I.bind(s,"mouseover","a"),n>0)for(;n--;)"bdshare_tb"==e[n].id&&(I.bind(e[n],"click","img",function(){S.create()}),I.bind(e[n],"mouseover","a",function(){S.create()}),this._s(e[n],s,r,e[n],"b"));if(o>0)for(;o--;)if("bdshare_tb"==t[o].id){I.bind(t[o],"click","span",function(){S.create()}),I.bind(t[o],"mouseover","a");for(var l=w.children(t[o]),c=l.length,h="";c--;){var f=l[c];if(/bds_more/.test(f.className))h=l[c],m&&(h.style.height=(/bds_tools_32/.test(t[o].className)?38:17)+"px"),this._s(""==h?t[o]:h,s,r,t[o],h);else for(var u=0;d>u;u++)if(a[u]){var b=a[u].split(","),p=new RegExp(this.conf.bdPref+b[0]+"$","ig");if(a[u]){var b=a[u].split(","),p=new RegExp(this.conf.bdPref+b[0]+"$","ig");p.test(f.className)&&("\u62F7\u8D1D"==b[1]?f.title="\u590D\u5236\u7F51\u5740":f.title||(f.title="\u5206\u4EAB\u5230"+b[1]))}}}}},_s:function(e,t,n,o,i){var s,r=this,a=[],d=""==i?"none":"block";this._popShow(e,{over:function(i){a=w.getPosition(e),f=o.getAttribute("data")&&""!=o.getAttribute("data")?w._parseJson(o.getAttribute("data")):"",w.setAttr(t,"display:"+d),w.setAttr(t,"left:"+(w.getSize().w-i.clientX<t.offsetWidth?a.l-t.offsetWidth+e.offsetWidth:a.l)+"px"),w.setAttr(t,"top:"+(w.getSize().h-i.clientY<t.offsetHeight?a.t-t.offsetHeight:a.t+e.offsetHeight)+"px"),w.setAttr(n,"display:"+d+";width:"+t.offsetWidth+"px;height:"+t.offsetHeight+"px;left:"+t.style.left+";top:"+t.style.top)},out:function(){s=setTimeout(function(){t.style.display="none",n.style.display="none"},100),r._popShow(t,{over:function(){clearTimeout(s),t.style.display="block",n.style.display="block"},out:function(){t.style.display="none",n.style.display="none"}})}})},_slide:function(){function e(){w.setAttr(c,"display:block;"),c.offsetWidth+a.imgW!=d.offsetWidth&&(tm=setTimeout(function(){c.offsetWidth+a.imgW!=d.offsetWidth&&a._move(d,0,a.imgW,c.offsetWidth,h)},100),a._popShow(c,{over:function(){w.setAttr(h,"height:"+c.offsetHeight+"px;"+a.conf.bdLeft+":0;top:0;display:block")},out:function(){}}),a._popShow(d,{over:function(){},out:function(){d.offsetWidth==c.offsetWidth+a.imgW&&(clearTimeout(tm),a._move(d,0,c.offsetWidth+a.imgW,-c.offsetWidth,h)),h.style.display="none"}}))}if(!o._bdS){var t="right"==this.conf.bdLeft?"left":"right",n=this.conf.bdHost+"images/"+this.conf.bdLeft.substring(0,1)+this.conf.bdImg+".gif";o._bdS=w.html({id:this.conf.bdIds,innerHTML:'<img src="'+n+'" alt="" style="float:'+t+';margin-top:58px;"/>'+w.list_s(!1)});var s=w.children(_bdS),r=s[s.length-1];w.on(r,"mouseover",function(e){var e=e||window.event,t=e.target||e.srcElement,n=w.getPosition(t),o=e.relatedTarget||e.fromElement,i=w.getMousePos(e),s=i.x-n.l,a=i.y-n.t;t.buttontype=1,t.x=s,t.y=a,w.contains(r,o)||(r.time=+new Date)})}var a=this,d=_bdS,l=w.getSize(),c=i.getElementById(this.conf.bdIdsl),h=i.getElementById("bdsTbIfr"),f=b||m?"absolute":"fixed",u=(b?l.t:0)+(0==this.conf.bdTop?l.h<c.offsetHeight?-40:l.h/2-c.offsetHeight/2:parseInt(this.conf.bdTop));w.setAttr(d,"overflow:hidden;height:330px;position:"+f+";top:"+u+"px;"+this.conf.bdLeft+":0;"+("right"==t?t+":"+(l.w-this.imgW)+"px":"")),w.setAttr(c,t+":"+this.imgW+"px;display:none"),I.bind(d,"click","img",function(){_(3072),S.create()}),I.bind(d,"mouseover","img",e),I.bind(c,"mouseover","a"),w.scroll(d,"slide"),w.on(o,"resize",function(){w.setAttr(d,"right"==t?t+":"+(w.getSize().w-a.imgW)+"px":"")})},_move:function(e,t,n,o,i){var s=e.style,r=i.style,a=this,d=6;setInterval(function(){d>t&&(t++,s.width=Math.ceil(o*t/d+n)+"px",r.width=Math.ceil(o*t/d+n)-a.imgW+"px")},10)},_popShow:function(e,t){function n(e){t.over(e)}function s(e){t.out(e)}i.all?(e.onmouseenter=function(){n(o.event)},e.onmouseleave=s):(e.onmouseover=function(e){null==e.relatedTarget?n(e):!(this===e.relatedTarget||20==this.compareDocumentPosition(e.relatedTarget))&&n(e)},e.onmouseout=function(e){null==e.relatedTarget?s(e):!(this===e.relatedTarget||20==this.compareDocumentPosition(e.relatedTarget))&&s(e)})}}}(),x(),bdShareTb.fn.init()}}();
;_.Module.define({path:"pcommon/widget/bd_share"});window.__discarding&&__discarding("pcommon/component/login_dialog"),_.Module.define({path:"pcommon/component/LoginDialog",sub:{_config:{apiOpt:{staticPage:"http://tieba.baidu.com/tb/static-common/html/pass/v3Jump.html",product:"tb",charset:"GBK",u:"",memberPass:!0,safeFlag:0},cache:!1,img:"",onLoginSuccess:function(t){t.returnValue=!1,$.stats.sendRequest("st_type=login_succeed&fr=tb0&st_pos="),$.tb.location.reload()},onSubmitStart:function(){$.stats.sendRequest("st_type=login_click&fr=tb0&st_pos=")},registerLink:"https://passport.baidu.com/v2/?reg&tpl=tb&u=http://tieba.baidu.com",tangram:!0},initial:function(t,i,s){var o=this,a=1;if(o._config.apiOpt.u="string"==typeof t&&""!=t?t:$.tb.location.getHref(),"string"==typeof i){switch(i){case"userBar":a=1;break;case"editor1":case"lzl":a=2;break;case"editor":a=3;break;case"lzonly":a=4;break;case"ilike":a=5;break;default:a=1}o._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+a+".png"}else o._config.img="http://tb2.bdstatic.com/tb/static-common/img/passport/logindlg_pic"+a+".png";PageData&&(o._config.apiOpt.isQuickUser=PageData.is_quick_user||0),s&&(o._config.onLoginSuccess=s),arguments.length>3&&(o._config.apiOpt.product=arguments[3]),function(t){var i="undefined"!=typeof Env&&Env.server_time?Env.server_time:(new Date).getTime();t.JsLoadManager.use(["http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion="+Math.floor(i/6e4),"http://passport.bdimg.com/passApi/js/wrapper.js?cdnversion="+Math.floor(i/6e4)],function(){t.passPopInstance||(t.passPopInstance=passport.pop.init(o._config)),t("#passport-login-pop").find(".pass-login-pop-img img").tbattr("src",o._config.img),t.passPopInstance.show(),setTimeout(function(){t("#passport-login-pop").find("input.pass-button-submit").tbattr("alog-alias","login")},1e3)},!0,"utf-8")}(window.jQuery)}}});_.Module.define({requires:["pcommon/component/LoginDialog"],path:"ppb/widget/Posts",sub:{initial:function(){var e=this;e._bindEvents()},_bindEvents:function(){if(!Page.checkLoadedModules("pbPost")){var e=this;$("#j_p_postlist").delegate(".p_post_del_my","click",function(){var t=$(this),a=t.getData()||{},n=a.delete_mine,i=a.user_name,o=a.index;if(n&&1==n){var s=o&&1==o?"\u4E3B\u9898":"\u56DE\u590D",r=r=$.dialog.confirm('<div style="margin:15px auto 0;text-align:center;">\u786E\u8BA4\u5220\u9664\u8FD9\u6761'+s+"?<div>",{showTitle:!1});o&&1==o?r.bind("onaccept",function(){e._delete_thread(i)}):r.bind("onaccept",function(){var a=e._get_delete_paras(t,!1);a.user_name=i,e._delete_post(a)})}return!1}).delegate(".lzl_jb_in","click",function(){{var t=$(this),a=t.getData()||{},n=a.user_name;a.delete_mine}if(1!=a.delete_mine){var i=$(this).parents(".lzl_single_post").getData(),o=$(this).parents(".l_post").getData().content.post_id;return window.open("http://tieba.baidu.com/complaint/info?type=0&tid="+PageData.thread.thread_id+"&pid="+o+"&cid="+i.spid,"newwindow","height=900, width=800, toolbar =no, menubar=no, scrollbars=yes, resizable=yes, location=no, status=no"),!1}var s=$.dialog.confirm('<div style="margin:15px auto 0;text-align:center;">\u786E\u8BA4\u5220\u9664\u8FD9\u6761\u56DE\u590D?<div>',{showTitle:!1});return s.bind("onaccept",function(){var a=e._get_delete_paras(t,!0);a.user_name=n,e._delete_post(a,!0)}),!1}).delegate(".apc_src_wrapper a","mousedown",function(e){var t=e.currentTarget.href,a=t.replace(/\w*(:\/\/)?([^\/]+).*/g,"$2");$.stats.sendRequest("fr=tb0_forum&st_type=shenqi_pb_link&st_value="+encodeURIComponent(a))}).delegate(".j_user_card","click",function(){if(!PageData.user.is_login){var e="";e=$(this).hasClass("lzl_p_p")?"pb_user_lzl":"pb_user_lc";var t="http://tieba.baidu.com"+$.tb.unescapeHTML($(this).tbattr("href"));return window.open("/f/user/passport?jumpUrl="+t+"&statsInfo="+e+"#login_anchor"),!1}}).on("click",".j-pb-tpoint",function(){var t=PageData.user;if(!t.is_login)return e.requireInstance("pcommon/component/LoginDialog"),!1;var a=$(this),n=a.getData();e.tbpointTrack(n.template_id,"BTN_FB");var i=$.dialog.confirm('<div style="margin:15px auto 0;text-align:center;">\u786E\u5B9A\u4E0D\u518D\u770B\u5230\u8BE5\u6761\u5E7F\u544A?<div>',{title:"\u63D0\u793A"});i.bind("onaccept",function(){e.tbpointTrack(n.template_id,"BTN_FBOK"),$.post("/tpoint/submit/mask",{tbs:PageData.tbs,user_id:t.user_id,template_id:n.template_id},function(t){0===t.no?a.closest(".j_l_post").remove():e._showTip("\u62B1\u6B49\uFF0C\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u9690\u85CF\u5931\u8D25\u3002")},"json")}).bind("oncancel",function(){e.tbpointTrack(n.template_id,"BTN_FBCANCEL")})})}},tbpointTrack:function(e,t){var a=PageData;$.stats.track("p0248","tpoint","PB","CLICK_FEEDBACK",{action_type:"CLICK_FEEDBACK",line:"PT",loc_param:t,obj_id:e,obj_name:e,obj_cpid:0,obj_good_id:0,obj_throw_type:"BY_POST",client_type:"PC_WEB",uid:a.user.user_id,uname:a.user.user_name,fid:a.forum.forum_id,fname:a.forum.forum_name,err_no:0,tid:a.thread.thread_id,timestamp:(new Date).getTime()})},_delete_thread:function(e,t){var a=this,n=PageData,i={ie:"utf-8",tbs:n.tbs,kw:n.forum.forum_name,fid:n.forum.forum_id,tid:n.thread.thread_id,user_name:e,delete_my_post:0,delete_my_thread:1};t&&(i=$.extend(i,a._captcha)),PostHandler.execute("threadDelete",i,function(t){var n="";switch(t.no){case 0:$.tb.location.setHref("/f?kw="+PageData.forum.name_url);break;case 308:n=PageData.user.forbidden?"\u62B1\u6B49\uFF0C\u60A8\u5DF2\u88AB\u672C\u5427\u5C01\u7981\u6216\u8005\u52A0\u5165\u9ED1\u540D\u5355\uFF0C\u6682\u4E0D\u80FD\u5220\u8D34":"";break;case 871:n="\u62B1\u6B49\uFF0C\u4ECA\u5929\u5DF2\u8FBE\u60A8\u5220\u8D34\u7684\u6700\u5927\u9650\u989D\uFF0C\u660E\u5929\u518D\u6765\u8BD5\u8BD5\u5427~";break;case 4011:a._getCaptcha.call(a,t,e);break;default:n="\u62B1\u6B49\uFF0C\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u8D34\u5B50\u5220\u9664\u5931\u8D25\u3002"}""!=n&&(a.message?a.message.showMessage(n,"",!1):_.Moudle.getInstance("ppb/widget/Message",function(e){a.message=e,e.showMessage(n,"",!1)}))})},_delete_post:function(e,t,a){var n=this,i=PageData,o={ie:"utf-8",tbs:i.tbs,kw:i.forum.forum_name,fid:i.forum.forum_id,tid:i.thread.thread_id,user_name:e.user_name,delete_my_post:1,delete_my_thread:0,is_vipdel:i.power.lz_del?1:0};a&&(o=$.extend(o,n._captcha)),t?(o.pid=e.spid,o.is_finf=1):(o.pid=e.content_id,o.is_finf=!1),PostHandler.execute("postDelete",o,function(a){var i="";switch(a.no){case 0:$.tb.location.reload();break;case 308:i="\u62B1\u6B49\uFF0C\u60A8\u5DF2\u88AB\u672C\u5427\u5C01\u7981\u6216\u8005\u52A0\u5165\u9ED1\u540D\u5355\uFF0C\u6682\u4E0D\u80FD\u5220\u8D34";break;case 871:i="\u62B1\u6B49\uFF0C\u4ECA\u5929\u5DF2\u8FBE\u60A8\u5220\u8D34\u7684\u6700\u5927\u9650\u989D\uFF0C\u660E\u5929\u518D\u6765\u8BD5\u8BD5\u5427~";break;case 4011:n._getCaptcha.call(n,a,e,t);break;case 4001:i="\u60A8\u597D\uFF0C\u8BE5\u5E16\u5DF2\u5728\u5F53\u524D\u5206\u7C7B\u4E0B\u7F6E\u9876\uFF0C\u6682\u65F6\u65E0\u6CD5\u5220\u9664";break;default:i="\u62B1\u6B49\uFF0C\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u8D34\u5B50\u5220\u9664\u5931\u8D25\u3002"}""!=i&&(n.message?n.message.showMessage(i,"",!1):n.requireInstanceAsync("ppb/widget/Message",[],function(e){n.message=e,e.showMessage(i,"",!1)}))})},_captcha:{},_getCaptcha:function(e,t,a){var n=this,i=1;"string"==typeof t&&(i=0),_.Module.use("pcommon/component/CaptchaDialog",{title:"\u5220\u9664\u8D34\u5B50",message:"\u5220\u4E86\u90A3\u4E48\u591A\u8D34\u5B50\uFF0C\u8F93\u4E2A\u7801\u9A8C\u8BC1\u4E0B\u8EAB\u4EFD\u5427~",vCode:e.data.vcode.captcha_vcode_str,vCodeType:e.data.vcode.captcha_code_type,forumName:PageData.forum.forum_name,forumId:PageData.forum.forum_id,postType:"thread",paramsCallback:function(){return{}}},function(e){n.captchaDialog=e,e.bind("onclose",function(){return e.hide(),!1}),e.bind("onaccept",function(){n._captcha.vcode=e.getInputValue(),n._captcha.vcode_md5=e.getVCode(),i?n._delete_post.call(n,t,a,1):n._delete_thread.call(n,t,1)}),e.show()})},_get_delete_paras:function(e,t){var a,n,i={};return t?(a=e.parents("li.j_lzl_s_p"),i=a.getData()):(a=e.parents("div.l_post"),n=a.getData(),i={author_name:n.author.user_name,content_id:n.content.post_id}),i},_showTip:function(e){var t='<p style="text-align: center">'+e+"</p>";$.dialog.assert(t,function(){},{time:2e3,title:"\u63D0\u793A"})}}});_.Module.define({path:"album/component/initApiConfig",sub:{appid:"314406",xiangceUrl:"http://favo.xiangce.baidu.com/",uploadUrl:"http://up.xiangce.baidu.com/",tags:null,descript:null,cache:{},imgUrl:null,sourceURL:null,offset:{x:-72,y:6},likeButton:null,timer:null,currentQueryImgUrl:null,currentUpImgUrl:null,currentIndex:0,hasLogin:!1,hasNoUn:!1,area:[],descript:"",no_pic_pb:!1,sourceURL:"",tags:"",initial:function(t){var e=this;e.hasLogin=t.isLogin,e.hasNoUn=t.hasNoUn,e.area=t.conf.area,e.descript=t.conf.descript,e.no_pic_pb=t.conf.no_pic_pb,e.sourceURL=t.conf.sourceURL,e.tags=t.conf.tags},isImgMarked:function(t){return t in this.cache&&1==this.cache[t]},checkImgSize:function(t,e){return e.width>=$(t).width()||e.height>=$(t).height()?!1:!0},loginEvent:function(){TbCom.process("User","buildLoginFrame",null,null,null,"fav_img")},showLikeButton:function(){this.likeButton&&this.likeButton.show()},hideLikeButton:function(){this.likeButton&&this.likeButton.hide()},setLikeButtonPosition:function(t,e){{var i,n,o=this,r=$(t),s=r.offset(),u=s.left,a=s.top,c=r.outerHeight(),l=r.outerWidth(),d=o.likeButton;o.area[e]}d.find(".download").show();var h=d.outerHeight(),g=d.outerWidth();return(h+20>c||g+20>l)&&(d.find(".download").hide(),h=d.outerHeight(),g=d.outerWidth(),h+20>c||g+20>l)?!1:(i=a-parseInt(d.css("padding-top")),n=u+l-g+d.width(),d.css({top:i,left:n}),!0)},setImgConf:function(t){var e=this;if("IMG"!=t.tagName){var i=($(t).find("img")[0],$.parseJSON($(t).tbattr("favData")));if(!i.src)return!1;e.imgUrl=i.src,e.sourceURL=i.sourceURL,e.tags=i.tags,e.descript=i.descript}else e.imgUrl=t.src||"";var n=e.imgUrl.lastIndexOf(".webp");return-1!=n&&(e.imgUrl=e.imgUrl.slice(0,n)+".jpg"),!0},resetAndshowLikeButton:function(t,e){var i=this;return i.currentIndex=e,i.setImgConf(t)?i.setLikeButtonPosition(t,e)?(i.imgUrl in i.cache?(i.likeButton[i.isImgMarked(i.imgUrl)?"addClass":"removeClass"]("done"),i.showLikeButton()):i.queryAndshowLikeButton(),void 0):!1:!1},queryAndshowLikeButton:function(){var t=this,e=t.cache,i=t.imgUrl,n=t.likeButton;return t.hasLogin?t.currentQueryImgUrl==i?!1:(t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){var o=t.xiangceUrl+"opencom/picture/fav/query?app_id="+t.appid+"&url="+encodeURIComponent(i)+"&callback=?";$.stats.sendRequest("st_mod=fav_img&fr=tb0_forum&st_type=fav_btn_request&from=pic_forums"),t.currentQueryImgUrl=i,$.getJSON(o,function(o){0==o.errno&&o.data&&0!=o.data.status?(e[i]=1,n.addClass("done")):(e[i]=0,n.removeClass("done")),t.showLikeButton()})},200),void 0):(this.showLikeButton(),void 0)},setAreaConf:function(t,e,i){var n=this,o=n.area,r=null;for(var s in o)o[s].tag===t&&(r=o[s]);r[e]=i}}});_.Module.define({path:"common/widget/tbcopy/ZeroClipboard",sub:{get:function(){return this.ZeroClipboard},getClient:function(e){return new this.ZeroClipboard(e)},initial:function(){var e=this;!function(t,n){"use strict";var r,a=t,i=a.document,o=a.navigator,l=a.setTimeout,s=a.Number.parseInt||a.parseInt,u=a.Number.parseFloat||a.parseFloat,c=a.Number.isNaN||a.isNaN,f=a.encodeURIComponent,p=a.Math,d=a.Date,h=a.ActiveXObject,y=a.Array.prototype.slice,v=a.Object.keys,g=a.Object.prototype.hasOwnProperty,m=function(){return"function"==typeof a.Object.defineProperty&&function(){try{var e={};return a.Object.defineProperty(e,"y",{value:"z"}),"z"===e.y}catch(t){return!1}}()?a.Object.defineProperty:void 0}(),b=function(e){return y.call(e,0)},w=function(e,t,n){if("function"==typeof t.indexOf)return t.indexOf(e,n);var r,a=t.length;for("undefined"==typeof n?n=0:0>n&&(n=a+n),r=n;a>r;r++)if(g.call(t,r)&&t[r]===e)return r;return-1},C=function(){var e,t,r,a,i,o,l=b(arguments),s=l[0]||{};for(e=1,t=l.length;t>e;e++)if(null!=(r=l[e]))for(a in r)if(g.call(r,a)){if(i=s[a],o=r[a],s===o)continue;o!==n&&(s[a]=o)}return s},x=function(e){var t,n,r,a;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;r>n;n++)g.call(e,n)&&(t[n]=x(e[n]));else{t={};for(a in e)g.call(e,a)&&(t[a]=x(e[a]))}return t},E=function(e,t){for(var n={},r=0,a=t.length;a>r;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},T=function(e,t){var n={};for(var r in e)-1===w(r,t)&&(n[r]=e[r]);return n},j=function(e){if(null==e)return[];if(v)return v(e);var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t},D=function(e){if(e)for(var t in e)g.call(e,t)&&delete e[t];return e},I=function(e,t){t in e&&"function"==typeof m&&m(e,t,{value:e[t],writable:!1,configurable:!0,enumerable:!0})},k=function(e){return function(){var t;return t=e.now?e.now():(new e).getTime()}}(d),O={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},N="11.0.0",L={},z={},_=null,S={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},F=(function(){var e,t,n,r,a="ZeroClipboard.swf";if(!i.currentScript||!(r=i.currentScript.src)){var o=i.getElementsByTagName("script");if("readyState"in o[0])for(e=o.length;e--&&("interactive"!==o[e].readyState||!(r=o[e].src)););else if("loading"===i.readyState)r=o[o.length-1].src;else{for(e=o.length;e--;){if(n=o[e].src,!n){t=null;break}if(n=n.split("#")[0].split("?")[0],n=n.slice(0,n.lastIndexOf("/")+1),null==t)t=n;else if(t!==n){t=null;break}}null!==t&&(r=t)}}return r&&(r=r.split("#")[0].split("?")[0],a=r.slice(0,r.lastIndexOf("/")+1)+a),a}(),{swfPath:"http://tb2.bdstatic.com/tb/static-common/widget/tbcopy/ZCB_8fd7d9f.swf",trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999}),X=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(g.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))F[t]=e[t];else if(null==O.bridge)if("containerId"===t||"swfObjectId"===t){if(!G(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");F[t]=e[t]}else F[t]=e[t];{if("string"!=typeof e||!e)return x(F);if(g.call(F,e))return F[e]}},A=function(){return{browser:E(o,["userAgent","platform","appName"]),flash:T(O,["bridge"]),zeroclipboard:{version:jt.version,config:jt.config()}}},Y=function(){return!!(O.disabled||O.outdated||O.unavailable||O.deactivated)},$=function(e,t){var n,r,a,i={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&jt.on(n,e[n]);if(a&&a.length){for(n=0,r=a.length;r>n;n++)e=a[n].replace(/^on/,""),i[e]=!0,L[e]||(L[e]=[]),L[e].push(t);if(i.ready&&O.ready&&jt.emit({type:"ready"}),i.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=o.length;r>n;n++)if(O[o[n]]===!0){jt.emit({type:"error",name:"flash-"+o[n]});break}}}return jt},B=function(e,t){var n,r,a,i,o;if(0===arguments.length)i=j(L);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&jt.off(n,e[n]);if(i&&i.length)for(n=0,r=i.length;r>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),o=L[e],o&&o.length)if(t)for(a=w(t,o);-1!==a;)o.splice(a,1),a=w(t,o,a);else o.length=0;return jt},M=function(e){var t;return t="string"==typeof e&&e?x(L[e])||null:x(L)},H=function(e){var t,n,r;return e=J(e),e&&!nt(e)?"ready"===e.type&&O.overdue===!0?jt.emit({type:"error",name:"flash-overdue"}):(t=C({},e),tt.call(this,t),"copy"===e.type&&(r=st(z),n=r.data,_=r.formatMap),n):void 0},P=function(){if("boolean"!=typeof O.ready&&(O.ready=!1),!jt.isFlashUnusable()&&null===O.bridge){var e=F.flashLoadTimeout;"number"==typeof e&&e>=0&&l(function(){"boolean"!=typeof O.deactivated&&(O.deactivated=!0),O.deactivated===!0&&jt.emit({type:"error",name:"flash-deactivated"})},e),O.overdue=!1,ot()}},Z=function(){jt.clearData(),jt.deactivate(),jt.emit("destroy"),lt(),jt.off()},R=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,jt.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&g.call(n,r)&&"string"==typeof n[r]&&n[r]&&(z[r]=n[r])},V=function(e){"undefined"==typeof e?(D(z),_=null):"string"==typeof e&&g.call(z,e)&&delete z[e]},K=function(e){if(e&&1===e.nodeType){r&&(vt(r,F.activeClass),r!==e&&vt(r,F.hoverClass)),r=e,yt(e,F.hoverClass);var t=e.getAttribute("title")||F.title;if("string"==typeof t&&t){var n=it(O.bridge);n&&n.setAttribute("title",t)}var a=F.forceHandCursor===!0||"pointer"===mt(e,"cursor");xt(a),Ct()}},U=function(){var e=it(O.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),r&&(vt(r,F.hoverClass),vt(r,F.activeClass),r=null)},G=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},J=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){C(e,{type:t.toLowerCase(),target:e.target||r||null,relatedTarget:e.relatedTarget||null,currentTarget:O&&O.bridge||null,timeStamp:e.timeStamp||k()||null});var n=S[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&C(e,{target:null,version:O.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&C(e,{target:null,minimumVersion:N}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&C(e,{version:O.version})),"copy"===e.type&&(e.clipboardData={setData:jt.setData,clearData:jt.clearData}),"aftercopy"===e.type&&(e=ut(e,_)),e.target&&!e.relatedTarget&&(e.relatedTarget=W(e.target)),e=q(e)}},W=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?i.getElementById(t):null},q=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var t=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:n,o="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:n,l=wt(t),s=a.screenLeft||a.screenX||0,u=a.screenTop||a.screenY||0,c=i.body.scrollLeft+i.documentElement.scrollLeft,f=i.body.scrollTop+i.documentElement.scrollTop,p=l.left+("number"==typeof e._stageX?e._stageX:0),d=l.top+("number"==typeof e._stageY?e._stageY:0),h=p-c,y=d-f,v=s+h,g=u+y,m="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,C(e,{srcElement:t,fromElement:r,toElement:o,screenX:v,screenY:g,pageX:p,pageY:d,clientX:h,clientY:y,x:h,y:y,movementX:m,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},Q=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},et=function(e,t,n,r){r?l(function(){e.apply(t,n)},0):e.apply(t,n)},tt=function(e){if("object"==typeof e&&e&&e.type){var t=Q(e),n=L["*"]||[],r=L[e.type]||[],i=n.concat(r);if(i&&i.length){var o,l,s,u,c,f=this;for(o=0,l=i.length;l>o;o++)s=i[o],u=f,"string"==typeof s&&"function"==typeof a[s]&&(s=a[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(u=s,s=s.handleEvent),"function"==typeof s&&(c=C({},e),et(s,u,[c],t))}return this}},nt=function(e){var t=e.target||r||null,n="swf"===e._source;switch(delete e._source,e.type){case"error":w(e.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"])&&C(O,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var a=O.deactivated===!0;C(O,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:a,ready:!a});break;case"copy":var i,o,l=e.relatedTarget;!z["text/html"]&&!z["text/plain"]&&l&&(o=l.value||l.outerHTML||l.innerHTML)&&(i=l.value||l.textContent||l.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",i),o!==i&&e.clipboardData.setData("text/html",o)):!z["text/plain"]&&e.target&&(i=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",i));break;case"aftercopy":jt.clearData(),t&&t!==ht()&&t.focus&&t.focus();break;case"_mouseover":jt.activate(t),F.bubbleEvents===!0&&n&&(rt(C({},e,{type:"mouseover"})),rt(C({},e,{type:"mouseenter",bubbles:!1})));break;case"_mouseout":jt.deactivate(),F.bubbleEvents===!0&&n&&(rt(C({},e,{type:"mouseout"})),rt(C({},e,{type:"mouseleave",bubbles:!1})));break;case"_mousedown":yt(t,F.activeClass),F.bubbleEvents===!0&&n&&rt(C({},e,{type:e.type.slice(1)}));break;case"_mouseup":vt(t,F.activeClass),F.bubbleEvents===!0&&n&&rt(C({},e,{type:e.type.slice(1)}));break;case"_click":case"_mousemove":F.bubbleEvents===!0&&n&&rt(C({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},rt=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||e.srcElement||null,r=n&&n.ownerDocument||i,o={view:r.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},l=C(o,e);n&&(r.createEvent&&n.dispatchEvent?(l=[l.type,l.canBubble,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,l),n.dispatchEvent(t))):r.createEventObject&&n.fireEvent&&(t=r.createEventObject(l),n.fireEvent("on"+l.type,t)))}},at=function(){var e=i.createElement("div");return e.id=F.containerId,e.className=F.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Et(F.zIndex),e},it=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},ot=function(){var e,t=O.bridge,n=it(t);if(!t){var r=dt(a.location.host,F),o="never"===r?"none":"all",l=ft(F),s=F.swfPath+ct(F.swfPath,F);n=at();var u=i.createElement("div");n.appendChild(u),i.body.appendChild(n);var c=i.createElement("div"),f="activex"===O.pluginType;c.innerHTML='<object id="'+F.swfObjectId+'" name="'+F.swfObjectId+'" width="100%" height="100%" '+(f?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+s+'"')+">"+(f?'<param name="movie" value="'+s+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+l+'"/></object>',t=c.firstChild,c=null,t.ZeroClipboard=jt,n.replaceChild(t,u)}return t||(t=i[F.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),O.bridge=t||null,t},lt=function(){var e=O.bridge;if(e){var t=it(e);t&&("activex"===O.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else l(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),O.ready=null,O.bridge=null,O.deactivated=null}},st=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&g.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},ut=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(g.call(e,r)){if("success"!==r&&"data"!==r){n[r]=e[r];continue}n[r]={};var a=e[r];for(var i in a)i&&g.call(a,i)&&g.call(t,i)&&(n[r][t[i]]=a[i])}return n},ct=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+k():""},ft=function(e){var t,n,r,i,o="",l=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,n=i.length;n>t;t++)if(g.call(i,t)&&i[t]&&"string"==typeof i[t]){if(r=pt(i[t]),!r)continue;if("*"===r){l=[r];break}l.push.apply(l,[r,"//"+r,a.location.protocol+"//"+r])}return l.length&&(o+="trustedOrigins="+f(l.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+f(e.swfObjectId)),o},pt=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},dt=function(){var e=function(e,t){var n,r,a;if(null!=e&&"*"!==t[0]&&("string"==typeof e&&(e=[e]),"object"==typeof e&&"number"==typeof e.length))for(n=0,r=e.length;r>n;n++)if(g.call(e,n)&&(a=pt(e[n]))){if("*"===a){t.length=0,t.push("*");break}-1===w(a,t)&&t.push(a)}};return function(t,n){var r=pt(n.swfPath);null===r&&(r=t);var a=[];e(n.trustedOrigins,a),e(n.trustedDomains,a);var i=a.length;if(i>0){if(1===i&&"*"===a[0])return"always";if(-1!==w(t,a))return 1===i&&t===r?"sameDomain":"always"}return"never"}}(),ht=function(){try{return i.activeElement}catch(e){return null}},yt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var r=" "+e.className+" ",a=e.className,i=0,o=n.length;o>i;i++)r.indexOf(" "+n[i]+" ")<0&&(a+=" "+n[i]);e.className=a.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},vt=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var r=(" "+e.className+" ").replace(/[\n\t]/g," "),a=0,i=n.length;i>a;a++)r=r.replace(" "+n[a]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}}return e},gt=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(n){return n.replace(e,t)}}(),mt=function(e,t){var n,r,i;return a.getComputedStyle?n=a.getComputedStyle(e,null).getPropertyValue(t):(r=gt(t),n=e.currentStyle?e.currentStyle[r]:e.style[r]),"cursor"!==t||n&&"auto"!==n||(i=e.tagName.toLowerCase(),"a"!==i)?n:"pointer"},bt=function(){var e,t,n,r=1;return"function"==typeof i.body.getBoundingClientRect&&(e=i.body.getBoundingClientRect(),t=e.right-e.left,n=i.body.offsetWidth,r=p.round(t/n*100)/100),r},wt=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,r,o,l=e.getBoundingClientRect();"pageXOffset"in a&&"pageYOffset"in a?(n=a.pageXOffset,r=a.pageYOffset):(o=bt(),n=p.round(i.documentElement.scrollLeft/o),r=p.round(i.documentElement.scrollTop/o));var s=i.documentElement.clientLeft||0,u=i.documentElement.clientTop||0;t.left=l.left+n-s,t.top=l.top+r-u,t.width="width"in l?l.width:l.right-l.left,t.height="height"in l?l.height:l.bottom-l.top}return t},Ct=function(){var e;if(r&&(e=it(O.bridge))){var t=wt(r);C(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Et(F.zIndex)})}},xt=function(e){O.ready===!0&&(O.bridge&&"function"==typeof O.bridge.setHandCursor?O.bridge.setHandCursor(e):O.ready=!1)},Et=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||c(e)?"string"==typeof e&&(t=Et(s(e,10))):t=e,"number"==typeof t?t:"auto"},Tt=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(s=!0,e.version&&(p=t(e.version)),!p&&e.description&&(p=t(e.description)),e.filename&&(f=n(e.filename)))}var a,i,l,s=!1,c=!1,f=!1,p="";if(o.plugins&&o.plugins.length)a=o.plugins["Shockwave Flash"],r(a),o.plugins["Shockwave Flash 2.0"]&&(s=!0,p="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)l=o.mimeTypes["application/x-shockwave-flash"],a=l&&l.enabledPlugin,r(a);else if("undefined"!=typeof e){c=!0;try{i=new e("ShockwaveFlash.ShockwaveFlash.7"),s=!0,p=t(i.GetVariable("$version"))}catch(d){try{i=new e("ShockwaveFlash.ShockwaveFlash.6"),s=!0,p="6.0.21"}catch(h){try{i=new e("ShockwaveFlash.ShockwaveFlash"),s=!0,p=t(i.GetVariable("$version"))}catch(y){c=!1}}}}O.disabled=s!==!0,O.outdated=p&&u(p)<u(N),O.version=p||"0.0.0",O.pluginType=f?"pepper":c?"activex":s?"netscape":"unknown"};Tt(h);var jt=function(){return this instanceof jt?("function"==typeof jt._createClient&&jt._createClient.apply(this,b(arguments)),void 0):new jt};jt.version="2.0.0",I(jt,"version"),jt.config=function(){return X.apply(this,b(arguments))},jt.state=function(){return A.apply(this,b(arguments))},jt.isFlashUnusable=function(){return Y.apply(this,b(arguments))},jt.on=function(){return $.apply(this,b(arguments))},jt.off=function(){return B.apply(this,b(arguments))},jt.handlers=function(){return M.apply(this,b(arguments))},jt.emit=function(){return H.apply(this,b(arguments))},jt.create=function(){return P.apply(this,b(arguments))},jt.destroy=function(){return Z.apply(this,b(arguments))},jt.setData=function(){return R.apply(this,b(arguments))},jt.clearData=function(){return V.apply(this,b(arguments))},jt.activate=function(){return K.apply(this,b(arguments))},jt.deactivate=function(){return U.apply(this,b(arguments))};var Dt=0,It={},kt=0,Ot={},Nt={};C(F,{autoActivate:!0});var Lt=function(e){var t=this;t.id=""+Dt++,It[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),jt.on("*",function(e){return t.emit(e)}),jt.on("destroy",function(){t.destroy()}),jt.create()},zt=function(e,t){var n,r,a,i={},o=It[this.id]&&It[this.id].handlers;if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(a&&a.length){for(n=0,r=a.length;r>n;n++)e=a[n].replace(/^on/,""),i[e]=!0,o[e]||(o[e]=[]),o[e].push(t);if(i.ready&&O.ready&&this.emit({type:"ready",client:this}),i.error){var l=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=l.length;r>n;n++)if(O[l[n]]){this.emit({type:"error",name:"flash-"+l[n],client:this});break}}}return this},_t=function(e,t){var n,r,a,i,o,l=It[this.id]&&It[this.id].handlers;if(0===arguments.length)i=j(l);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)g.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(i&&i.length)for(n=0,r=i.length;r>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),o=l[e],o&&o.length)if(t)for(a=w(t,o);-1!==a;)o.splice(a,1),a=w(t,o,a);else o.length=0;return this},St=function(e){var t=null,n=It[this.id]&&It[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:x(n)),t},Ft=function(e){if(Bt.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=C({},e));var t=C({},J(e),{client:this});Mt.call(this,t)}return this},Xt=function(e){e=Ht(e);for(var t=0;t<e.length;t++)if(g.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===w(this.id,Ot[e[t].zcClippingId])&&Ot[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+kt++,Ot[e[t].zcClippingId]=[this.id],F.autoActivate===!0&&Rt(e[t]));var n=It[this.id]&&It[this.id].elements;-1===w(e[t],n)&&n.push(e[t])}return this},At=function(e){var t=It[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):Ht(e);for(var a=e.length;a--;)if(g.call(e,a)&&e[a]&&1===e[a].nodeType){for(n=0;-1!==(n=w(e[a],r,n));)r.splice(n,1);var i=Ot[e[a].zcClippingId];if(i){for(n=0;-1!==(n=w(this.id,i,n));)i.splice(n,1);0===i.length&&(F.autoActivate===!0&&Vt(e[a]),delete e[a].zcClippingId)}}return this},Yt=function(){var e=It[this.id];return e&&e.elements?e.elements.slice(0):[]},$t=function(){this.unclip(),this.off(),delete It[this.id]},Bt=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=It[this.id]&&It[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&-1!==w(e.target,t),a=e.relatedTarget&&n&&-1!==w(e.relatedTarget,t),i=e.client&&e.client===this;return r||a||i?!0:!1},Mt=function(e){if("object"==typeof e&&e&&e.type){var t=Q(e),n=It[this.id]&&It[this.id].handlers["*"]||[],r=It[this.id]&&It[this.id].handlers[e.type]||[],i=n.concat(r);if(i&&i.length){var o,l,s,u,c,f=this;for(o=0,l=i.length;l>o;o++)s=i[o],u=f,"string"==typeof s&&"function"==typeof a[s]&&(s=a[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(u=s,s=s.handleEvent),"function"==typeof s&&(c=C({},e),et(s,u,[c],t))}return this}},Ht=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},Pt=function(e,t,n){return e&&1===e.nodeType?(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),e):e},Zt=function(e,t,n){return e&&1===e.nodeType?(e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n),e):e},Rt=function(e){if(e&&1===e.nodeType){var t=function(t){(t||a.event)&&jt.activate(e)};Pt(e,"mouseover",t),Nt[e.zcClippingId]={mouseover:t}}},Vt=function(e){if(e&&1===e.nodeType){var t=Nt[e.zcClippingId];"object"==typeof t&&t&&("function"==typeof t.mouseover&&Zt(e,"mouseover",t.mouseover),delete Nt[e.zcClippingId])}};jt._createClient=function(){Lt.apply(this,b(arguments))},jt.prototype.on=function(){return zt.apply(this,b(arguments))},jt.prototype.off=function(){return _t.apply(this,b(arguments))},jt.prototype.handlers=function(){return St.apply(this,b(arguments))},jt.prototype.emit=function(){return Ft.apply(this,b(arguments))},jt.prototype.clip=function(){return Xt.apply(this,b(arguments))},jt.prototype.unclip=function(){return At.apply(this,b(arguments))},jt.prototype.elements=function(){return Yt.apply(this,b(arguments))},jt.prototype.destroy=function(){return $t.apply(this,b(arguments))},jt.prototype.setText=function(e){return jt.setData("text/plain",e),this},jt.prototype.setHtml=function(e){return jt.setData("text/html",e),this},jt.prototype.setRichText=function(e){return jt.setData("application/rtf",e),this},jt.prototype.setData=function(){return jt.setData.apply(this,b(arguments)),this},jt.prototype.clearData=function(){return jt.clearData.apply(this,b(arguments)),this},jt.prototype.getFlashState=function(){return O},"function"==typeof define&&define.amd?define(function(){return jt}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=jt:e.ZeroClipboard=jt}(function(){return this}())}}});
;_.Module.define({path:"common/widget/tbcopy",requires:["common/widget/tbcopy/ZeroClipboard"],sub:{text:"",initial:function(t){var e=$(t.ele),i=t.text,n=this.requireInstance("common/widget/tbcopy/ZeroClipboard"),c=n.get();this.clip=new c(e),this.setText(i)},add:function(t){var e=$(t);return e.length?(this.clip.clip(e),this):!1},remove:function(t){var e=$(t);return"undefined"==typeof t||e.length?(this.clip.unclip(t),this):!1},elements:function(){return $(this.clip.elements())},setText:function(t){var e=this;return this.clip.off("copy"),this.clip.on("copy",function(i){if("function"==typeof t)e.text=t(i);else{if("string"!=typeof t)return!1;e.text=t}i.clipboardData.setData("text/plain",e.text),e.successCallback?e.successCallback():$.dialog.alert("\u590D\u5236\u6210\u529F\uFF01")}),!0},getText:function(){return this.text},getFlashElement:function(){var t=this.clip.getFlashState();return t.bridge},setSuccessCallback:function(t){return this.successCallback=t,!0}}});_.Module.define({path:"common/widget/tbshare",requires:["common/widget/tbshare/tbshare_share","common/widget/tbshare/tbshare_more","common/widget/tbshare/tbshare_all"],sub:{initial:function(e,n){this._addShareComponent(e,n)},_addShareComponent:function(e,n){this.shareInstance=this.requireInstance("common/widget/tbshare/tbshare_share",[n]),this._initMoreInstance(n.moreConfig,n.shareContent);var t=n.moreConfig&&n.moreConfig.position;this._addAllInstanceToContainer(e,t)},_initMoreInstance:function(e,n){e&&(this.moreInstance=this.requireInstance("common/widget/tbshare/tbshare_more",[e]),this.moreInstance.setShareContent(n))},_addMoreInstanceToShareInstance:function(e){if(!this.moreInstance)return!1;if(e){var n=["before","after"],t=$.inArray(e,n);if(0==t)this.shareInstance.$dom.before(this.moreInstance.$dom);else{if(1!=t)throw new Error("moreInstance position error,should be in ["+n.join(",")+"]");this.shareInstance.$dom.after(this.moreInstance.$dom)}}else this.shareInstance.$dom.after(this.moreInstance.$dom)},_addAllInstanceToContainer:function(e,n){var t=$('<div class="tbshare clearfix"></div>');this.shareInstance.$dom.appendTo(t),this._addMoreInstanceToShareInstance(n),t.appendTo(e)},setShareContent:function(e){return this.shareInstance&&this.shareInstance.setShareContent(e),this.moreInstance&&this.moreInstance.setShareContent(e),this},share:function(e){return this.shareInstance?this.shareInstance.share(e):this.moreInstance&&this.moreInstance.shareInstance.share(e),this},showMore:function(){return this.moreInstance?this.moreInstance.showMore():!1},showAll:function(){return this.moreInstance?this.moreInstance.showAll():!1}}});
;var QRCode;!function(){function t(t){this.mode=u.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;r>e;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function o(t,e){this.totalCount=t,this.dataCount=e}function n(){this.buffer=[],this.length=0}function i(){return"undefined"!=typeof CanvasRenderingContext2D}function a(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function s(t,e){for(var r=1,o=h(t),n=0,i=p.length;i>=n;n++){var a=0;switch(e){case l.L:a=p[n][0];break;case l.M:a=p[n][1];break;case l.Q:a=p[n][2];break;case l.H:a=p[n][3]}if(a>=o)break;r++}if(r>p.length)throw new Error("Too long data");return r}function h(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;r>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var r=new t(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,r),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+r][e+o]=r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?!0:!1)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;8>r;r++){this.makeImpl(!0,r);var o=f.getLostPoint(this);(0==r||t>o)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var h=s*n,u=this.modules[i][s];u&&(o.beginFill(0,100),o.moveTo(h,a),o.lineTo(h+n,a),o.lineTo(h+n,a+n),o.lineTo(h,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=f.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],n=t[r];if(null==this.modules[o][n])for(var i=-2;2>=i;i++)for(var a=-2;2>=a;a++)this.modules[o+i][n+a]=-2==i||2==i||-2==a||2==a||0==i&&0==a?!0:!1}},setupTypeNumber:function(t){for(var e=f.getBCHTypeNumber(this.typeNumber),r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var r=0;18>r;r++){var o=!t&&1==(e>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=f.getBCHTypeInfo(r),n=0;15>n;n++){var i=!t&&1==(o>>n&1);6>n?this.modules[n][8]=i:8>n?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;15>n;n++){var i=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=i:9>n?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,n=7,i=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var h=!1;i<t.length&&(h=1==(t[i]>>>n&1));var u=f.getMask(e,o,a-s);u&&(h=!h),this.modules[o][a-s]=h,n--,-1==n&&(i++,n=7)}if(o+=r,0>o||this.moduleCount<=o){o-=r,r=-r;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,r,i){for(var a=o.getRSBlocks(t,r),s=new n,h=0;h<i.length;h++){var u=i[h];s.put(u.mode,4),s.put(u.getLength(),f.getLengthInBits(u.mode,t)),u.write(s)}for(var l=0,h=0;h<a.length;h++)l+=a[h].dataCount;if(s.getLengthInBits()>8*l)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*l+")");for(s.getLengthInBits()+4<=8*l&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;;){if(s.getLengthInBits()>=8*l)break;if(s.put(e.PAD0,8),s.getLengthInBits()>=8*l)break;s.put(e.PAD1,8)}return e.createBytes(s,a)},e.createBytes=function(t,e){for(var o=0,n=0,i=0,a=new Array(e.length),s=new Array(e.length),h=0;h<e.length;h++){var u=e[h].dataCount,l=e[h].totalCount-u;n=Math.max(n,u),i=Math.max(i,l),a[h]=new Array(u);for(var g=0;g<a[h].length;g++)a[h][g]=255&t.buffer[g+o];o+=u;var d=f.getErrorCorrectPolynomial(l),c=new r(a[h],d.getLength()-1),p=c.mod(d);s[h]=new Array(d.getLength()-1);for(var g=0;g<s[h].length;g++){var m=g+p.getLength()-s[h].length;s[h][g]=m>=0?p.get(m):0}}for(var v=0,g=0;g<e.length;g++)v+=e[g].totalCount;for(var _=new Array(v),C=0,g=0;n>g;g++)for(var h=0;h<e.length;h++)g<a[h].length&&(_[C++]=a[h][g]);for(var g=0;i>g;g++)for(var h=0;h<e.length;h++)g<s[h].length&&(_[C++]=s[h][g]);return _};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},l={L:1,M:0,Q:3,H:2},g={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;f.getBCHDigit(e)-f.getBCHDigit(f.G15)>=0;)e^=f.G15<<f.getBCHDigit(e)-f.getBCHDigit(f.G15);return(t<<10|e)^f.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;f.getBCHDigit(e)-f.getBCHDigit(f.G18)>=0;)e^=f.G18<<f.getBCHDigit(e)-f.getBCHDigit(f.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return f.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case g.PATTERN000:return(e+r)%2==0;case g.PATTERN001:return e%2==0;case g.PATTERN010:return r%3==0;case g.PATTERN011:return(e+r)%3==0;case g.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case g.PATTERN101:return e*r%2+e*r%3==0;case g.PATTERN110:return(e*r%2+e*r%3)%2==0;case g.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),o=0;t>o;o++)e=e.multiply(new r([1,d.gexp(o)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:return 8;case u.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var h=-1;1>=h;h++)0>n+h||n+h>=e||(0!=s||0!=h)&&a==t.isDark(o+s,n+h)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var u=0;t.isDark(o,n)&&u++,t.isDark(o+1,n)&&u++,t.isDark(o,n+1)&&u++,t.isDark(o+1,n+1)&&u++,(0==u||4==u)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var g=Math.abs(100*l/e/e-50)/5;return r+=10*g}},d={glog:function(t){if(1>t)throw new Error("glog("+t+")");return d.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return d.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},c=0;8>c;c++)d.EXP_TABLE[c]=1<<c;for(var c=8;256>c;c++)d.EXP_TABLE[c]=d.EXP_TABLE[c-4]^d.EXP_TABLE[c-5]^d.EXP_TABLE[c-6]^d.EXP_TABLE[c-8];for(var c=0;255>c;c++)d.LOG_TABLE[d.EXP_TABLE[c]]=c;r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<t.getLength();n++)e[o+n]^=d.gexp(d.glog(this.get(o))+d.glog(t.get(n)));return new r(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=d.glog(this.get(0))-d.glog(t.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<t.getLength();n++)o[n]^=d.gexp(d.glog(t.get(n))+e);return new r(o,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(t,e){var r=o.getRsBlockTable(t,e);if(void 0==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,i=[],a=0;n>a;a++)for(var s=r[3*a+0],h=r[3*a+1],u=r[3*a+2],l=0;s>l;l++)i.push(new o(h,u));return i},o.getRsBlockTable=function(t,e){switch(e){case l.L:return o.RS_BLOCK_TABLE[4*(t-1)+0];case l.M:return o.RS_BLOCK_TABLE[4*(t-1)+1];case l.Q:return o.RS_BLOCK_TABLE[4*(t-1)+2];case l.H:return o.RS_BLOCK_TABLE[4*(t-1)+3];default:return void 0}},n.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var p=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],m=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}{var r=this._htOption,o=this._el,n=t.getModuleCount();Math.floor(r.width/n),Math.floor(r.height/n)}this.clear();var i=e("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:r.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(i),i.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;n>a;a++)for(var s=0;n>s;s++)if(t.isDark(a,s)){var h=e("use",{x:String(a),y:String(s)});h.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(h)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),v="svg"===document.documentElement.tagName.toLowerCase(),_=v?m:i()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){var o=document.createElement("img"),n=function(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)},i=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)};return o.onabort=n,o.onerror=n,o.onload=i,o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}r._bSupportDataURI===!0&&r._fSuccess?r._fSuccess.call(r):r._bSupportDataURI===!1&&r._fFail&&r._fFail.call(r)}if(this._android&&this._android<=2.1){var r=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,i,a,s,h,u){if("nodeName"in t&&/img/i.test(t.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*r;else"undefined"==typeof u&&(arguments[1]*=r,arguments[2]*=r,arguments[3]*=r,arguments[4]*=r);o.apply(this,arguments)}}var n=function(t,e){this._bIsPainted=!1,this._android=a(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,n=t.getModuleCount(),i=o.width/n,a=o.height/n,s=Math.round(i),h=Math.round(a);e.style.display="none",this.clear();for(var u=0;n>u;u++)for(var l=0;n>l;l++){var g=t.isDark(u,l),f=l*i,d=u*a;r.strokeStyle=g?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=g?o.colorDark:o.colorLight,r.fillRect(f,d,i,a),r.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},n}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),n=Math.floor(e.width/o),i=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var h=0;o>h;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var u=r.childNodes[0],l=(e.width-u.offsetWidth)/2,g=(e.height-u.offsetHeight)/2;l>0&&g>0&&(u.style.margin=g+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();QRCode=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:l.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=a(),this._el=t,this._oQRCode=null,this._oDrawing=new _(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(t){this._oQRCode=new e(s(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=l}();
;_.Module.define({path:"common/widget/tbshare/tbshare_share",requires:["common/widget/tbcopy"],sub:{_baseConfig:{Parnter:{qqzone:{title:"QQ\u7A7A\u95F4",urlTmp:["http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?","url=#{url}&title=#{text}&desc=#{desc}","&summary=#{summary}&site=#{site}&pics=#{pics}"].join("")},tsina:{title:"\u65B0\u6D6A\u5FAE\u535A",urlTmp:["http://service.weibo.com/share/share.php?","url=#{url}&title=#{text}","&pic=#{pics}"].join("")},renren:{title:"\u4EBA\u4EBA\u7F51",urlTmp:["http://widget.renren.com/dialog/share?","resourceUrl=#{url}&srcUrl=#{url}&title=#{text}&description=","&pic=#{pics}"].join("")},tieba:{title:"\u767E\u5EA6\u8D34\u5427",urlTmp:["http://tieba.baidu.com/f/commit/share/openShareApi?","url=#{url}&title=#{text}&desc=#{desc}","&comment=#{summary}&pic=#{pics}"].join("")},weixin:{title:"\u5FAE\u4FE1",urlTmp:[].join("")},copy:{title:"\u590D\u5236\u94FE\u63A5",urlTmp:[].join(""),attr:'onclick="return false;"'},douban:{title:"\u8C46\u74E3",urlTmp:["http://www.douban.com/share/service?","href=#{url}&name=#{text}&text=#{desc}","&image=#{pics}"].join("")},tsohu:{title:"\u641C\u72D0\u5FAE\u535A",urlTmp:["http://t.sohu.com/third/post.jsp?","url=#{url}&title=#{text}","&pic=#{pics}"].join("")}},tmp:{base:['<ul class="">#{share_btns}</ul>'].join(""),btn:['<div class="tbshare_#{short_name} tbshare_icon" #{attr} title="#{title}" data-share="#{short_name}">',"#{text}",'<div class="tbshare_title_box">#{title}</div>',"</div>"].join(""),qrcode:['<div class="tbshare_qrcode_mask">','<div class="tbshare_qrcode_outer">','<div class="tbshare_qrcode_wrapper">',"<h6>\u626B\u4E00\u626B\u5206\u4EAB\u5230\u5FAE\u4FE1</h6>",'<div class="tbshare_qrcode_content"></div>','<div class="tbshare_qrcode_instruction">',"<p>\u6253\u5F00\u5FAE\u4FE1\uFF0C\u70B9\u51FB\u5E95\u90E8\u7684\u201C\u53D1\u73B0\u201D\uFF0C<br/>\u4F7F\u7528\u201C\u626B\u4E00\u626B\u201D\u5373\u53EF\u5C06\u7F51\u9875\u5206\u4EAB\u81F3\u670B\u53CB\u5708\u3002</p>","</div>",'<div class="tbshare_qrcode_close">&#215;</div>',"</div>","</div>",'<div class="tbshare_qrcode_triangle"></div>',"</div>"].join("")},common:{text:document.title,desc:document.title,url:$.tb.location.getHref(),pics:""}},qrcodeSize:90,classList:{normal:"tbshare_wrapper",coco:"tbshare_wrapper_theme_coco"},typeClassList:{normal:"",vertical:"vertical"},initial:function(t){if(t=$.extend({theme:"normal",type:"normal",initialQrcode:!0},t),this.className=this.classList[t.theme],this.typeClass=this.typeClassList[t.type],!t)throw new Error("no tbShare args provided");this.shareContent=$.extend({},this._baseConfig.common,t.shareContent),this.$dom=this._createShareComponent(t.targets),t.initialQrcode&&(this.$qrcode=this._createQrcodeWrapper(),this.$qrcode.appendTo(this.$dom)),this._bindEvents()},getQrcode:function(){return this.$qrcode||(this.$qrcode=this._createQrcodeWrapper(),this.$qrcode.appendTo(this.$dom)),this.$qrcode},share:function(t){var e=this.shareContent||this._baseConfig.common;if("weixin"==t)return this.getQrcode().show(),!1;if("copy"==t)return prompt("\u8BF7\u6309\u4E0B Ctrl+C \u590D\u5236\u94FE\u63A5\u5230\u9ECF\u8D34\u677F",e.url),!1;var r=this._baseConfig.Parnter[t];e=$.extend({},e),e.url+=-1!==e.url.indexOf("?")?"&sharefrom="+t:"?sharefrom="+t,e=this._dataEncodeURI(e),e=$.extend({},e);var i=$.tb.format(r.urlTmp,e);return window.open(i),!1},_createShareComponent:function(t){for(var e="",r="",i="",o=0,s=t.length;s>o;o++)"[object Array]"==Object.prototype.toString.call(t[o])?(r=t[o][0],i=t[o][1]):(r=t[o],i=""),this._baseConfig.Parnter[r]&&(e+=["<li>",$.tb.format(this._baseConfig.tmp.btn,{short_name:r,text:i,title:this._baseConfig.Parnter[r].title,attr:this._baseConfig.Parnter[r].attr||""}),"</li>"].join(""));var n=$.tb.format(this._baseConfig.tmp.base,{share_btns:e}),a=$("<div></div>").addClass(this.className).addClass(this.typeClass).append(n);return a},_createQrcodeWrapper:function(){var t=$(this._baseConfig.tmp.qrcode),e=this.shareContent.url,r=this.qrcodeSize;return $.JsLoadManager.use("http://tb1.bdstatic.com/tb/_/qrcode_f84ab06.js",function(){new window.QRCode(t.find(".tbshare_qrcode_content")[0],{text:e||"http://tieba.baidu.com",width:r,height:r})}),t.on("click",".tbshare_qrcode_mask",function(){t.hide()}),t.on("click",".tbshare_qrcode_close",function(){t.hide()}),t},setQrcodeContent:function(t){var e=this.getQrcode().find(".tbshare_qrcode_content"),r=this.qrcodeSize,i=e.find("img"),o=this;i.length?(i.remove(),e.find("canvas").remove(),new window.QRCode(e[0],{text:t,width:r,height:r})):setTimeout(function(t){o.setQrcodeContent(t)},500,t)},_dataEncodeURI:function(t){var e={};for(var r in t)e[r]=encodeURIComponent(t[r]);return e},_bindEvents:function(){var t=this;this.$dom.on("click",".tbshare_icon",function(){var e=$(this).data("share");return e=e||"tieba",t.share(e)})},_lazyAddTbcopyOnce:function(t){this.tbcopy=this.requireInstance("common/widget/tbcopy",{ele:t,text:$.tb.location.getHref()})},_AddTbcopyOnce:function(){var t=this.$dom.find(".tbshare_copy");this.tbcopy=this.requireInstance("common/widget/tbcopy",{ele:t,text:$.tb.location.getHref()}),this.copyElement=this.tbcopy.getFlashElement()},_getPageImgSrc:function(t){var e=[];return $("img").each(function(r){t>r&&e.push($(this).tbattr("src"))}),e},setShareContent:function(t){return"[object Object]"==Object.prototype.toString.call(t)&&$.extend(this.shareContent,t),t&&t.url!=this.shareContent.url&&this.setQrcodeContent(this.shareContent.url),this.shareContent},hideQrcode:function(){this.getQrcode().hide()}}});
;_.Module.define({path:"common/widget/tbshare/tbshare_more",requires:["common/widget/tbshare/tbshare_share","common/widget/tbshare/tbshare_all"],sub:{_tmp:['<div class="tbshare_more_wrapper">','<a class="tbshare_more_enter" href="#" title="\u66F4\u591A">#{text}</a>','<div class="tbshare_float_wrapper tbshare_more_right"></div>','<div class="tbshare_slide_main">','<div class="tbshare_more_main">','<div class="tbshare_header">',"<h6>\u5206\u4EAB\u5230</h6>","</div>",'<div class="tbshare_main clearfix">',"</div>",'<div class="tbshare_footer"></div>',"</div>","</div>",'<div class="tbshare_float_wrapper tbshare_more_left"></div>',"</div>"].join(""),moreColumnWidth:[120,218],_args:{targets:[["qqzone","QQ\u7A7A\u95F4"],["tieba","\u767E\u5EA6\u8D34\u5427"],["renren","\u4EBA\u4EBA\u7F51"],["tsina","\u65B0\u6D6A\u5FAE\u535A"],["weixin","\u5FAE\u4FE1"],["douban","\u8C46\u74E3"],["tsohu","\u641C\u72D0\u5FAE\u535A"],["copy","\u590D\u5236"]]},initial:function(t){if(!t)throw new Error("no tbMore args provided");this.args=$.extend({text:"",columnNum:2,$container:null,show:!0,noAll:!1},t),this.$dom=this._createBaseDom(this.args.text),this.$moreWrapper=this._createBaseMoreWrapper(this.args.shareContent,this.args.targets),this.columnNum=this.args.columnNum,this.initMoreWrapperWidth(this.args.columnNum),this.args.slide&&-1!=$.inArray(this.args.slide.type,["left","right"])?(this.slide=this.args.slide,this._initSlide()):(this.args.noAll||(this.allInstance=this.requireInstance("common/widget/tbshare/tbshare_all",[]),this.allInstance.setShareContent(this.args.shareContent)),this._bindNormalEvents()),this._addToContainer()},_createBaseDom:function(t){t=t||"";var e=$.tb.format(this._tmp,{text:t});return $(e)},_createBaseMoreWrapper:function(t,e){return this._args.shareContent=t||{},"undefined"!=typeof e&&(this._args.targets=e),this.shareInstance=this.requireInstance("common/widget/tbshare/tbshare_share",[this._args]),this.shareInstance.$dom.appendTo(this.$dom.find(".tbshare_main")),this.$dom.find(".tbshare_more_main")},_bindNormalEvents:function(){var t=this;this.$dom.on("mouseenter",".tbshare_more_enter",function(){t.showMoreInNicePosition()}).on("click",".tbshare_more_enter",function(){return t.showAll()}).mouseleave(function(e){return $(e.relatedTarget)[0]?(t.hideMore(),void 0):!1})},_initSlide:function(){this.slideStatus="hide",this.$slideMain=this.$dom.find(".tbshare_slide_main"),this._setSlideStyle(),this._bindSlideEvents()},_setSlideStyle:function(){var t=this.slide.type,e=this.slide.position||"fixed";if(this.$slideBtn=this.$dom.find(".tbshare_more_"+t),this.$slideBtn.show(),this.showMore(),this.$slideMain.css({width:0}),this.$moreWrapper.css({position:"static"}),this.$dom.addClass("tbshare_slide_wrapper"),this.$dom.find(".tbshare_more_enter").hide(),"right"==t?this.$dom.css({right:0}):this.$dom.css({left:0}),!$.inArray(e,["absolute","fixed"]))throw new Error("The position setting not be supported");this.$dom.css({position:e})},_bindSlideEvents:function(){var t=this;this.$slideBtn.mouseenter(function(){"show"!=t.slideStatus&&(t.slideStatus="show",t.slideShowMore(t.slide.type))}),this.$dom.mouseleave(function(e){return $(e.relatedTarget)[0]?(t.slideStatus="hide",t.slideHideMore(t.slide.type),void 0):!1})},_addToContainer:function(){this.args.$container&&this.$dom.appendTo(this.args.$container),this.args.show&&this.show()},show:function(){this.$dom.show()},hide:function(){this.$dom.hide()},showMore:function(t,e){return"undefined"!=typeof t&&"undefined"!=typeof e&&this.$moreWrapper.css({left:t,top:e}),this.$moreWrapper.show(),this.$moreWrapper},showMoreInNicePosition:function(){var t=$(document).scrollTop()+$(window).height(),e=$(document).scrollLeft()+$(window).width(),i={top:this.$dom.offset().top,left:this.$dom.offset().left,width:this.$moreWrapper.width(),height:this.$moreWrapper.height()},s=0,r=0;i.top+i.height>t?r=-i.height:s+=16,i.left+i.width>e&&(s=-i.width,r+=20),this.showMore(s,r)},initMoreWrapperWidth:function(t){if(t&&t>0&&t<=this.moreColumnWidth.length+1){this.columnNum=t;var e=this.moreColumnWidth[this.columnNum-1];this.$moreWrapper.css({width:e})}},slideShowMore:function(t,e){var i=parseInt(this.$moreWrapper.css("width"));if("left"==t);else if("right"!=t)return!1;e&&this.$moreWrapper.css({top:e}),this.columnNum&&(i=this.moreColumnWidth[this.columnNum-1]+2,this.$slideMain.animate({width:i},100,"linear"))},slideHideMore:function(){this.$slideMain.animate({width:0},100,"linear")},hideMore:function(){this.$moreWrapper.hide()},showAll:function(){return this.allInstance&&this.allInstance.showAll(),!1},setShareContent:function(t){return this.shareInstance.setShareContent(t),this.allInstance&&this.allInstance.setShareContent(t),this}}});
;_.Module.define({path:"common/widget/tbshare/tbshare_popup",requires:["common/widget/tbshare/tbshare_share"],sub:{_tmp:['<div class="tbshare_popup_wrapper">','<div class="tbshare_popup_enter"></div>','<div class="tbshare_popup_main clearfix"></div>',"</div>"].join(""),_sharebase_args:{theme:"coco",targets:["tieba","weixin","tsina","qqzone","copy"],initialQrcode:!1},_popup_args:{$container:null,type:"cross",itemIconPosition:"origin"},initial:function(e){if(!e)throw new Error("no tbMore args provided");this._popup_args=$.extend(this._popup_args,{$container:e.$container,type:e.type,itemIconPosition:e.itemIconPosition}),this._sharebase_args=$.extend(this._sharebase_args,{shareContent:e.shareContent||{},targets:e.targets,type:e.type}),this.$dom=this._createBaseDom(),this.$popupWrapper=this._createBaseMoreWrapper(),this._bindEvents(),this._popup_args.$container.append(this.$dom)},_createBaseDom:function(e){e=e||"";var t=this._tmp,s=$(t);return"vertical"==this._popup_args.type&&s.addClass("popup_vertical"),"left"==this._popup_args.itemIconPosition&&s.addClass("popup_icon_left"),s},_createBaseMoreWrapper:function(){return this.shareInstance=this.requireInstance("common/widget/tbshare/tbshare_share",[this._sharebase_args]),this.shareInstance.$dom.appendTo(this.$dom.find(".tbshare_popup_main")),this.$dom.find(".tbshare_popup_main")},_qrcodeShow:function(){this.shareInstance.getQrcode().show(),this.shareInstance.$dom.find(".tbshare_weixin").addClass("hover_on_qrcode")},_qrcodeHide:function(){this.shareInstance.getQrcode().hide(),this.shareInstance.$dom.find(".tbshare_weixin").removeClass("hover_on_qrcode")},_bindEvents:function(){var e=this;this.$dom.on("mouseenter",".tbshare_popup_main li",function(){$(this).find(".tbshare_weixin").length?e._qrcodeShow():e._qrcodeHide()}),this.$dom.on("mouseenter",function(t){$(this).find($(t.relatedTarget)).length||!$(t.relatedTarget).parent().length,e._qrcodeHide(),e.$popupWrapper.show()}),this.mouseenterInFlash=!1,this.$dom.on("mouseleave",function(t){var s=t.relatedTarget;if(s){if(s==e.shareInstance.copyElement)return e.mouseenterInFlash=!0,void 0}else if(e.mouseenterInFlash)return;e.$popupWrapper.hide(),e._reinitialCopy()});var t=$(this.shareInstance.copyElement);t.parent().on("mouseleave",function(t){var s=t.relatedTarget;e.args.$container.removeClass("copy_mouse_hover"),e.$dom.find($(s))||(e.mouseenterInFlash=!1)}),t.parent().on("mouseenter",function(){e.args.$container.addClass("copy_mouse_hover")})},_reinitialCopy:function(){this.$dom.find(".tbshare_copy .tbshare_title_box").removeClass("copy_done"),this.$dom.find(".tbshare_copy .tbshare_title_box").html("\u590D\u5236\u94FE\u63A5")},_setCopyCallback:function(){var e=this;e.shareInstance.tbcopy.setSuccessCallback(function(){e.$dom.find(".tbshare_copy .tbshare_title_box").addClass("copy_done"),e.$dom.find(".tbshare_copy .tbshare_title_box").html("\u5DF2\u590D\u5236\u94FE\u63A5")})},show:function(){this.$dom.show()},hide:function(){this.$dom.hide()},showMore:function(e,t){return"undefined"!=typeof e&&"undefined"!=typeof t&&this.$moreWrapper.css({left:e,top:t}),this.$moreWrapper.show(),this.$moreWrapper},hideMore:function(){this.$moreWrapper.hide()},setShareContent:function(e){return this.shareInstance.setShareContent(e),this}}});
;_.Module.define({path:"common/widget/tbshare/tbshare_all",requires:["common/widget/tbshare/tbshare_share"],sub:{_tmp:['<div class="tbshare_all_wrapper">',"<h5>\u5206\u4EAB\u5230",'<p class="j_tbshare_all_close"></p>',"</h5>",'<div class="tbshare_all_main"></div>','<div class="tbshare_all_footer"></div>',"</div>"].join(""),_args:{targets:[["qqzone","QQ\u7A7A\u95F4"],["tieba","\u767E\u5EA6\u8D34\u5427"],["renren","\u4EBA\u4EBA\u7F51"],["tsina","\u65B0\u6D6A\u5FAE\u535A"],["weixin","\u5FAE\u4FE1"],["douban","\u8C46\u74E3"],["tsohu","\u641C\u72D0\u5FAE\u535A"],["copy","\u590D\u5236"]]},initial:function(t){t=t||{},this.args=$.extend({show:!1,$container:$("body")},t),this.$container=this.args.$container,this._createElement(),this._bindEvents(),this._addToContainer()},_createElement:function(){this.$dom=$(this._tmp),this.$share_all_main=this.$dom.find(".tbshare_all_main"),this.share=this.requireInstance("common/widget/tbshare/tbshare_share",[this._args]),this.share.$dom.appendTo(this.$share_all_main)},_bindEvents:function(){var t=this;this.$dom.on("click",".j_tbshare_all_close",function(){t.hideAll()})},_addToContainer:function(){this.$container&&this.$container.append(this.$dom),this.args.show&&this.showAll()},setShareContent:function(t){return this.share.setShareContent(t),this},showAll:function(){return this.$dom.show(),this},hideAll:function(){return this.$dom.hide(),this}}});_.Module.define({path:"album/widget/imgLikeAction",requires:["album/component/initApiConfig","common/widget/tbshare"],sub:{_defaultConfig:{sourceURL:"http://tieba.baidu.com/p/"+PageData.thread.thread_id,tags:"\u767E\u5EA6\u8D34\u5427,"+PageData.forum.forum_name+"\u5427",descript:$.tb.subByte(PageData.thread.title,40,""),no_pic_pb:PageData.isPicBa?!1:!0,area:[{container:"#j_p_postlist",tag:".BDE_Image",offset:{x:-4,y:5},minSize:{width:170,height:80}},{container:"#j_p_postlist",tag:".j_user_sign",offset:{x:-4,y:5},minSize:{width:170,height:80}}]},initial:function(){var t=this;t.isLogin=PageData.user.is_login,t.hasNoUn=PageData.user.no_un,t.conf=t._defaultConfig,t.isEnabled=!0,t.initApiConf(),t.createLikeButton(),t.initEvent()},initApiConf:function(){var t=this;t.favConfig=t.use("album/component/initApiConfig",{isLogin:t.isLogin,hasNoUn:t.hasNoUn,conf:t.conf})},initEvent:function(){var t=this;t.bindImgEvent(),t.bindPostEvent(),t.addShareButton(),t.mobileDownloadClick(),t.initCustomEmotion()},initCustomEmotion:function(){var t=this,e=$.cookie("tb_lab"),a={};e&&(a=$.json.decode(e)),a.custom_emotion&&(t.favConfig.likeButton.find(".emotion").show(),t.favConfig.likeButton.on("click",".emotion",function(){this.requireInstanceAsync("common/component/CustomEmotion",{},function(e){e.openDialog({forumId:PageData.forum.forum_id,url:t.favConfig.imgUrl})})}))},bindImgEvent:function(){var t=this;$.each(t.favConfig.area,function(e,a){var i=a.container||document.body,n=a.tag;$(i).on("mouseover",n,{index:e},function(e){t.containerMouseover(e)}),$(i).on("mouseleave",n,function(e){t.containerMouseout(e)})})},bindPostEvent:function(){var t=this,e=t.favConfig,a=e.likeButton;a.delegate(".mark","click",function(){if(!e.hasLogin)return e.loginEvent(),void 0;if(e.currentUpImgUrl==e.imgUrl)return!1;var i=e.uploadUrl+"opencom/picture/fav/upload?app_id="+e.appid+"&descript="+encodeURIComponent(e.descript)+"&uid="+PageData.user.user_id+"&source_url="+encodeURIComponent(e.sourceURL)+"&tags="+encodeURIComponent(e.tags)+"&url="+encodeURIComponent(e.imgUrl)+"&callback=?",n={top:parseInt(a.css("top"),10)-e.area[e.currentIndex].offset.y,left:a.offset().left+40};setTimeout(function(){a.addClass("done")},200),$.stats.sendRequest("st_mod=fav_img&fr=tb0_forum&st_type=fav_btn_click"),e.currentUpImgUrl=e.imgUrl,$.getJSON(i,function(a){switch(a.errno){case 0:t.markSuccess(n);break;case 20026:return e.loginEvent(),void 0;case 20028:return t.markFail(n,".n20028"),void 0;default:return t.markFail(n,".ndefault"),void 0}})}).mouseover(function(){if("undefined"==typeof bdRes2Exe){var t=document.getElementsByTagName("body").item(0),a=document.createElement("script");a.type="text/javascript",a.id="bdres2exejs",a["data-proxy"]="http://tieba.baidu.com/tb/static-album/proxy.html",a.src="http://m.baidu.com/static/as/res2exe/js/res2exe_1.0.4.min.js",a.setAttribute("data-proxy","http://tieba.baidu.com/tb/static-album/proxy.html"),t.appendChild(a)}e.showLikeButton()}).mouseout(function(){e.hideLikeButton()}),$("body").delegate(".sr-bdimgshare-layer","mouseover",function(){e.showLikeButton()}).delegate(".sr-bdimgshare-layer","mouseout",function(){e.hideLikeButton()})},markSuccess:function(t){var e=this;e.favConfig.cache[e.favConfig.imgUrl]=1,"1"!=$.cookie("ablum_hls")&&e.favConfig.likeButton.parent().find(".fav-success").fadeIn("fast",function(){var t=$(this);$.cookie("ablum_hls","1",{expires:30}),setTimeout(function(){t.fadeOut()},3e3)}).css(t)},markFail:function(t,e){var a=this,i=a.favConfig.likeButton.parent().find(".fav-fail");i.find(".text").hide(),i.find(e).show(),i.fadeIn("fast",function(){var t=$(this);setTimeout(function(){t.fadeOut()},2e3)}).css(t)},addShareButton:function(){if(PageData&&("v3"==PageData.page||"pb_bright"==PageData.page)){var t=this,e=t.favConfig,a=this.requireInstance("common/widget/tbshare/tbshare_popup",[{$container:e.likeButton.find(".share"),type:"vertical"}]);e.likeButton.find(".share").mouseover(function(){a.setShareContent({pics:e.imgUrl})})}},containerMouseover:function(t){var e=this;if(e.isEnabled){var a=t.currentTarget,i=t.data.index;e.favConfig.resetAndshowLikeButton(a,i)}},containerMouseout:function(){var t=this;t.favConfig.timer&&clearTimeout(t.favConfig.timer),t.favConfig.hideLikeButton()},mobileDownloadClick:function(){var t=this;$(".fav-toolbar .download").click(function(){$(this).tbattr({data_name:(new Date).getTime(),data_url:t.favConfig.imgUrl,data_size:1024,data_icon:t.favConfig.imgUrl});var e=[];$(".mobile_res").each(function(t,a){var i=bdRes2Exe.getPackageByDom(a);i&&e.push(i)}),bd_app_dl(e),$.stats.sendRequest("fr=tb0_forum&st_mod=picMobile&st_type=imgLikeAction")})},createLikeButton:function(){var t=this,e=['<div class="fav-wrapper" style="">','<div class="fav-toolbar" style="display:none">','<a href="#" class="share j_shareImg" onclick="return false"></a>','<a class="download mobile_res"  title="\u4E0B\u8F7D\u56FE\u7247\u5230\u624B\u673A"  href="javascript:;" hidefocus="true" data_type="picture" data_url="" data_name="" data_icon="" data_size="1048576" data_from="1001714x" ></a>','<a class="mobile_res" data_type="apk" data_url="http://tb1.bdstatic.com/client/operate/android/tieba_pc_picdownload.apk" data_name="\u767E\u5EA6\u8D34\u5427" data_icon="http://static.tieba.baidu.com/tb/static-album/img/tieba_client.png" data_size="12488145"  data_from="1001714x"  data_versionname="4.4.1"  data_versioncode="4" data_package="com.baidu.tieba" data_detail_type="soft" style="display:none" ></a>','<a href="javascript:void(0)" style="display: none;" class="emotion" title="\u6DFB\u52A0\u5230\u81EA\u5B9A\u4E49\u8868\u60C5"></a>',"</div>",'<div class="fav-success" style="display:none;">','<span class="ico"></span>','<span class="text">\u4F7F\u7528\u4E91\u76F8\u518C\u6536\u85CF\u5DE5\u5177\uFF0C\u6279\u91CF\u6536\u85CF\u7CBE\u7F8E\u56FE\u7247\uFF01<a target="_blank" href="http://xiangce.baidu.com/tool/shoucang/">\u7ACB\u5373\u5B89\u88C5</a></span>',"</div>",'<div class="fav-fail" style="display:none;">','<span class="ico"></span>','<span class="text ndefault">\u7CFB\u7EDF\u7E41\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01</span>','<span class="text n20028">\u62B1\u6B49\uFF0C\u60A8\u6CA1\u6709\u6743\u9650\u8FDB\u884C\u8BE5\u9879\u64CD\u4F5C</span>',"</div>",'<div id="album_hl_container" style="display:none;"></div>',"</div>"].join("");t.favConfig.likeButton=$(e).appendTo(document.body).find(".fav-toolbar")},getMouseHoverDirection:function(t){var e=t.target,a=e.offsetWidth,i=e.offsetHeight,n=$(e).offset(),o=(t.pageX-n.left-a/2)*(a>i?i/a:1),s=(t.pageY-n.top-i/2)*(i>a?a/i:1),r=Math.round((Math.atan2(s,o)*(180/Math.PI)+180)/90+3)%4,c=new Array("up","right","bottom","left");return c[r]||"bottom"},enableSelf:function(t){var e=this;e.isEnabled=t,t||e.favConfig.hideLikeButton()}}});_.Module.define({path:"ppb/widget/pic_act_vote",requires:["pcommon/component/force_login"],sub:{initial:function(t){this.option=t,this.voteData={tbs:PageData.tbs,word:PageData.forum.forum_name,forum_id:PageData.forum.forum_id},this.bindEvent()},bindEvent:function(){var t=this;$("body").delegate(".j_pic_act_vote_btn","click",function(a){var e=$(this),o=e.closest(".j_pic_act_vote_area"),n=o.find(".j_pic_act_vote_num"),i=Number(n.text());if(a.preventDefault(),t.repostData=o.getData(),!PageData.user.is_login){var c=$.tb.unescapeHTML($.tb.location.getHref());return _.Module.use("pcommon/component/force_login",[c,"userbar","dialog","pic_act_vote"]),!1}if(PageData.user.is_like)t._postVoteData().done(function(a){"0"==a.no?(e.text("\u5DF2\u6295\u7968"),e.addClass("act_voted_btn"),n.animate({"margin-top":"-10px"},300).animate({"margin-top":"0"},300).text(i+1)):"40"==a.no?t._showCaptchaDialog(a,e,n,i):"2130008"==a.no?t._showCanvaDialog():t._showErrorTip(a.no)});else{var s=new $.dialog({html:'<p>\u53C2\u4E0E\u6295\u7968\u9700\u8981\u5148\u5173\u6CE8\u672C\u5427\u54E6~</p><br><a href="#" class="ui_btn ui_btn_m j_like"><span><em>\u5173\u6CE8\u672C\u5427</em></span></a>',width:420,holderClassName:"dialog_tip_holder"});s.element.on("click",".j_like",function(a){a.preventDefault(),_.Module.use("puser/widget/myTieba",[{}],function(t){t.dolike()}),$.stats.track("vote","plat_like","pb","click",{obj_id:t.repostData.activity_id}),s.close()})}})},_postVoteData:function(){var t=this;t.voteData.activity_id=t.repostData.activity_id,t.voteData.post_id=t.repostData.post_id,t.voteData.user_id_ed=t.repostData.user_id,t.voteData.user_name_ed=t.repostData.user_name,t.voteData.thread_id=t.repostData.thread_id,t.voteData.component_input={},t.voteData.component_input[t.repostData.component_id]={component_id:t.repostData.component_id,component_type:t.repostData.component_type},t.voteData.ie="utf-8";var a=$.post("/genesis/submit/commit?",t.voteData,function(){},"json");return a},_showCaptchaDialog:function(t,a,e,o){var n=this;_.Module.use("pcommon/component/CaptchaDialog",{title:"\u6295\u7968",message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\u5B8C\u6210\u6295\u7968~\u652F\u6301\u4F60\u559C\u6B22\u7684\u7F8E\u56FE\uFF01",vCode:t.data.vcode.captcha_vcode_str,vCodeType:t.data.vcode.captcha_code_type,paramsCallback:function(){return n.voteData}},function(t){t.bind("onclose",function(){return t.hide(),!1}),t.bind("onaccept",function(){n.voteData.vcode=t.getInputValue(),n.voteData.vcode_md5=t.getVCode(),n._postVoteData().done(function(t){"0"==t.no?(a.text("\u5DF2\u6295\u7968"),a.addClass("act_voted_btn"),e.animate({"margin-top":"-10px"},300).animate({"margin-top":"0"},300).text(o+1)):"40"==t.no?n._showCaptchaDialog(t):"2130008"==t.no?n._showCanvaDialog():n._showErrorTip(t.no)})}),t.show()})},_showCanvaDialog:function(){var t=this,a=['<div id="poster_canva_dialog" class="canva_dlg_wrap">','<h3 class="canva_msg_title">\u4F60\u4ECA\u5929\u5DF2\u7ECF\u6295\u8FC7\u7968\u4E86</h3>','<p class="canva_msg_cnt">\u5982\u679C\u60F3\u652F\u6301TA\uFF0C\u53EF\u4EE5\u8F6C\u8D34\u5230\u5176\u4ED6\u5427\u5E2E\u5FD9\u62C9\u7968\u54E6\uFF01</p>','<div class="canva_btn_group">','<a href="#" id="canva_repost_btn" '+$.tb.dataField(t.repostData)+' class="ui_btn ui_btn_m j_pic_act_repost"><span><em>\u8F6C\u53D1\u62C9\u7968</em></span></a>','<a href="#" id="canva_cancel_btn" class="ui_btn ui_btn_sub_m"><span><em>\u4E0B\u6B21\u518D\u8BF4</em></span></a>',"</div>","</div>"].join(""),e=new $.dialog({html:a,width:380,draggable:!0,closeable:!0,noTitle:!0});e.element.on("click","#canva_repost_btn",function(t){t.preventDefault(),e.hide()}).on("click","#canva_cancel_btn",function(t){t.preventDefault(),e.close()})},_showErrorTip:function(t){var a="";switch(Number(t)){case 8:case 9:case 220012:a="\u4F60\u5728\u672C\u5427\u88AB\u5C01\u7981\uFF0C\u6682\u65F6\u4E0D\u80FD\u8FDB\u884C\u64CD\u4F5C";break;case 220:a="\u4F60\u88AB\u5427\u4E3B\u52A0\u5165\u9ED1\u540D\u5355\uFF0C\u6682\u65F6\u4E0D\u80FD\u8FDB\u884C\u64CD\u4F5C";break;case 2344:case 3110003:a="\u540C\u65F6\u6709\u592A\u591A\u4EBA\u5728\u6295\u7968\uFF0C\u8BF7\u7A0D\u540E\u518D\u6765~";break;default:a="\u670D\u52A1\u5668\u51FA\u9519\u5566~\u8BF7\u518D\u8BD5\u4E00\u6B21\u5427"}var e=new Array;e.push('<div style="text-align:center;color:#333333;font-size:14px;padding:10px 10px 0;">'+a+"</div>");new $.dialog({html:e.join(""),showTitle:!0,draggable:!1,width:300,height:40})}}});_.Module.define({path:"ppb/widget/pic_act_repost",requires:["pcommon/component/force_login","pcommon/widget/PostService"],sub:{ORIGINAL_PIC_URL_PREFIX:"http://imgsrc.baidu.com/forum/pic/item/",THUMBNAIL_PIC_URL_PREFIX:"http://imgsrc.baidu.com/forum/abpic/item/",MAX_REPOST_SHOW_FORUMS:20,initial:function(){this.postService=this.use("pcommon/widget/PostService"),this.bindEvent()},bindEvent:function(){var e=this;$("body").delegate(".j_pic_act_repost","click",function(t){var i=$(this);return e.repostData=i.getData(),t.preventDefault(),e.repostCheck(),!1})},repostCheck:function(){var e=this;if(!PageData.user.is_login){var t=$.tb.unescapeHTML($.tb.location.getHref());return e.use("pcommon/component/force_login",t,"userbar","dialog","pic_act_repost"),!1}var i;PageData.user_forumlist&&PageData.user_forumlist.info&&(e.userFormList=PageData.user_forumlist.info),PageData.user.user_forum_list&&PageData.user.user_forum_list.info&&(e.userFormList=PageData.user.user_forum_list.info),void 0!==e.userFormList?(e.MAX_REPOST_SHOW_FORUMS=e.userFormList.length>20?20:e.userFormList.length,0===e.userFormList.length?(i="\u4EB2\uFF0C\u76EE\u524D\u53EA\u80FD\u8F6C\u53D1\u5230\u4F60\u5173\u6CE8\u7684\u5427\u54E6\uFF0C\u8BF7\u5148\u53BB\u201C\u5173\u6CE8\u201D\u4F60\u8981\u8F6C\u53D1\u5230\u7684\u5427\u3002",e.showWarningTip(i)):1==e.userFormList.length&&e.userFormList[0].forum_name==PageData.forum.forum_name?(i="\u4EB2\uFF0C\u53EA\u80FD\u8F6C\u53D1\u5230\u672C\u5427\u4E4B\u5916\u4F60\u5173\u6CE8\u8FC7\u7684\u5427\u54E6\uFF0C\u8BF7\u5148\u53BB\u201C\u5173\u6CE8\u201D\u4F60\u8981\u8F6C\u53D1\u5230\u7684\u5427\u3002",e.showWarningTip(i)):e.showRepostDialog()):(i="\u4EB2\uFF0C\u76EE\u524D\u53EA\u80FD\u8F6C\u53D1\u5230\u4F60\u5173\u6CE8\u7684\u5427\u54E6\uFF0C\u8BF7\u5148\u53BB\u201C\u5173\u6CE8\u201D\u4F60\u8981\u8F6C\u53D1\u5230\u7684\u5427\u3002",e.showWarningTip(i))},showRepostDialog:function(){var e=this;e.dialog?(e.dialog.show(),e.dialog.setContent(e.renderDialogHTML())):e.dialog=new $.dialog({html:e.renderDialogHTML(),title:"\u8F6C\u53D1",width:460,draggable:!0,closeable:!0,hideOnclose:!0}),e.getElement(),$.browser.msie&&_.Module.use("pcommon/component/Placeholder",[e.$pic_repost_desc,"\u5C0F\u4F19\u4F34\u4EEC\u5FEB\u70B9\u513F\u6765\u7ED9"+e.curRole+"\u6295\u7968\u5427"]),e.bindDialogEvent()},renderDialogHTML:function(){var e=this,t=[],i={},a={},o=PageData.forum.forum_name,r=PageData.user.user_name==e.repostData.user_name?"\u6211":"TA",s=r+"\u6B63\u5728"+o+"\u5427\u53C2\u52A0\u3010"+e.repostData.thread_title+"\u3011\u6D3B\u52A8\u54E6\uFF0C\u6765\u5E2E"+r+"\u6295\u7968\u5427~",p="\u5C0F\u4F19\u4F34\u4EEC\u5FEB\u70B9\u513F\u6765\u7ED9"+r+"\u6295\u7968\u5427",_="",n="";e.curRole=r;for(var c=0;c<e.MAX_REPOST_SHOW_FORUMS;c++)i=e.userFormList[c],a={forum_id:i.id,forum_name:i.forum_name},i.forum_name!=o&&t.push('<a href="#" title="'+i.forum_name+'" '+$.tb.dataField(a)+' class="pic_like_forums_link j_pic_like_forum_link" ><span>'+i.forum_name+"\u5427</span></a>");return _=t.join(""),n=['<div class="pic_repost_dialog" id="pic_repost_dialog">','<div class="pic_repost_item clearfix">','<label for="pic_repost_title" class="pic_repost_label">\u8F6C\u8D34\uFF1A</label>','<input type="text" id="pic_repost_title" class="ui_textfield pic_repost_title_ipt" placeholder="'+s+'" value="'+s+'" />',"</div>",'<div class="pic_repost_item pic_fname_wrap j_pic_fname_wrap ui-front clearfix">','<label for="pic_repost_fname" class="pic_repost_label">\u8F6C\u53D1\u5230\uFF1A</label>','<input type="text" class="ui_textfield pic_repost_fname_ipt" id="pic_repost_fname" />',"</div>",'<div class="pic_like_forums j_pic_like_forums clearfix">'+_+"</div>",'<div class="pic_repost_item">','<label for="pic_repost_desc" class="pic_repost_label">\u7406\u7531\uFF1A</label>','<div class="pic_repost_img_wraper"></div>','<textarea cols="30" rows="10" id="pic_repost_desc" class="ui_textfield pic_repost_desc" maxlength="99" placeholder="'+p+'"></textarea>',"</div>",'<div class="post_btn_group">','<a href="#" id="pic_act_repost_btn" class="ui_btn ui_btn_m"><span><em>\u786E\u8BA4</em></span></a>','<a href="#" id="pic_act_recancel_btn" class="ui_btn ui_btn_sub_m"><span><em>\u53D6\u6D88</em></span></a>',"</div>",'<p class="pic_repost_tip_wrap"><span id="pic_repost_tip" class="pic_repost_tip ele_hidden">\u8F6C\u53D1\u6210\u529F\uFF01</span></p>',"</div>"].join("")},getElement:function(){var e=this,t=e.$dlgRoot=$("#pic_repost_dialog");e.$pic_repost_title=t.find("#pic_repost_title"),e.$pic_repost_fname=t.find("#pic_repost_fname"),e.$pic_repost_desc=t.find("#pic_repost_desc"),e.$j_pic_fname_wrap=t.find(".j_pic_fname_wrap"),e.$j_pic_like_forums=t.find(".j_pic_like_forums"),e.$pic_act_repost_btn=t.find("#pic_act_repost_btn"),e.$pic_act_recancel_btn=t.find("#pic_act_recancel_btn"),e.$pic_repost_tip=t.find("#pic_repost_tip")},bindDialogEvent:function(){var e=this,t={},i=e.THUMBNAIL_PIC_URL_PREFIX+e.repostData.pic_encode+".jpg";e.dialog.element.find(".pic_repost_img_wraper").css({"background-image":"url("+i+")"}),$.JsLoadManager.use("http://tb1.bdstatic.com/tb/static-pcommon/js/jquery-ui-autocomplete.min.js",function(){e.$pic_repost_fname.autocomplete({source:e.getLikedForumName(),minLength:0}),e.$pic_repost_fname.bind("click",function(){$(this).autocomplete("search","")})}),e.$pic_act_repost_btn.bind("click",function(t){$(this);return t.preventDefault(),""==e.$pic_repost_title.val()?(e.showErrorTip("\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"),!1):""==e.$pic_repost_fname.val()?(e.showErrorTip("\u8BF7\u9009\u62E9\u8981\u8F6C\u53D1\u7684\u5427"),!1):$.browser.msie&&e.$pic_repost_desc.val().length>99?(e.showErrorTip("\u8F6C\u8D34\u7406\u7531\u6700\u591A\u53EA\u80FD\u8F93\u516599\u4E2A\u6C49\u5B57\u54E6~"),!1):(e.sendRepost(),void 0)}),e.$pic_act_recancel_btn.bind("click",function(t){t.preventDefault(),"pb"==PageData.product&&"poster"==e.repostData.canva_from?setTimeout(function(){var t=$.tb.location.getHash(),i=$.tb.location.getPathname();i=="/p/"+e.repostData.thread_id?"#pic_sort_new"!=t?($.tb.location.setHref("/p/"+e.repostData.thread_id+"#pic_sort_new"),$.tb.location.reload()):$.tb.location.reload():$.tb.location.setHref("/p/"+e.repostData.thread_id+"#pic_sort_new"),e.dialog.hide()},1e3):e.dialog.hide()}),e.$j_pic_like_forums.delegate(".j_pic_like_forum_link","click",function(i){var a=$(this);return i.preventDefault(),t=a.getData(),e.$pic_repost_fname.val(t.forum_name.replace(/\s/g," ")).trigger("change"),e.$j_pic_fname_wrap.find("a").remove(),e.$j_pic_fname_wrap.append(a.clone()),e.$pic_repost_fname.css("color","#fff").tbprop("readonly","readonly").autocomplete({disabled:!0}),a.siblings().removeClass("seleted_forum_link"),a.addClass("seleted_forum_link"),!1}),e.$j_pic_fname_wrap.delegate(".j_pic_like_forum_link","click",function(t){var i=$(this),a=$.tb.unescapeHTML(i.tbattr("title"));return t.preventDefault(),e.$pic_repost_fname.val("").trigger("change"),e.$j_pic_like_forums.find('a[title="'+a+'"]').removeClass("seleted_forum_link"),e.$pic_repost_fname.css("color","#000").tbprop("readonly",!1).autocomplete({disabled:!1}),i.remove(),!1})},sendRepost:function(){var e=this,t=e.$pic_repost_fname.val(),i=PosterContext.getContext(),a=""==e.$pic_repost_desc.val()?e.$pic_repost_desc.tbattr("placeholder"):e.$pic_repost_desc.val(),o={65535:"\u4F60\u4ECA\u5929\u7684\u8F6C\u8D34\u5DF2\u8FBE\u4E0A\u9650",65534:"\u8FD9\u4E2A\u5427\u4F60\u5DF2\u7ECF\u8F6C\u8FC7\u5566",65533:"\u4ECA\u5929\u8F6C\u8D34\u7684\u4EBA\u592A\u591A\u4E86\uFF0C\u660E\u5929\u518D\u6765\u5427",65532:"\u540C\u65F6\u8F6C\u8D34\u7684\u4EBA\u592A\u591A\u4E86\uFF0C\u8BF7\u7A0D\u7B49\u4E00\u4F1A\u513F\u54C8",3011:"\u53EA\u80FD\u8F6C\u5230\u4F60\u5173\u6CE8\u8FC7\u7684\u5427",308:"\u7528\u6237\u6743\u9650\u4E0D\u8DB3",2523011:"\u53EA\u80FD\u8F6C\u5230\u4F60\u5173\u6CE8\u8FC7\u7684\u5427"};for(var r in o)!function(t){e.postService.resultHandlerManager.registerHandler(t,function(){e.showErrorTip(o[t])})}(r);e.postService.success(function(t,i){e.$pic_repost_tip.text("\u8F6C\u53D1\u6210\u529F\uFF01").removeClass("ele_hidden"),e.$pic_repost_tip.prepend('<img src="/tb/static-ppb/img/success.gif" alt="ok"/>'),e.$pic_repost_tip.append('<a href="/p/'+i.new_thread_id+'" target="_blank">\u67E5\u770B\u8F6C\u8D34</a>'),"pb"==PageData.product&&void 0!==e.repostData.canva_from&&"poster"==e.repostData.canva_from?setTimeout(function(){var t=$.tb.location.getHash();"#pic_sort_new"!=t?$.tb.location.setHref("/p/"+e.repostData.thread_id+"#pic_sort_new"):$.tb.location.reload()},1e3):setTimeout(function(){$.tb.location.reload()},1e3)}),e.postService.post("repost",{ptid:e.repostData.thread_id,ftid:e.forumIdMap[t],title:e.$pic_repost_title.val(),content:e.repostData.pic_encode+"#"+a,ie:"utf-8",tbs:PageData.tbs,new_vcode:1,tag:11,ppid:e.repostData.post_id,activity_id:e.repostData.activity_id,act_type:"photo"},i)},getLikedForumName:function(){for(var e=this,t=e.userFormList.length,i=[],a={},o={},r="",s=0;t>s;s++)o=e.userFormList[s],r=$.tb.unescapeHTML(o.forum_name.replace(/\s/g," ")),o.forum_name!=PageData.forum.forum_name&&i.push(r),a[r]=o.id;return e.forumIdMap=a,i},showWarningTip:function(e){var t=new Array;t.push('<div style="text-align:center;color:#333333;font-size:14px;padding:11px">'+e+"</div>");new $.dialog({html:t.join(""),title:"\u6E29\u99A8\u63D0\u793A",showTitle:!0,draggable:!1,width:300,holderClassName:"pat-noTitle"})},showErrorTip:function(e){var t=this;t.$dlgRoot.addClass("msg_dialog_holder"),t.$pic_repost_tip.text(e).removeClass("ele_hidden"),setTimeout(function(){t.$pic_repost_tip.addClass("ele_hidden"),t.$dlgRoot.removeClass("msg_dialog_holder")},1500)}}});_.Module.define({path:"pcommon/component/Card",requires:[],sub:{_option:{},_j_card:null,_open_timer:null,_close_timer:null,_is_show:!1,_is_first_show:!0,_default_option:{content:"",arrow_dir:"down",arrow_pos:{},card_css:{width:170,"z-index":1001},arrow_req:!0,auto_positon:!1,event_target:null,offset:{x:0,y:0},card_leave_display:!1,card_hover_show:!0,card_leave_hide:!1,attr:"",wrap:$("body")},initial:function(t){var i=this;i._option=$.extend(!0,{},i._default_option,t),this._buildCard()},_buildCard:function(){var t=this._option,i=this._genericTpl(),e=t.wrap;this._j_card=$(i),this._j_card.find(".j_content").html(t.content),e.append(this._j_card),delete t.card_css.height,this._j_card.css(t.card_css),t.card_css.height=this._j_card.find(".j_content").outerHeight(!0),this._arrow=this._j_card.find(".j_ui_white_arrow"),void 0===t.arrow_pos.left&&(this._arrow_left=t.card_css.width/2-10,this._arrow.css({left:this._arrow_left})),this._arrow.css(t.arrow_pos),t.arrow_req||this._j_card.find(".j_ui_white_arrow").hide(),t.auto_positon&&this._autoPosition()},_autoPosition:function(){var t=this._option,i={},e=$(window).height(),_=$(window).width(),o=($(document).scrollLeft(),$(document).scrollTop()),r=(t.event_target.innerWidth(),t.event_target.innerHeight()),s="",a={x:t.event_target.offset().left-t.card_css.width/2+t.event_target.outerWidth(!0)/2,y:t.event_target.offset().top-t.card_css.height-10,width:this._j_card.innerWidth(),height:this._j_card.innerHeight()+this._arrow.innerHeight()};i.left=a.x,i.top=a.y;var n=t.arrow_pos.left||this._arrow_left,d=15,h=_;_<$(document).width()&&(h=$(document).width());var c=h-(t.card_css.width+d);i.left<d?(n+=i.left-d,i.left=d):i.left>c&&(n+=i.left-c,i.left=c),i.top<o?(s="up",i.top+=r+(a.height||0),i.top-=t.offset.y):(i.top+=i.top+r>o+e?-r-(a.height||0):0,s="down",i.top+=t.offset.y),this._arrow.removeClass("ui_white_down").removeClass("ui_white_up").addClass("ui_white_"+s).css({left:n}),this._j_card.css(i)},_genericTpl:function(){var t=this._option.attr,i=this._option.arrow_dir,e=['<div class="ui_card_wrap" '+t+' style="visibility: hidden">','<div class="j_content ui_card_content ">',"</div>",'<span class="j_ui_white_arrow arrow ui_white_'+i+'"></span>',"</div>"].join("");return e},showCard:function(t){var i=this;i._close_timer&&clearTimeout(i._close_timer),t&&"delayShow"==t.type?(i._open_timer&&clearTimeout(i._open_timer),i._open_timer=setTimeout(function(){i._showCardDo()},t.time)):i._showCardDo()},closeCard:function(t){var i=this;i._open_timer&&clearTimeout(i._open_timer),t&&"delayClose"==t.type?i._close_timer=setTimeout(function(){i._closeCardDo()},t.time):i._closeCardDo()},hideCard:function(t){var i=this;i._open_timer&&clearTimeout(i._open_timer),t&&"delayHide"==t.type?i._close_timer=setTimeout(function(){i._hideCardDo()},t.time):i._hideCardDo()},_showCardDo:function(){var t=this;t._is_first_show&&(this._j_card.bind("mouseenter",function(){t._option.card_hover_show&&(t._is_show=!0)}),this._j_card.bind("mouseleave",function(){return t._option.card_leave_display?!1:(t._is_show=!1,t._option.card_leave_hide?t.hideCard():t.closeCard(),void 0)}),t._is_first_show=!1),this._j_card.css({visibility:"visible"})},_closeCardDo:function(){var t=this;this._j_card&&!this._is_show&&t._j_card.remove()},_hideCardDo:function(){var t=this;this._j_card&&!this._is_show&&t._j_card.css({visibility:"hidden"})},setContent:function(t){var i=this._option;if(null!==this._j_card){var e=this._j_card.find(".j_content");e.html(t),i.card_css.height=e.outerHeight(!0),this._j_card.css({height:i.card_css.height}),i.auto_positon&&this._autoPosition()}}}});_.Module.define({path:"ppb/widget/postList/FeedBack",sub:{initial:function(){this.autoResponseHelp(),this.autoResponseForNotLouzhu(),this.autoResponseClickEvt()},autoResponseForNotLouzhu:function(){0!=$(".not-louzhu-response").length&&$(".not-louzhu-response").each(function(e,l){var p=$(l).data("replyHelp"),t="",a={content:"",arrow_dir:"up",bubble_css:{top:0,left:0,right:10,width:280},arrow_pos:{left:30},attr:" id='tb_message_tip_n' ",wrap:$(l),closeBtn:!1,level:1,arrowReq:!0};1==p?t='<div class="reply-help-tips">\u697C\u4E3B\u6682\u672A\u5BF9\u6B64\u7B54\u590D\u8FDB\u884C\u8BC4\u4EF7\u54E6~</div>':2==p?t='<div class="reply-help-tips">\u697C\u4E3B\u5BF9\u6B64\u7B54\u590D\u8BC4\u4EF7\u4E3A\u201C\u6709\u5E2E\u52A9\u201D\u54E6~</div>':p>2&&(t='<div class="reply-help-tips">\u697C\u4E3B\u5BF9\u6B64\u7B54\u590D\u8BC4\u4EF7\u4E3A\u201C\u65E0\u5E2E\u52A9\u201D\u54E6~\u5C0F\u52A9\u624B\u4F1A\u7EE7\u7EED\u52AA\u529B\u54D2~</div>',a.bubble_css.width=345),a.content=t;var i=new UiBubbleTipBase(a);i.showBubble()})},autoResponseHelp:function(){if(0!=$("#plReplyHelpBubble").length){var e={content:"",arrow_dir:"up",bubble_css:{top:0,left:0,right:10,width:280},arrow_pos:{left:30},attr:" id='tb_message_tip_n' ",wrap:$("#plReplyHelpBubble"),closeBtn:!1,level:1,arrowReq:!0},l=$("#plReplyHelpBubble").data("replyHelp");1==l?e.content='<div class="reply-help-tips">\u4EB2\uFF0C\u4EE5\u4E0A\u5185\u5BB9\u662F\u5426\u89E3\u51B3\u4E86\u60A8\u7684\u95EE\u9898\u5462\uFF1F</div><div class="reply-help-tips"><label>\u662F<input type="radio" name="p-is-helpable" value="2"/></label><label>\u5426<input type="radio" name="p-is-helpable" value="0"/></label></div><ul class="p-not-helpable"><li><label><input type="radio" value="4" name="why-nothelp"/>\u592A\u7B80\u5355\u7528\u4E0D\u4E0A</li></label><li><label><input type="radio" value="8" name="why-nothelp"/>\u5B57\u592A\u591A\u4E0D\u60F3\u770B</li></label><li><label><input type="radio" value="16" name="why-nothelp"/>\u592A\u590D\u6742\u770B\u4E0D\u61C2</li></label><li><label><input type="radio" value="32" name="why-nothelp"/>\u641C\u7D22\u5230\u7684\u5185\u5BB9\u4E0D\u5339\u914D</li></label></ul>':l>1&&(e.content='<div class="reply-help-tips">\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF0C\u5C0F\u52A9\u624B\u4F1A\u7EE7\u7EED\u52AA\u529B\u54D2~</div>');var p=new UiBubbleTipBase(e);p.showBubble(),this.autoResponseClickEvt()}},autoResponseClickEvt:function(){var e=this;$("#plReplyHelpBubble").on("click",".reply-help-tips input",function(){var l=$(this).val(),p={};2==l?($("#plReplyHelpBubble .p-not-helpable").hide(),p={thread_id:$("#plReplyHelpBubble").data("threadId"),reply_pid:$("#plReplyHelpBubble").data("postId"),reply_help:l},e.autoResponsePost(p)):$("#plReplyHelpBubble .p-not-helpable").show()}).on("click",".p-not-helpable li input",function(){var l={thread_id:$("#plReplyHelpBubble").data("threadId"),reply_pid:$("#plReplyHelpBubble").data("postId"),reply_help:$(this).val()};e.autoResponsePost(l)})},autoResponsePost:function(e){var l=this;$.post("/hermes/commit/help",e,function(e){e.errno||($("#plReplyHelpBubble").html("").data("replyHelp",2),l.autoResponseHelp())},"json")}}});
;_.Module.define({path:"ppb/widget/postList/PostPic",sub:{initial:function(){"album_pb"!=PageData.pageType&&this._bindOpenImg()},_isAlbumImg:function(t){var e=/^http:\/\/[^\/\?]*?\.baidu\.com[:8082]*\/(\w+)\/([^\/\?]+)\/([^\/\?]+)\/(\w+?)\.(?:webp|jpg|jpeg)/;return e.test(t)},_bindOpenImg:function(){for(var t,e,a,s,i=this,p=$("#j_p_postlist").find(".BDE_Image"),n=$.browser.msie&&$.browser.version<=7,r=0,c=p.length;c>r;r++){var d=p[r];if(d&&(t=$(d),a=t.height(),s=t.width(),i._isAlbumImg(d.src)&&a>=80&&s>=80&&a*s>=1e4&&(t.click(function(t){var a=t.target||t.srcElement,s=1,i=$(a).tbattr("src"),p=$(a).closest(".l_post");if(p){postData=p.getData(),postData.author.user_name!=PageData.thread.author&&(s=0),e=i.substring(i.lastIndexOf("/")+1,i.lastIndexOf("."));var n=$(a).closest(".j_d_post_content").find("#j_pb_repost"),r="";if(0==n.length)r="http://tieba.baidu.com/photo/p?kw="+PageData.forum.name_url+"&flux=1&tid="+PageData.thread.thread_id+"&pic_id="+e+"&pn=1&fp=2&see_lz="+s;else{var c=n.getData();r="http://tieba.baidu.com/photo/p?kw="+c.fname+"&flux=1&tid="+c.tid+"&pic_id="+e+"&pn=1&fp=2&see_lz="+s}window.open(r,"_blank")}}),n?$(d).css("cursor","pointer").tbattr("title","\u70B9\u51FB\u8FDB\u5165\u8FDE\u7EED\u770B\u56FE\u6A21\u5F0F"):$(d).css("cursor","url('http://tb2.bdstatic.com/tb/static-pb/img/cur_zin.cur'),pointer")),a>999)){var o=$(document.createElement("div")),l=$(document.createElement("div"));html=s>160?'<em class="expand"></em><span class="txt">\u70B9\u51FB\u5C55\u5F00\uFF0C\u67E5\u770B\u5B8C\u6574\u56FE\u7247</span>':'<em class="expand"></em><span class="txt-empty"></span>',l.html(html),o.addClass("replace_div").css("width",s),l.addClass("replace_tip").css("width",s-2);var m=t.clone(!0);o.append(m),o.append(l),t.replaceWith(o)}}}}});
;_.Module.define({path:"ppb/widget/postList/HidePost",sub:{initial:function(){1==PageData.forum.shield_post&&this._bindEvent()},_bindEvent:function(){var e,t,a,s,i=$('<div class="user-hide-post-down"></div>'),o=$('<div class="user-hide-post-action"><a href="javascript:void(0)" class="hide-author"></a></div>'),n=!1,d=!1,r={110000:"\u4F60\u8FD8\u6CA1\u6709\u767B\u5F55\uFF0C\u8BF7\u5148\u767B\u5F55\u3002",210009:"\u7CFB\u7EDF\u51FA\u73B0\u9519\u8BEF\u3002",210004:"\u7CFB\u7EDF\u51FA\u73B0\u9519\u8BEF\u3002","000000":"\u64CD\u4F5C\u6210\u529F\u3002"},l=function(l){var p={},u=d?void 0:s.content.post_no;1==u?"hide-post"==l?(p.type=2,p.fname=PageData.forum.forum_name,p.tid=PageData.thread.thread_id):(p.type=1,p.hide_un=t):"hide-post"==l?(p.type=3,p.pid=d?s.spid:s.content.post_id,p.tid=PageData.thread.thread_id):(p.type=1,p.hide_un=t),p.ie="utf-8",$.ajax({url:"/tphide/add",data:p,type:"post",dataType:"json",success:function(s){if(0==s.no)if(n=!1,1==u)$.tb.location.setHref("/f?kw="+PageData.forum.forum_name);else if("hide-post"==l)if(a.close(),i.hide(),o.hide(),$("body").append(i).append(o),d===!1)e.parents("div.l_post").remove();else{var p=e.parent().find("li.lzl_single_post");if(p.length<2){e.parents("div.j_lzl_container").hide().find("li.lzl_li_pager").remove();var h=e.parents("div.j_lzl_wrapper");h.find("a.lzl_link_unfold").show().text("\u56DE\u590D"),h.find("span.lzl_link_fold").hide()}e.remove()}else t==PageData.thread.author?$.tb.location.setHref("/f?kw="+PageData.forum.forum_name):$.tb.location.reload();else{a.close();var c=new $.dialog({html:'<div class="user-hide-post-tip">'+(r[s.no]||"\u7CFB\u7EDF\u51FA\u73B0\u9519\u8BEF\u3002")+"</div>",title:"\u63D0\u793A",width:400,closeable:!0,draggable:!1,show:!0});setTimeout(function(){c.close(),n=!1},4500)}}})};$("#pb_content").delegate(".user-hide-post-action","click",function(e){var i,o=$(e.target).tbattr("class"),r=d?void 0:s.content.post_no;if("hide-post"==o)i=1==r?"\u9690\u85CF1\u697C\u8D34\u5B50\uFF0C\u8BE5\u4E3B\u9898\u7684\u5168\u90E8\u56DE\u590D\u4E5F\u5C06\u88AB\u9690\u85CF<br />\u786E\u8BA4\u8981\u9690\u85CF\u8FD9\u4E2A\u8D34\u5B50\u5417\uFF1F":"\u64CD\u4F5C\u4E4B\u540E\uFF0C\u5C06\u65E0\u6CD5\u6062\u590D\u8FD9\u6761\u8D34\u5B50\u7684\u9690\u85CF\u72B6\u6001<br />\u786E\u8BA4\u8981\u9690\u85CF\u8FD9\u6761\u8D34\u5B50\u5417\uFF1F";else{if("hide-author"!=o)return;i=t==PageData.thread.author?'\u9690\u85CF\u7684\u7528\u6237\u4E3A\u672C\u8D34\u7684\u697C\u4E3B\uFF0C\u64CD\u4F5C\u4E4B\u540E\uFF1A\u8BE5\u4E3B\u9898\u7684\u5168\u90E8\u56DE\u590D\u4E5F\u5C06\u88AB\u9690\u85CF\uFF0C\u4E14<span style="color:red">3\u5929\u5185</span>\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u7528\u6237\u53D1\u5E03\u7684\u6240\u6709\u8D34\u5B50<br />\u786E\u8BA4\u8981\u9690\u85CF'+t+"\u7684\u6240\u6709\u8D34\u5B50\u5417\uFF1F":'\u64CD\u4F5C\u4E4B\u540E\uFF0C<span style="color:red">3\u5929\u5185</span>\u5C06\u65E0\u6CD5\u770B\u5230\u8BE5\u7528\u6237\u53D1\u5E03\u7684\u6240\u6709\u8D34\u5B50<br />\u786E\u8BA4\u8981\u9690\u85CF'+t+"\u7684\u6240\u6709\u8D34\u5B50\u5417\uFF1F"}i+='<div class="user-hide-post-confirm"><button class="confirm">\u786E\u8BA4</button>&nbsp;&nbsp;<button class="cancel">\u53D6\u6D88</button></div>',a=new $.dialog({html:'<div class="user-hide-post-tip">'+i+"</div>",title:"\u63D0\u793A",width:400,closeable:!1,draggable:!1,show:!0}),$("div.user-hide-post-confirm").click(function(e){var t=$(e.target).tbattr("class");"cancel"==t?a.close():"confirm"==t&&n===!1&&(n=!0,l(o))})}).delegate(".user-hide-post-down","click",function(){var a,i=$(this);i.tbattr("class","user-hide-post-up"),o.css({top:parseInt(i.css("top"))+15,right:parseInt(i.css("right"))+2}).appendTo(e),d===!1?(s=e.parents("div.l_post").getData(),t=s.author.user_name):(s=e.getData(),t=s.user_name),a="\u5BF9\u6211\u9690\u85CF\u8BE5\u7528\u6237\u7684\u6240\u6709\u8D34\u5B503\u5929",o.show().find("a.hide-author").html(a)}).delegate(".user-hide-post-up","click",function(){var e=$(this);e.tbattr("class","user-hide-post-down"),o.hide()}).delegate(".p_content","mouseenter",function(){var t=$(this).parents("div.l_post"),a=t.getData();return""==PageData.user.user_name||PageData.user.user_name==(a&&a.author&&a.author.user_name)?!1:(e=$(this),d=!1,window.postDown=$(this).find(".user-hide-post-down"),window.postDown.show(),void 0)}).delegate(".p_content","mouseleave",function(){var e=window.postDown;return"undefined"==typeof e?!1:(e.hasClass("user-hide-post-up")&&e.tbattr("class","user-hide-post-down"),e.hide(),$(this).find(".user-hide-post-action").hide(),void 0)}).find("li.lzl_single_post").live("mouseenter","li.lzl_single_post",function(){e=$(this);var t=e.getData();if(""==PageData.user.user_name||PageData.user.user_name==t.user_name)return!1;i.appendTo(e);var a={};PageData.is_posts_admin||PageData.is_thread_admin?(a=e.find(".j_lzl_o_l").position(),i.css({top:a.top,right:536-a.left}).show()):(a=e.find(".lzl_time").position(),i.css({top:a.top,right:536-a.left+38}).show()),d=!0}).live("mouseleave","li.lzl_single_post",function(){i.hasClass("user-hide-post-up")&&i.tbattr("class","user-hide-post-down"),i.hide(),o.hide()}),window.global=window.global||{},window.global.shieldPost=function(){$("body").append(i).append(o)}}}});
;_.Module.define({path:"ppb/widget/postList/PrintFlower",sub:{initial:function(){this._bindEvent()},_bindEvent:function(){var t=this;$("#j_p_postlist").delegate(".j_print_reward","click",function(){var a=$(this),s=a.tbattr("data-pid"),e=a.tbattr("data-uid");t._introducePrintDialog(s,e)}).delegate(".j_click_flower","click",function(){$.stats.track("stamp_flower_show","fudai","frs/pb","click")}).delegate(".j_award_flower","mouseover",function(){$(this).parent().next(".what_flower").css("display","block")}).delegate(".j_award_flower","mouseout",function(){$(this).parent().next(".what_flower").css("display","none")}).delegate(".what_flower","mouseover",function(){$(this).css("display","block")}).delegate(".what_flower","mouseout",function(){$(this).parent().next(".what_flower").css("display","none")})},_introducePrintDialog:function(t,a){var s=this,e='<p class="stamp_title">\u8BF7\u9009\u62E9\u4F60\u8981\u5956\u52B1\u7684\u5370\u82B1\u6570</p>',i='<input type="radio" name="stamp_num" value="5" checked="checked" /><span class="stamp_number">+5</span>',n='<input type="radio" name="stamp_num" value="10"/><span class="stamp_number">+10</span>',p='<input type="radio" name="stamp_num" value="50"/><span class="stamp_number">+50</span>',o='<input type="radio" name="stamp_num" value="1" /><input type="text" class="stamp_number stamp_input"><span class="stamp_error">\u8BF7\u8F93\u5165\u5370\u82B1\u6570</span>',r=i+n+p+o,l='<div class="stamp_button"><a href="#" class="ui_btn ui_btn_m j_notice_ok"><span><em>\u786E\u5B9A</em></span></a><a href="#" class="ui_btn_disable ui_btn_m_disable print_flower_cancel j_notice_no"><span><em>\u53D6\u6D88</em></span></a><p class="stamp_error_tip">\u60A8\u5DF2\u7ECF\u5956\u52B1\u8FC7\u5566\uFF0C\u8BF7\u52FF\u91CD\u590D\u5956\u52B1</p><p class="stamp_error_tip_limit">\u5956\u52B1\u5DF2\u7ECF\u8FBE\u5230\u6BCF\u5929\u4E0A\u9650~</p></div>',_='<div class="stamp_wrapper">'+e+'<div class="stamp_select">'+r+"</div>"+l+"</div>",c=$.dialog.open(_,{title:"\u5370\u82B1\u5956\u52B1",width:428});$(".j_notice_ok").click(function(e){e.preventDefault(),s._stampAjax(t,a)}),this.bind("showtips",function(t,a){a&&setTimeout(function(){c.close()},500)}),$(".j_notice_no").click(function(t){t.preventDefault(),c.close()})},_stampAjax:function(t,a){var s=this,e=$('input:radio[name="stamp_num"]:checked').val(),i=0;if(1==e){if(i=$(".stamp_input").val(),""==i)return $(".stamp_error").css("display","inline-block"),!1}else i=e;var n={kw:PageData.forum.forum_name,tbs:PageData.tbs,add_point:i,uid:a,post_id:t,ie:"utf-8"};$.post("/platform/fortune/addPoint?",n,function(t){t&&0==t.errno?(_html='<div class="stamp_reword_success">\u5956\u52B1\u6210\u529F</div>',$(".stamp_wrapper").append(_html),s.trigger("showtips",!0)):t&&80014==t.errno?($(".stamp_error_tip_limit").css("display","block"),s.trigger("showtips",!1)):($(".stamp_error_tip").css("display","block"),s.trigger("showtips",!1))},"json")}}});
;_.Module.define({path:"ppb/widget/postList/TbmallGuide",requires:["pcommon/component/Card"],sub:{initial:function(){this._bindEvent()},_private_guide_card:"",_guideTimeoutId:"",_bindEvent:function(){var t=this;$("#j_p_postlist").delegate(".j_tbmall_guide","click",function(){e.preventDefault(),$(window).scrollTop($("[name='sub']").offset().top),$(".edui-btn-medal").click(),e.stopPropagation()}).delegate(".j_nameplate","mouseenter",function(){clearTimeout(t._guideTimeoutId),t._showTip($(this))}).delegate(".j_nameplate","mouseleave",function(){clearTimeout(t._guideTimeoutId),t._guideTimeoutId=setTimeout(function(){t._hideTip($(this))},300)})},_showTip:function(e){var t=this;t._private_guide_card&&t._private_guide_card.closeCard();var a=e.offset(),i=(e.hasClass("j_nameplate")||e.hasClass("p_mall_tail")?a.top:a.top+43,e.hasClass("p_mall_tail")?a.left+132:a.left+105,""),l=180;e.hasClass("j_self_has_nameplate")?(i='<a class="pb_nameplate_recast_guide" href="/tbmall/propslist?category=112&ps=24" target="_blank" style="color: #1d53bf;">\u94ED\u724C\u73B0\u5728\u53EF\u4EE5\u91CD\u94F8\u4E86\u54E6~</a>',l=140):e.hasClass("j_self_nameplate")?(i='<a class="pb_nameplate_recast j_nameplate_recast" href="javascript:;" data-nameplate="'+$.json.encode(e.data("field")).replace(/\"/g,"&quot;")+'">\u91CD\u94F8\u94ED\u724C</a>',l=100):i=e.hasClass("j_self_no_nameplate")?'<div style="height: 28px; line-height:28px"><img style="width: 18px; height: 18px; vertical-align:middle;float:left;margin:5px;" src="/tb/static-ppb/img/t_show_icon.png?v=0318" /><span style="float:left;margin-right: 5px; color:#1d53bf;">\u8D34\u5427\u7279\u6743</span><a href="/tbmall/tshow" target="_blank" class=" ui_btn ui_btn_s" style="margin-top: 2px;"><span><em>\u4F1A\u5458\u514D\u8D39\u4F7F\u7528</em></span></a></div>':'<div style="height: 28px; line-height:28px"><img style="width: 18px; height: 18px; vertical-align:middle;float:left;margin:5px;" src="/tb/static-ppb/img/t_show_icon.png?v=0318" /><span style="float:left;margin-right: 5px; color:#1d53bf;">\u8D34\u5427\u7279\u6743</span><a href="/tbmall/home" target="_blank" class=" ui_btn ui_btn_s" style="margin-top: 2px;"><span><em>\u4F1A\u5458\u514D\u8D39\u4F7F\u7528</em></span></a></div>',t._private_guide_card=t.use("pcommon/component/Card",{content:i,arrow_dir:"left",arrow_pos:{left:-7,top:9},card_css:{top:a.top+(e.outerHeight()-34)/2,left:a.left+e.outerWidth()+7,width:l,height:50}}),t._private_guide_card.showCard(),t._private_guide_card._j_card.on("mouseenter",function(){clearTimeout(t._guideTimeoutId)}).on("mouseleave",function(){t._private_guide_card.closeCard()})},_hideTip:function(){self._private_guide_card&&self._private_guide_card.closeCard()}}});
;_.Module.define({path:"ppb/widget/postList",requires:["ppb/widget/Posts","album/widget/imgLikeAction","ppb/widget/pic_act_vote","ppb/widget/pic_act_repost","ppb/widget/sub_list/subListTotal"],sub:{initial:function(t){var e=this;this.posts=e.use("ppb/widget/Posts"),this.bindOperatePower(t.threadCate),t.isCategoryEdit&&this.requireInstanceAsync("ppb/widget/Admin/ThreadCategory"),this._loadSubList(t),this._processSaveFaceBubble(),this.use("ppb/widget/postList/FeedBack"),this.use("ppb/widget/postList/PostPic"),this.requireInstance("comforum/widget/promoterPostBody",[{pn:t.pn,promoterAttr:t.promoterAttr,promoterMasterTitle:t.promoterMasterTitle,promoterUserIds:t.promoterUserIds}]),this._loadPlaform(),Page.checkLoadedModules("forumList")||(this.use("ppb/widget/postList/HidePost"),this.use("ppb/widget/postList/PrintFlower"),this.use("ppb/widget/postList/TbmallGuide"),this.use("album/widget/imgLikeAction"),this._bindEvents())},_loadSubList:function(t){var e=this;e.use("ppb/widget/postList/Lzl"),t.tailList=PageUnit.load("tail_config"),e._loadSubList=e.use("ppb/widget/sub_list/subListTotal",t),F.use(["datalazyload"],function(t){window.datalazyload=new t($(document.body),{diff:500,autoDestroy:!1,subListOnloadCallback:function(t){e._loadSubList.showLzlPost(t)}})})},_loadPlaform:function(){"12"!=PageData.thread.thread_type||Page.checkLoadedModules("pic_act_vote")||Page.checkLoadedModules("pic_act_repost")||(this.use("ppb/widget/pic_act_vote"),this.use("ppb/widget/pic_act_repost"))},_bindEvents:function(){var t=this,e=$("#pb_content"),i=e.find(".l_post_bright:last"),s=e.find(".left_section").height(),o=e.find(".right_section").height();s>o&&i.addClass("noborder_bottom"),e.delegate(".j_quick_reply, a.p_reply_first","click",function(e){return e.preventDefault(),e.stopPropagation(),PageData.user.is_login?setTimeout(function(){t.fire("wanna_post"),history.pushState("",document.title,$.tb.location.getPathname()+$.tb.location.getSearch())},50):TbCom.process("User","buildLoginFrame",null,null,null,"quick_reply"),!1}).delegate(".j_louzhubiaoshi","mouseenter",function(){var t=$(this),e=t.position(),i={content:"\u70B9\u51FB\u5373\u53EF\u201C\u53EA\u770B\u697C\u4E3B\u201D\u54DF~",arrow_dir:"up",arrow_pos:{left:20},bubble_css:{top:e.top+36,left:e.left,width:140},wrap:t.parent(),closeBtn:!1},s=new UiBubbleTipBase(i);s.showBubble({zIndex:$.getcurzIndex()}),t.one("mouseleave",function(){s.closeBubble()})}).delegate(".j_voice_ad_gif","click",function(){$.stats.track("voice_ad_gif","voice"),$("body").trigger("showvoicedialog",!0)}).delegate(".replace_tip","click",function(){$(this).hide().parent(".replace_div").css("height","auto"),$(this).closest(".j_d_post_content").find(".cnt_act_vote_area").css("z-index",10)}).delegate(".j_lzl_forbidden_tip_close","click",function(){$(this).parent().parent().slideUp()})},_processSaveFaceBubble:function(){var t=$.tb.Storage.get("fisfbb_shown_times")||0,e=$.tb.Storage.get("fisfbb_is_today_shown")||!1,i=new Date;i.setDate(i.getDate()+1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),3>t&&!e&&$(".j_fisfbb").on("click",".j_close",function(){$.tb.Storage.set("fisfbb_is_today_shown",!0,i),$.tb.Storage.set("fisfbb_shown_times",++t),$(this).remove()}).show()},bindOperatePower:function(t){Page.checkLoadedModules("pbAdmin")||(PageData.is_thread_admin||PageData.is_posts_admin)&&_.Module.use("ppb/widget/Admin",[],function(e){e.loadThreadManage(t),e.bindAdminEvents(),e.bindLzlAdminEvents()})}}});_.Module.define({path:"ppb/widget/scrollEvent",sub:{initial:function(){this.isStartListenScroll=!1,this.initListenFunction(),this.initARAttribute(),this.initScrollEvent(),this.initListenAjaxDom()},initListenFunction:function(){var t=this;t.startListenARScroll=function(){var i=t.levels,n=$(window).scrollTop()+t.getHalfScreenHeight();for(var e in i){var o=parseInt(e,10),s=i[o].offsetTop,l=i[o].height,r=i[o].templateId,a=i[o].monitorId,c=i[o].isFlaged;n>=s&&s+l>n&&!c&&($.stats.track("p0248","tpoint","PB","view",{tpointShow:r,line:"PT",action_type:"VIEW_TRUE",obj_id:r,obj_name:a,obj_cpid:0,obj_good_id:0,obj_throw_type:"BY_POST",err_no:0,user_timestamp:Math.round((new Date).getTime()/1e3),pro:"tieba",mid:"adtpoint",urlkey:"adtpoint",log_ver:1.1}),i[o].isFlaged=!0)}}},initARAttribute:function(){var t=this,i=t.getAutoReplys();t.isExitAutoReply&&(t.levels=i)},initScrollEvent:function(){var t=this,i=$(window);t.isExitAutoReply&&(i.on("scroll",t.startListenARScroll),t.isStartListenScroll=!0)},initListenAjaxDom:function(){var t=this,i=$(window);$(document).on("startListenScroll",function(){t.initARAttribute(),!t.isExitAutoReply&&t.isStartListenScroll&&(i.off("scroll",t.startListenARScroll),t.isStartListenScroll=!1),t.isExitAutoReply&&!t.isStartListenScroll&&t.initScrollEvent()})},getAutoReplys:function(){var t=this,i={};return t.isExitAutoReply=!1,$(".l_post").each(function(n){var e=$(this).data("isautoreply"),o=$(this).data("field"),s="";if(o&&o.content&&o.content.pb_tpoint&&(s=o.content.pb_tpoint.monitor_id),e||0===e){var l=$(this).height(),r=$(this).offset().top,a={offsetTop:r,height:l,isFlaged:!1,templateId:e,monitorId:s};i[n]=a,t.isExitAutoReply=!0}}),i},getHalfScreenHeight:function(){return $(window).height()/2}}});_.Module.define({path:"tbmall/widget/TbeanSafeAjax",requires:["tbmall/widget/TbeanSafe"],sub:{initial:function(a){this.options=a||{}},ajax:function(a){var t=this,e=a.success||function(){},n=a.data||{},s=function(s){var i=t.use("tbmall/widget/TbeanSafe",{json:s,sucCallback:function(e){var s=$.extend({},n,e),i=$.extend({},a);i.data=s,t.ajax(i)},tbeanOptions:t.options});i.needCheck()||e(s)};return a.success=s,a.type=a.type||"post",a.dataType=a.dataType||"json",$.ajax(a)},post:function(a,t,e){var n={url:a,data:t,success:e};return this.ajax(n)}}});_.Module.define({path:"common/widget/messenger",requires:["common/widget/messenger/messengerProcesser","common/widget/messenger/messengerTarget"],sub:{initial:function(e,n){if(!e)throw new Error("Messenger name must be asigned");var s=n||"[PROJECT_NAME]";this.name=e,this.prefix=s.toString(),this.supportPostMessage="postMessage"in window,this.origins=[],this.processer=this.requireInstance("common/widget/messenger/messengerProcesser"),this.targets={},this._initListen()},addTarget:function(e,n){this.targets[n]=this.requireInstance("common/widget/messenger/messengerTarget",[this.prefix,e,n])},registerCommand:function(e){this.processer.registerCommand(e)},registerOrigin:function(e){var n=0;for("string"==typeof e&&(e=[e]),n;n<e.length;n++)this.origins.push(e[n])},send:function(e){var n,s=this.targets;for(n in s)s.hasOwnProperty(n)&&s[n].send(e)},_warn:function(e){window.console&&window.console.warn&&window.console.warn(e)},_initListen:function(){var e=this,n=function(n){var s="";if("object"==typeof n){if(!n.data||"string"!=typeof n.data)return window.console&&console.warn("The received message is not type of string"),void 0;if(s=n.data,/^ignoredProject/.test(s))return;if(s.substring(0,e.prefix.length)!==e.prefix)return window.console&&console.warn("The msg type is not avaliable in project "+e.prefix),void 0;if(n.origin&&!e._checkOrigin(n.origin))return window.console&&console.warn("The post origin is not avaliable in project "+e.prefix),void 0}else if(s=n,/^ignoredProject/.test(s))return;s=s.slice(e.prefix.length),s=e._escapeHTML(s);try{s=$.parseJSON(s)}catch(i){throw new Error("The JSON string is not valid")}var r=e.processer.process(s)||{};s.command&&s.shake&&s.shake_id&&e.send($.json.encode({command:s.command+"@"+s.shake_id+"@success",shake:!0,shake_id:s.shake_id,data:r}))};window.messenger=e,this.supportPostMessage?"addEventListener"in document?window.addEventListener("message",n,!1):"attachEvent"in document&&window.attachEvent("onmessage",n):window.navigator[this.prefix+this.name]=n},_escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\s/g,"&nbsp;").replace(/\\"/g,"&quot;")},_checkOrigin:function(e){var n=0,s=this.origins.length;for(n;s>n;n++)if(this.origins[n]===e)return!0;return!1}}});
;_.Module.define({path:"common/widget/messenger/messengerProcesser",requires:[],sub:{_failCommandCacheList:{},initial:function(){this.commandMap={common_login:$.proxy(this.common_login,this),common_register:$.proxy(this.common_register,this),exception_all:$.proxy(this.exception_all,this)}},registerCommand:function(o){this.checkExistCommand(o)&&(this.commandMap=$.extend(this.commandMap,o)),this.processFailCommand(o)},checkExistCommand:function(o){var n;for(n in o)if(o.hasOwnProperty(n)&&n in this.commandMap)return window.console&&console.warn('The command "'+n+'" is already exist'),void 0;return!0},processFailCommand:function(o){var n;for(n in o){var i=this._failCommandCacheList[n];o.hasOwnProperty(n)&&i&&this.process(i)}},process:function(o){if(!(o.command&&o.command in this.commandMap))return this._failCommandCacheList[o.command]=o,window.console&&console.warn("Please check or register the data processing command"),void 0;var n=this.commandMap[o.command];return n(o.data)},common_login:function(){PageData&&PageData.user&&!PageData.user.is_login&&this.requireInstanceAsync("common/widget/LoginDialog",[],function(){})},common_register:function(o){var n=o.return_url||"http://tieba.baidu.com",i="https://passport.baidu.com/v2/?reg&tpl=tb&u="+n;window.open(i)},exception_all:function(){throw new Error("Processing data exception")}}});
;_.Module.define({path:"common/widget/messenger/messengerTarget",requires:[],sub:{initial:function(e,t,r){var i="";if(arguments.length<3?i="Target error: target and name are both requied":"object"!=typeof t?i="Target error: target itself must be window object":"string"!=typeof r&&(i="Target error: target name must be string type"),i)throw new Error(i);this.prefix=e,this.target=t,this.name=r},send:function(e){var t="postMessage"in window;if(t)this.target.postMessage(this.prefix+e,"*");else{var r=window.navigator[this.prefix+this.name];if("function"!=typeof r)throw new Error("Target error: target callback function is not defined");var i=$.tb.location,o={origin:i.getProtocol()+"//"+i.getHost(),data:this.prefix+e};r(o,window)}}}});_.Module.define({path:"common/widget/baseUserData",requires:[],sub:{initial:function(){},route:{getTdou:"http://tieba.baidu.com/tbmall/getUserTd"},_item_cache_last_total_tdou:0,_parrScores:null,_parrProps:null,getUserName:function(){return PageData.user.name||PageData.user.name_url},getUserTdou:function(){var e=PageData.user,r=this._parrScores||e.Parr_scores;return r&&!$.isEmptyObject(r)?r.scores_money+r.scores_other:0},getShowName:function(){return PageData.user.name_show||PageData.user.user_name},isMemeber:function(){var e=this._parrProps||PageData.user.mParr_props||PageData.user.Parr_props,r=this._getMaxLevel(e);return!!r},getMemberLevel:function(){var e=this._parrProps||PageData.user.mParr_props||PageData.user.Parr_props,r=this._getMaxLevel(e);return r},getMemberIcon:function(){var e=this._parrProps||PageData.user.mParr_props||PageData.user.Parr_props,r=this._getMaxLevelExpire(e),a=this.getMemberIconByLevel(r);return a},getMemberIconByLevel:function(e){e&&(e=parseInt(e));var r="",a="",t="";switch(e){case 1:r=" ordinary_member_icon",a="\u8D34\u5427\u4F1A\u5458",t="\u7EED\u8D39\u8D34\u5427\u4F1A\u5458";break;case-1:r=" ordinary_member_icon_expire",a="\u7EED\u8D39\u8D34\u5427\u4F1A\u5458",t="\u5F00\u901A\u8D34\u5427\u4F1A\u5458";break;case-2:r=" super_member_icon_expire",a="\u7EED\u8D39\u8D34\u5427\u8D85\u7EA7\u4F1A\u5458",t="\u5F00\u901A\u8D34\u5427\u8D85\u7EA7\u4F1A\u5458";break;case 2:r=" super_member_icon",a="\u8D34\u5427\u8D85\u7EA7\u4F1A\u5458",t="\u7EED\u8D39\u8D34\u5427\u8D85\u7EA7\u4F1A\u5458";break;default:e=0,r="",t="\u5F00\u901A\u4F1A\u5458",a="\u5F00\u901A\u4F1A\u5458"}var s={level:e,icon:r,title:a,action_title:t};return s},isLogin:function(){return PageData.user.is_login},needUpdateTdou:function(){var e=PageData.user.mParr_props||PageData.user.Parr_props,r=PageData.user.Parr_scores;return!(e&&r)},_getMaxLevel:function(e){var r=0,a=(new Date).getTime(),t=e||PageData.user.Parr_props;if(!t||!t.level)return 0;var s=t.level;return 1e3*s.end_time>a&&parseInt(s.props_id,10)>r&&(r=parseInt(s.props_id,10)),r},_getMaxLevelExpire:function(e){var r=0,a=(new Date).getTime(),t=e||PageData.user.Parr_props;if(!t||!t.level)return 0;var s=t.level;return parseInt(s.props_id,10)>r&&(r=parseInt(s.props_id,10),1e3*s.end_time<=a&&(r=0-r)),r},getTdou:function(e,r){var a=this;a._get_tdou_ajax&&a._get_tdou_ajax.abort(),a._get_tdou_ajax=$.ajax({type:"get",url:a.route.getTdou+"?"+new Date,data:{},cache:!1,dataType:"json"}).success(function(a){e.call(r,a)})}}});